webpackJsonp(["app-web"],{"../front/files/css/sass/deezer.scss":function(e,t){},"./js/_bundles/app-web.js":function(e,t,n){"use strict";function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(r,o){try{var i=t[r](o),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){a("next",e)},function(e){a("throw",e)});e(s)}return a("next")})}}Object.defineProperty(t,"__esModule",{value:!0});n("./js/_modules/publicPath.js");var r=n("./node_modules/react/index.js"),o=n.n(r),i=n("./node_modules/react-dom/index.js"),s=n.n(i),l=n("./sass/bootstrap.scss"),c=(n.n(l),n("../front/files/css/sass/deezer.scss")),p=(n.n(c),n("./sass/naboo.scss")),u=(n.n(p),n("./js/_modules/flash_detect.js"),n("./js/_modules/Events.js")),d=n("./js/_modules/config/index.js"),f=n("./js/_modules/monitoring/jiraIssueCollector.js"),h=n("./js/_modules/logger/client.js"),m=n("./js/_modules/monitoring/reportSlowResources.js"),y=n("./js/_modules/tips.js"),b=n("./js/_modules/www.js"),g=n("./js/_modules/infinite_scroll.js"),_=n("./node_modules/lodash.throttle/index.js"),v=n.n(_),E=n("./js/_modules/notification.js"),O=n("./js/_modules/userData.js"),j=n("./js/_modules/dzoffline.js"),T=n("./js/_modules/tracking.js"),w=n("./js/_modules/storage.js"),N=n("./js/_modules/favorite.js"),S=n("./js/_modules/BrowserDetect.js"),C=n("./js/_modules/redux/createStore.js"),P=n("./js/_modules/redux/stores/user.js"),k=n("./js/_components/Root.js"),A=function(){var e=a(regeneratorRuntime.mark(function e(){var t,n,a,r,i,l,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector("[data-layout=onboarding]"),n=document.getElementById("dzr-app"),a=document.getElementById("naboo_content"),r=window.__DZR_APP_STATE__||{},i=window.__DZR_MODAL_PATH__||{},r.legacyContent=a&&a.innerHTML,e.next=8,Object(C.a)(r);case 8:if(l=e.sent,!t&&n&&"web"===d.a.get("PLATFORM")){e.next=11;break}return e.abrupt("return");case 11:c=Object(P.c)(l.getState().user),"classList"in document.body&&c.current===c.electron&&(document.body.classList.add("os-"+S.a.OS.toLowerCase()),document.body.classList.add("electron-ui")),s.a.render(o.a.createElement(k.a,{store:l,appState:r,modalPath:i}),n),Object(b.b)(),Object(b.a)(),E.b.init(),j.a.init(),O.a.init(),T.a.init(),N.a.init(),E.a.init(),w.a.init(),y.a.init(),Object(f.a)(),u.a.trigger(u.a.navigation.page_changed,{path:b.c.getCurrentPath()}),l.getState().user.id&&u.a.resolve(u.a.user.loaded);case 27:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();window.onunhandledrejection=function(e){e.reason&&"Readable side canceled"!==e.reason.message&&h.a.error(e.reason)},"Explorer"===S.a.browser&&S.a.version<=9?document.addEventListener("DOMContentLoaded",A):A(),u.a.subscribe(u.a.navigation.page_displayed,m.a),window.addEventListener("scroll",v()(function(){g.a.checkPosition(),u.a.trigger(u.a.layout.scroll,{height:window.innerHeight,yscroll:window.pageYOffset})},100),{passive:!0})},"./js/_components/App/components/LoadingBar.js":function(e,t,n){"use strict";(function(e){function a(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):a(e,t))}var s=n("./node_modules/react/index.js"),l=n.n(s),c=n("./node_modules/classnames/index.js"),p=n.n(c),u=n("./js/_modules/Events.js"),d=void 0,f=void 0,h=void 0,m=function(t){function n(){r(this,n);var e=o(this,t.call(this));return e._onPageChanged=e._onPageChanged.bind(e),e._onPageDisplayed=e._onPageDisplayed.bind(e),e._updateWidth=e._updateWidth.bind(e),e._onTransitionEnd=e._onTransitionEnd.bind(e),e.state={isLoading:!1,width:0},e}return i(n,t),n.prototype.componentDidMount=function(){u.a.subscribe(u.a.navigation.page_changed,this._onPageChanged),u.a.subscribe(u.a.navigation.page_displayed,this._onPageDisplayed)},n.prototype.componentWillUnmount=function(){clearTimeout(d),clearTimeout(h),clearInterval(f),u.a.unsubscribe(u.a.navigation.page_changed,this._onPageChanged),u.a.unsubscribe(u.a.navigation.page_displayed,this._onPageDisplayed)},n.prototype.render=function(){var e=p()({"page-loader":!0,opened:this.state.isLoading}),t=p()({"page-loader-bar":!0,"has-transition":this.state.hasTransition});return l.a.createElement("div",{className:e,id:"page_loader",ref:"content"},l.a.createElement("div",{className:t,style:{width:this.state.width+"%"}}))},n.prototype._onPageChanged=function(){var e=this;this.state.isLoading||(this.setState({isLoading:!0,hasTransition:!0,width:20+55*Math.random()}),d=setTimeout(function(){e._updateWidth(),f=setInterval(e._updateWidth,1e3)},1e3))},n.prototype._onPageDisplayed=function(){var t=this;e.nextTick(function(){t.state.isLoading&&(clearTimeout(d),clearInterval(f),t.setState({hasTransition:!1,width:100}),h=setTimeout(function(){t.refs.content.addEventListener("transitionend",t._onTransitionEnd,!1),t.setState({isLoading:!1})},500))})},n.prototype._onTransitionEnd=function(){this.setState({width:0}),this.refs.content.removeEventListener("transitionend",this._onTransitionEnd)},n.prototype._updateWidth=function(){this.state.width>=90&&clearInterval(f),this.setState({width:this.state.width+5})},n}(s.Component);t.a=m}).call(t,n("./node_modules/process/browser.js"))},"./js/_components/DataGrid/elements/HoverCard/HoverCard.js":function(e,t,n){"use strict";(function(e){function a(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):a(e,t))}var s=n("./node_modules/prop-types/index.js"),l=(n.n(s),n("./node_modules/react/index.js")),c=n.n(l),p=n("./node_modules/react-redux/es/index.js"),u=n("./js/_modules/portalPositioning.js"),d=n("./js/_modules/Events.js"),f=n("./js/_modules/www.js"),h=n("./js/_components/Portal/index.js"),m=n("./js/_components/Icon/index.js"),y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},b=function(t){function n(e){r(this,n);var a=o(this,t.call(this,e));return a._onClick=a._onClick.bind(a),a._reset=a._reset.bind(a),a._open=a._open.bind(a),a.state={position:e.position,show:!1,animate:!1,style:{}},a}return i(n,t),n.prototype.componentDidMount=function(){d.a.subscribe(d.a.hovercard.hide,this._reset)},n.prototype.componentWillUnmount=function(){d.a.unsubscribe(d.a.hovercard.hide)},n.prototype.render=function(){var e=this,t={position:"absolute",top:"100%",left:"50%",transform:"translate(-6px, -7px)"},n=y({},this.state.style);this.state.show&&(n.display="block");var a={onClick:this._onClick,ref:function(t){return e.anchorNode=t}};return c.a.createElement("div",null,c.a.cloneElement(this.props.anchor,a),c.a.createElement(h.a,{id:"hovercard-portal",show:this.state.show,onOutsideClose:this._reset},c.a.createElement("div",{ref:function(t){return e.contentNode=t},className:"hovercard-tpl",id:"hovercard",style:n},c.a.createElement("div",{id:"arrow",className:"hovercard_arrow arrow_s",style:t}),this.props.children)))},n.prototype._onClick=function(e){e.stopPropagation(),0!==this.props.userID?this.state.show?this._close():(d.a.trigger(d.a.hovercard.show,this.props.id),setTimeout(this._open,0)):f.c.goToConnection()},n.prototype._close=function(){var e=this;this.setState({animate:!1},function(){setTimeout(function(){e.setState({show:!1})},150)})},n.prototype._open=function(){var t=this;this.setState({show:!0},e.nextTick(function(){var e=u.a.getPositions(t.anchorNode,t.contentNode),n=u.a.getPositionForRtl(t.props.position),a=t._addOffsets(n,e[n]);t.setState({animate:!0,position:n,style:a},function(){t._reposition(n,e)})}))},n.prototype._reposition=function(e,t){var n=u.a.checkPosition(this.anchorNode,this.contentNode,e);if(n!==e){var a=this._addOffsets(n,t[n]);this.setState({position:n,style:a})}},n.prototype._reset=function(e,t){this.state.show&&(t&&this.props.id===t||this.setState({show:!1,animate:!1}))},n.prototype._addOffsets=function(e,t){switch(e){case"top":t.top-=10;break;case"bottom":t.top+=10;break;case"left":t.left-=10;break;case"right":t.left+=10;break;case"left-top":t.top+=30,t.left-=10;break;case"right-top":t.top+=30,t.left+=10;break;case"left-bottom":t.top-=30,t.left-=10;break;case"right-bottom":t.top-=30,t.left+=10}return t},n}(l.Component);b.defaultProps={position:"top",anchor:c.a.createElement("button",{className:"action-item-btn",type:"button"},c.a.createElement(m.a,{name:"options"}))};t.a=Object(p.b)(function(e){return{userID:e.user.id}})(b)}).call(t,n("./node_modules/process/browser.js"))},"./js/_components/DataGrid/index.js":function(e,t,n){"use strict";function a(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):a(e,t))}function s(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):s(e,t))}function u(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):u(e,t))}function m(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):m(e,t))}function _(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_(e,t))}function j(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function N(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):j(e,t))}function S(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function k(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):S(e,t))}function A(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function R(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):A(e,t))}function I(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function F(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):I(e,t))}function U(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function G(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):U(e,t))}function z(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function W(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):z(e,t))}function V(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function X(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):V(e,t))}function $(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ee(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):$(e,t))}function te(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ae(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function re(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):te(e,t))}function oe(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function se(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function le(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):oe(e,t))}function ce(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ue(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function de(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):ce(e,t))}function fe(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function he(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function me(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ye(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):fe(e,t))}function be(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _e(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ve(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):be(e,t))}function Ee(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function je(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Te(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Ee(e,t))}function we(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Se(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ce(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):we(e,t))}function Pe(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ae(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function xe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Pe(e,t))}function De(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ie(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Le(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):De(e,t))}function Me(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ue(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Be(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Me(e,t))}function He(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ze(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function qe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):He(e,t))}function Ye(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function We(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ve(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ke(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Ye(e,t))}function Qe(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Xe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $e(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Je(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Qe(e,t))}function Ze(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function nt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Ze(e,t))}function at(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function rt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ot(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function it(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):at(e,t))}function st(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function lt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ct(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function pt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):st(e,t))}function ut(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function dt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ft(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ht(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):ut(e,t))}function mt(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function yt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function gt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):mt(e,t))}function _t(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function vt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Et(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ot(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_t(e,t))}function jt(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Tt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Nt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):jt(e,t))}function St(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Ct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function kt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):St(e,t))}function At(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function xt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Rt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):At(e,t))}function It(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Lt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ft(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):It(e,t))}function Ut(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Bt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ht(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Gt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Ut(e,t))}function zt(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function qt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Wt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):zt(e,t))}function Vt(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Kt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Xt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Vt(e,t))}function $t(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Jt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function en(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):$t(e,t))}var tn=n("./node_modules/prop-types/index.js"),nn=n.n(tn),an=n("./node_modules/react/index.js"),rn=n.n(an),on=n("./node_modules/react-dom/index.js"),sn=n.n(on),ln=n("./node_modules/react-redux/es/index.js"),cn=n("./js/_modules/Events.js"),pn=n("./js/_modules/api.js"),un=n("./js/_modules/i18n.js"),dn=n("./js/_modules/modal.js"),fn=n("./js/_modules/models/Track.js"),hn=n("./js/_modules/gatekeeper.js"),mn=n("./js/_modules/Store.js"),yn=function(){return new mn.a({items:{},defaultSelection:!1,fill:function(e){for(var t=[],n=0,a=e.length;n<a;n++)t[e[n]]=this.items[e[n]]||{selected:this.defaultSelection,displayContributors:!1};return this.items=t,this.emitChange(),this},reset:function(){return this.defaultSelection=!1,this.items={},this.emitChange(),this},setDefaultSelection:function(e){return this.defaultSelection=e,this},selectAll:function(){for(var e in this.items)this.items.hasOwnProperty(e)&&(this.items[e].selected=!0);return this.emitChange("selection"),this},unselectAll:function(){for(var e in this.items)this.items.hasOwnProperty(e)&&(this.items[e].selected=!1);return this.emitChange("selection"),this},toggleSelection:function(e){return void 0===this.items[e]?this:(this.items[e].selected=!this.items[e].selected,this.emitChange("selection"),this)},select:function(e){return void 0===this.items[e]?this:(this.items[e].selected=!0,this.emitChange("selection"),this)},unselect:function(e){return void 0===this.items[e]?this:(this.items[e].selected=!1,this.emitChange("selection"),this)},isSelected:function(e){return this.items[e]&&this.items[e].selected},hasOneSelected:function(){for(var e in this.items)if(this.items.hasOwnProperty(e)&&!0===this.items[e].selected)return!0;return!1},toggleContributors:function(e){if(void 0===this.items[e])return this;var t=this.items[e].displayContributors;return this.hideAllContributors(),!1===t&&(this.items[e].displayContributors=!0),this.emitChange("contributors"),this},displayContributors:function(e){return void 0===this.items[e]?this:(this.items[e].displayContributors=!0,this.emitChange("contributors"),this)},hideContributors:function(e){return void 0===this.items[e]?this:(this.items[e].displayContributors=!1,this.emitChange("contributors"),this)},hasDisplayedContributors:function(e){return this.items[e]&&this.items[e].displayContributors},getDisplayedContributors:function(){var e=[];for(var t in this.items)this.items.hasOwnProperty(t)&&this.items[t].displayContributors&&e.push(Number(t));return e},hideAllContributors:function(){for(var e in this.items)this.items.hasOwnProperty(e)&&(this.items[e].displayContributors=!1);return this.emitChange("contributors"),this}})},bn=n("./js/_modules/dzPlayer.js"),gn=n("./js/_components/DataGrid/utils.js"),_n=n("./js/_components/DataGrid/presets/index.js"),vn=n.n(_n),En=n("./node_modules/classnames/index.js"),On=n.n(En),jn=n("./js/_modules/portalPositioning.js"),Tn=n("./js/_modules/userData.js"),wn=n("./js/_components/Portal/index.js"),Nn=n("./js/_components/ContextMenu/elements/TrackMenu.js"),Sn=function(e){function t(n){r(this,t);var a=o(this,e.call(this,n));return a._onRightClick=a._onRightClick.bind(a),a._reset=a._reset.bind(a),a.state={style:{},show:!1,animate:!1,trackProps:!1},a}return i(t,e),t.prototype.componentDidMount=function(){cn.a.subscribe(cn.a.menu.contextMenuRightClickOpen,this._onRightClick),cn.a.subscribe(cn.a.menu.contextMenuClose,this._reset),cn.a.subscribe(cn.a.navigation.page_displayed,this._reset)},t.prototype.componentWillUnmount=function(){clearTimeout(this._openTimeoutRef),cn.a.unsubscribe(cn.a.menu.contextMenuRightClickOpen,this._onRightClick),cn.a.unsubscribe(cn.a.menu.contextMenuClose,this._reset),cn.a.unsubscribe(cn.a.navigation.page_displayed,this._reset)},t.prototype.render=function(){var e=this.state,t=e.animate,n=e.show,a=e.trackProps,r=Object.assign({},this.state.style),o=On()({"page-contextmenu":!0,opened:t});return n&&(r.display="block"),rn.a.createElement(wn.a,{id:"grid-context-menu-portal",show:n,onOutsideClose:this._reset},rn.a.createElement("div",{className:o,style:r,ref:"content"},rn.a.createElement("div",{className:"popover"},a?rn.a.createElement(Nn.a,a):null)))},t.prototype._onRightClick=function(e,t){var n=this;cn.a.trigger(cn.a.menu.contextMenuClose,this.props.id),this._openTimeoutRef=setTimeout(function(){n._open(t)},0)},t.prototype._open=function(e){var t=this;this.setState({show:!0},function(){var n=Array.isArray(e.id)?e.id:[e.id],a=1===n.length&&Tn.a.isFavorite("song",n[0]),r={data:e.data,id:n,context:e.context,listenContext:e.listenContext,type:"track",isFavorite:a,isRadio:bn.a.isRadio()};t.setState({animate:!0,trackProps:r},function(){t._position(e)})})},t.prototype._reset=function(e,t){this.state.show&&(t&&this.props.id===t||this.setState({show:!1,animate:!1}))},t.prototype._position=function(e){var t=this.refs.content.getBoundingClientRect(),n={height:0,width:0,left:e.style.left,top:e.style.top},a=jn.a.getClipping(n,t,"right"),r=a.isOverTop,o=a.isOverBottom,i=a.isOverRight,s=e.style.left,l=e.style.top-t.height/2;r?l=e.style.top-30:o&&(l=e.style.top-t.height),i&&(s=e.style.left-t.width),this.setState({style:{left:s,top:l}})},t}(an.Component),Cn=function(e){function t(n){l(this,t);var a=c(this,e.call(this,n));return a._onScroll=a._onScroll.bind(a),a._updateOffset=a._updateOffset.bind(a),a._updateStateFinal=a._updateStateFinal.bind(a),a.state={start:0,end:Math.ceil(window.innerHeight/n.elementHeight),numberOfChildren:n.children.length,isScrolling:!1},a}return p(t,e),t.prototype.componentDidMount=function(){cn.a.subscribe(cn.a.layout.scroll,this._onScroll),cn.a.subscribe(cn.a.ads.hideAdBlockBanner,this._updateOffset),this._updateOffset()},t.prototype.componentWillReceiveProps=function(e){this.setState({numberOfChildren:e.children.length})},t.prototype.shouldComponentUpdate=function(e,t){var n=this.state,a=n.start,r=n.end,o=n.numberOfChildren,i=n.isScrolling;return a!==t.start||r!==t.end||o!==t.numberOfChildren||i!==t.isScrolling||o>0&&this.props.children[o-1].key!==e.children[o-1].key},t.prototype.componentWillUnmount=function(){cn.a.unsubscribe(cn.a.layout.scroll,this._onScroll),cn.a.unsubscribe(cn.a.ads.hideAdBlockBanner,this._updateOffset),clearTimeout(this._scrollingTimeout)},t.prototype.render=function(){var e=this,t=this.props,n=t.children,a=t.containerClassName,r=t.containerType,o=this.state,i=o.start,s=o.end,l=o.isScrolling,c=this._getDividers(n),p=n.slice(i,s+c.length);return rn.a.createElement(r,{ref:function(t){return e.infiniteNode=t},style:{pointerEvents:l?"none":"auto"},className:a},this._renderTopSpacer(),p,this._renderBottomSpacer())},t.prototype._renderTopSpacer=function(){return rn.a.createElement(this.props.spacerType,{key:"topSpacer",style:{height:this.state.start*this.props.elementHeight}})},t.prototype._renderBottomSpacer=function(){var e=this.props,t=e.children,n=e.spacerType,a=e.elementHeight,r=this.state,o=r.numberOfChildren,i=r.end,s=this._getDividers(t);return rn.a.createElement(n,{key:"bottomSpacer",style:{height:Math.max(0,(o-i-s.length)*a)}})},t.prototype._onScroll=function(e,t){var n=t.height,a=t.yscroll;this._scrollingTimeout&&clearTimeout(this._scrollingTimeout),this._updateState(!0,n,a),this._scrollingTimeout=setTimeout(this._updateStateFinal,this.props.stateTTL)},t.prototype._updateState=function(e,t,n){e=Boolean(e);var a=this.props.elementHeight,r=this.state.numberOfChildren,o=t/2,i=t,s=o*Math.floor((n-this._offsetTop)/o),l=s+o,c=Math.floor(Math.max(0,s-i)/a),p=Math.ceil(Math.min(a*r,l+i)/a);this.state.start===c&&this.state.end===p&&this.state.isScrolling===e||c>p||this.setState({start:c,end:p,isScrolling:e})},t.prototype._updateStateFinal=function(){this.setState({isScrolling:!1})},t.prototype._updateOffset=function(){this._offsetTop=this.infiniteNode.getBoundingClientRect().top},t.prototype._getDividers=function(e){return e.filter(function(e){return"divider"===e.key})},t}(an.Component);Cn.defaultProps={containerType:"div",spacerType:"div",stateTTL:150};var Pn=Cn,kn=n("./js/_modules/sharebox.js"),An=n("./js/_modules/config/index.js"),xn=n("./js/_modules/player/PlayerMetrics.js"),Dn=n("./js/_components/StatesButton/index.js"),Rn=function(e){function t(n){d(this,t);var a=f(this,e.call(this,n));return a._onTogglePlayAll=a._onTogglePlayAll.bind(a),a}return h(t,e),t.prototype.componentDidMount=function(){cn.a.subscribe("EVENT.DATAGRID.togglePlayAll",this._onTogglePlayAll)},t.prototype.componentWillUnmount=function(){cn.a.unsubscribe("EVENT.DATAGRID.togglePlayAll",this._onTogglePlayAll)},t.prototype.render=function(){return rn.a.createElement("div",{className:"toolbar-item"},rn.a.createElement(Dn.a,{id:Number(this.context.id),type:this._getType(),items:this.props.items,action:"play",color:"primary",wording_type:"full",play_context:this.context.name}))},t.prototype._onTogglePlayAll=function(){if(this._hasSameContext())return xn.a.intent("toggle"),void bn.a.control.togglePause();xn.a.intent("play"),bn.a.play({type:this._getType(),id:Number(this.context.id),data:this.props.items,radio:"artist_smartradio"===this.context.name||"profile_user_radio"===this.context.name,context:{TYPE:this.context.name,ID:Number(this.context.id)}})},t.prototype._hasSameContext=function(){var e=bn.a.getContext();return null!==e&&(An.a.get("LOG_CONTEXT")[Object(gn.b)(e.TYPE)]===An.a.get("LOG_CONTEXT")[this.context.name]&&e.ID===this.context.id)},t.prototype._getType=function(){var e=this.props.type;return-1!==["chartsPlaylist","curatedChartsPlaylist","personalPlaylist","curatorPlaylist","collaborativePlaylist"].indexOf(e)?"playlist":"personalLoved"===e?"loved":"personalSong"===e?"personal_song":e},t}(an.Component);Rn.contextTypes={id:nn.a.oneOfType([nn.a.number,nn.a.string]),name:nn.a.string.isRequired};var In=Rn,Ln=n("./js/_components/Tooltip/index.js"),Mn=n("./js/_components/Icon/index.js"),Fn=rn.a.createElement(Mn.a,{name:"add"}),Un=rn.a.createElement(Mn.a,{name:"add"}),Bn=function(e){function t(n){y(this,t);var a=b(this,e.call(this,n));return a._onResize=a._onResize.bind(a),a._initAds=a._initAds.bind(a),a._onPlaylistAssistantClick=a._onPlaylistAssistantClick.bind(a),a.state={displayLabel:window.innerWidth>1080,hasAdsFull:!1},a}return g(t,e),t.prototype.componentDidMount=function(){cn.a.subscribe(cn.a.layout.resize,this._onResize),cn.a.subscribe(cn.a.layout.adsBackground,this._initAds)},t.prototype.componentWillUnmount=function(){cn.a.unsubscribe(cn.a.layout.resize,this._onResize),cn.a.unsubscribe(cn.a.layout.adsBackground,this._initAds)},t.prototype.render=function(){var e=rn.a.createElement("button",{onClick:this._onPlaylistAssistantClick,className:"btn btn-primary",id:"naboo_datagrid_add_track",type:"button"},Fn,rn.a.createElement("span",{className:"label"},Object(un.a)("Me suggérer des titres"))),t=rn.a.createElement(Ln.a,{text:Object(un.a)("Me suggérer des titres")},rn.a.createElement("button",{onClick:this._onPlaylistAssistantClick,className:"btn btn-primary",id:"naboo_datagrid_add_track",type:"button"},Un));return rn.a.createElement("div",{className:"toolbar-item"},this.state.displayLabel?e:t)},t.prototype._onPlaylistAssistantClick=function(){dn.a.open("/lightbox/playlist_assistant?type=add_song&playlist_id="+this.context.id)},t.prototype._onResize=function(e,t){this.setState({displayLabel:t.client_width>1080&&!this.state.hasAdsFull})},t.prototype._initAds=function(e,t){this.setState({hasAdsFull:"show"===t.display,displayLabel:"show"!==t.display})},t}(an.PureComponent);Bn.contextTypes={id:nn.a.oneOfType([nn.a.number,nn.a.string]).isRequired};for(var Hn=Bn,Gn=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"OE",letters:"Œ"},{base:"oe",letters:"œ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],zn={},qn=/[^\u0000-\u007E]/g,Yn=/[^a-z0-9\u0400-\u04FF]/gi,Wn=0;Wn<Gn.length;Wn++)for(var Vn=Gn[Wn].letters,Kn=0;Kn<Vn.length;Kn++)zn[Vn[Kn]]=Gn[Wn].base;var Qn=function(e){return"string"!=typeof e?"":e.replace(qn,function(e){return zn[e]||e}).replace(Yn,"-")},Xn=rn.a.createElement(Mn.a,{name:"cancel"}),$n=function(e){function t(n){v(this,t);var a=E(this,e.call(this,n));return a._onFilterChange=a._onFilterChange.bind(a),a._onFilterClear=a._onFilterClear.bind(a),a.state={filter:""},a}return O(t,e),t.prototype.render=function(){var e=this.state.filter,t={downloads:Object(un.a)("Rechercher dans mes achats"),playlist:Object(un.a)("Rechercher dans la playlist"),personalPlaylist:Object(un.a)("Rechercher dans la playlist"),personalSong:Object(un.a)("Rechercher dans mes MP3"),folder:Object(un.a)("Rechercher dans le dossier"),favorite:Object(un.a)("Rechercher parmi les titres"),loved:Object(un.a)("Rechercher parmi les titres"),personalLoved:Object(un.a)("Rechercher parmi les titres"),history:Object(un.a)("Rechercher dans l'historique")}[this.props.type]||Object(un.a)("Rechercher dans les résultats"),n=On()("reset",{"is-active":""!==e});return rn.a.createElement("div",{className:"toolbar-item pull-right",role:"search","aria-label":t},rn.a.createElement("form",{className:"toolbar-search form-inline",method:"post",autoComplete:"off",onSubmit:this._onFilterSubmit},rn.a.createElement("input",{ref:"filter",className:"form-control",id:"naboo_datagrid_filter_text",placeholder:t,onChange:this._onFilterChange,value:e,type:"search"}),rn.a.createElement("a",{className:n,onClick:this._onFilterClear,id:"naboo_datagrid_filter_clear",href:"#"},Xn)))},t.prototype._onFilterSubmit=function(e){e.preventDefault()},t.prototype._onFilterChange=function(e){var t=Qn(e.target.value.toLowerCase());this.setState({filter:e.target.value}),this.props.onFilter(t)},t.prototype._onFilterClear=function(e){var t=this;e.preventDefault(),this.setState({filter:""},function(){t.refs.filter.focus()}),this.props.onFilter("")},t}(an.Component),Jn=n("./js/_components/DropDown/index.js"),Zn=function(e){function t(n){T(this,t);var a=w(this,e.call(this,n));return a._items=[{label:Object(un.a)("Ajoutés récemment"),cell:"AddDate",order:"desc"},{label:Object(un.a)("A - Z (titre)"),cell:"Title",order:"asc"},{label:Object(un.a)("A - Z (artiste)"),cell:"Artist",order:"asc"},{label:Object(un.a)("A - Z (album)"),cell:"Album",order:"asc"},{label:Object(un.a)("Manuel"),cell:null,order:"asc"}],a._default=4,a._onResize=a._onResize.bind(a),a._initAds=a._initAds.bind(a),a.state={displayLabel:window.innerWidth>1080,hasAdsFull:!1},a}return N(t,e),t.prototype.componentDidMount=function(){cn.a.subscribe(cn.a.layout.resize,this._onResize),cn.a.subscribe(cn.a.layout.adsBackground,this._initAds)},t.prototype.componentWillUnmount=function(){cn.a.unsubscribe(cn.a.layout.resize,this._onResize),cn.a.unsubscribe(cn.a.layout.adsBackground,this._initAds)},t.prototype.render=function(){var e=this,t=this._items.map(function(t){var n=!!e.state.displayLabel&&t.label;return rn.a.createElement(Jn.a.Item,{key:t.cell+"_"+t.order,label:n},rn.a.createElement("a",{onClick:e._onSort.bind(e,t.cell,t.order),href:"#"},t.label))});return rn.a.createElement("div",{className:"toolbar-item pull-right"},rn.a.createElement(Jn.a,{selected:this._getSelected()},t))},t.prototype._onSort=function(e,t,n){n.preventDefault(),this.props.onSort(e,t)},t.prototype._onResize=function(e,t){this.setState({displayLabel:t.client_width>1080&&!this.state.hasAdsFull})},t.prototype._initAds=function(e,t){this.setState({hasAdsFull:t.display,displayLabel:!t.display})},t.prototype._getSelected=function(){if("function"==typeof this._items.findIndex){var e=this._items.findIndex(this._predicate,this);return-1===e?this._default:e}for(var t=0,n=this._items.length;t<n;t++)if(this._predicate(this._items[t]))return t;return this._default},t.prototype._predicate=function(e){return this.props.sortOrder===e.order&&this.props.sortCell===e.cell},t}(an.Component),ea=n("./js/_components/FileUploader.js"),ta=n("./js/_components/ContextMenu/Playlist.js"),na=n("./js/_components/ContextMenu/Album.js"),aa=n("./js/_modules/Type.js"),ra=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},oa=rn.a.createElement(Mn.a,{name:"edit"}),ia=rn.a.createElement("button",{className:"btn btn-default btn-icon",type:"button"},rn.a.createElement(Mn.a,{name:"options"})),sa=rn.a.createElement(Mn.a,{name:"share"}),la=function(e){function t(n){C(this,t);var a=P(this,e.call(this,n));return a._onFavoriteChange=a._onFavoriteChange.bind(a),a._onEditPlaylist=a._onEditPlaylist.bind(a),a._onShare=a._onShare.bind(a),a.state={isFavorite:Tn.a.isFavorite(a._getType(),a.props.id)},a}return k(t,e),t.prototype.componentDidMount=function(){cn.a.ready(cn.a.user.userReady,this._onFavoriteChange),cn.a.subscribe(cn.a.user.addFavorite,this._onFavoriteChange),cn.a.subscribe(cn.a.user.deleteFavorite,this._onFavoriteChange)},t.prototype.componentWillUnmount=function(){cn.a.unsubscribe(cn.a.user.addFavorite,this._onFavoriteChange),cn.a.unsubscribe(cn.a.user.deleteFavorite,this._onFavoriteChange)},t.prototype.render=function(){return rn.a.createElement("div",{className:"datagrid-toolbar clearfix"},this._renderPlay(),this._renderFavorite(),this._renderUpload(),this._renderEditPlaylist(),this._renderShare(),this._renderContextMenu(),this._renderFilter(),this._renderSorter())},t.prototype._renderPlay=function(){var e=this.props,t=e.options,n=e.type,a=e.filter,r=e.sortCell,o=e.items;return!1===t.toolbar.playAll?null:rn.a.createElement(In,{type:n,items:""!==a||null!==r?o:void 0})},t.prototype._renderFavorite=function(){var e=this.props,t=e.options,n=e.id;return!1===t.toolbar.favorite?null:rn.a.createElement("div",{className:"toolbar-item"},rn.a.createElement(Dn.a,{id:Number(n),type:this._getType()}))},t.prototype._renderEditPlaylist=function(){return!1===this.props.options.toolbar.edit?null:rn.a.createElement("div",{className:"toolbar-item"},rn.a.createElement("button",{className:"btn btn-default",type:"button",onClick:this._onEditPlaylist},oa,rn.a.createElement("span",{className:"label"},Object(un.a)("Editer"))))},t.prototype._renderContextMenu=function(){return!1===this.props.options.toolbar.contextMenu?null:rn.a.createElement("div",{className:"toolbar-item"},rn.a.createElement(Ln.a,{text:Object(un.a)("Ajouter")},this._renderAddContextMenu()))},t.prototype._renderAddContextMenu=function(){var e=this.props,t=e.id,n=e.type,a=e.data,r=Object(gn.b)(n),o={anchor:ia,id:Number(t),type:this._getType(n),data:a,position:"right",hasHeader:!1,context:Object(gn.b)(n),isFavorite:this.state.isFavorite,listenContext:{TYPE:r,ID:t}};switch(this.props.type){case"album":return rn.a.createElement(na.a,ra({isRadio:bn.a.isRadio()},o));case"playlist":case"chartsPlaylist":case"curatedChartsPlaylist":case"curatorPlaylist":case"collaborativePlaylist":case"personalPlaylist":case"personalLoved":return rn.a.createElement(ta.a,ra({isRadio:bn.a.isRadio()},o));default:return null}},t.prototype._renderUpload=function(){return!1===this.props.options.toolbar.upload?null:rn.a.createElement("div",{className:"toolbar-item",onClick:this.props.onUpload},rn.a.createElement(ea.a,{element_id:this.props.id,accept:"audio/mp3",type:"audio",directory:"user",action:"sendPersonalSong",multiFile:!0},rn.a.createElement("button",{className:"btn btn-default",role:"button",tabIndex:"0"},rn.a.createElement("span",{className:"label"},Object(un.a)("Envoyer vos mp3")))))},t.prototype._renderPlaylistAssistant=function(){return!1===hn.a.isAllowed("playlist_assistant")?null:!1===this.props.options.toolbar.playlistAssistant||0===this.props.userID?null:rn.a.createElement(Hn,{type:this.props.type,items:this.props.items})},t.prototype._renderFilter=function(){var e=this.props,t=e.options,n=e.type,a=e.filter,r=e.onFilter;return!1===t.toolbar.filter?null:rn.a.createElement($n,{type:n,filter:a,onFilter:r})},t.prototype._renderSorter=function(){return!1===this.props.options.toolbar.sorter?null:rn.a.createElement(Zn,{onSort:this.props.onSort,sortOrder:this.props.sortOrder,sortCell:this.props.sortCell})},t.prototype._renderShare=function(){var e=this.props,t=e.options,n=e.type,a=e.data;return!t.toolbar.shareType||"personalPlaylist"===n&&a.IS_PRIVATE?null:rn.a.createElement("div",{className:"toolbar-item"},rn.a.createElement("button",{className:"btn btn-default",type:"button",onClick:this._onShare},sa,rn.a.createElement("span",{className:"label"},Object(un.a)("Partager"))))},t.prototype._onShare=function(){kn.a.load(this.props.options.toolbar.shareType,this.props.id)},t.prototype._onEditPlaylist=function(){dn.a.open("/lightbox/playlist_assistant?type=create&playlist_id="+this.props.id)},t.prototype._onFavoriteChange=function(e,t){var n=Number(this.props.id);(!t||t.type===this._getType()&&Number(t.id)===n)&&this.setState({isFavorite:Tn.a.isFavorite(this._getType(),n)})},t.prototype._getType=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.type;switch(e){case"chartsPlaylist":case"curatedChartsPlaylist":case"curatorPlaylist":case"collaborativePlaylist":case"personalPlaylist":return"playlist";case"track":return"song";case aa.a.TalkShow:return"show";default:return e}},t}(an.Component);la.contextTypes={type:nn.a.string},la.defaultProps={data:{},sortCell:null,onUpload:function(){}};var ca=Object(ln.b)(function(e){return{userID:e.user.id}})(la),pa=rn.a.createElement(Mn.a,{className:"checkbox-tick",name:"check",size:"10"}),ua=function(e){function t(n,a){x(this,t);var r=D(this,e.call(this,n));return r._onSelect=r._onSelect.bind(r),r._updateSelected=r._updateSelected.bind(r),r.state={selected:a.itemsStore.hasOneSelected()},r}return R(t,e),t.prototype.componentDidMount=function(){this.context.itemsStore.onChange(this._updateSelected)},t.prototype.componentWillUnmount=function(){this.context.itemsStore.offChange(this._updateSelected)},t.prototype.render=function(){var e=this.state.selected,t=On()({checkbox:!0,checked:e});return rn.a.createElement("div",{className:"datagrid-cell cell-checkbox"},rn.a.createElement("label",{className:t},rn.a.createElement("input",{className:"checkbox-input",type:"checkbox","data-target":"checkall",checked:e,onChange:this._onSelect}),pa))},t.prototype._onSelect=function(){var e=!this.state.selected;this.context.itemsStore.setDefaultSelection(e),this.context.itemsStore[e?"selectAll":"unselectAll"](),!0===e&&cn.a.trigger(cn.a.datagrid.allTracksSelected)},t.prototype._updateSelected=function(){this.setState({selected:this.context.itemsStore.hasOneSelected()})},t}(an.Component);ua.contextTypes={itemsStore:nn.a.object.isRequired};var da=ua,fa=n("./js/_components/ContextMenu/Track.js"),ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ma=rn.a.createElement(Mn.a,{name:"trash",size:"12"}),ya=rn.a.createElement(Mn.a,{name:"download",size:"12"}),ba=function(e){function t(n,a){L(this,t);var r=M(this,e.call(this,n,a));return r._apiCalls=[],r._onPlayerTypeChange=r._onPlayerTypeChange.bind(r),r._onFavoriteChange=r._onFavoriteChange.bind(r),r._updateSelection=r._updateSelection.bind(r),r._onDownloadClick=r._onDownloadClick.bind(r),r._onRemoveClick=r._onRemoveClick.bind(r),r._onRemoved=r._onRemoved.bind(r),r.state={isRadio:bn.a.isRadio(),hasOneSelected:a.itemsStore.hasOneSelected()},r}return F(t,e),t.prototype.componentDidMount=function(){this.context.itemsStore.onChange(this._updateSelection),cn.a.subscribe(cn.a.player.changePlayerType,this._onPlayerTypeChange),cn.a.ready(cn.a.user.userReady,this._onFavoriteChange),cn.a.subscribe(cn.a.user.addFavorite,this._onFavoriteChange),cn.a.subscribe(cn.a.user.deleteFavorite,this._onFavoriteChange)},t.prototype.componentWillReceiveProps=function(){this.setState({isRadio:bn.a.isRadio(),hasOneSelected:this.context.itemsStore.hasOneSelected()})},t.prototype.componentWillUnmount=function(){this._apiCalls.forEach(pn.a.cancel),this.context.itemsStore.offChange(this._updateSelection),cn.a.unsubscribe(cn.a.player.changePlayerType,this._onPlayerTypeChange),cn.a.unsubscribe(cn.a.user.addFavorite,this._onFavoriteChange),cn.a.unsubscribe(cn.a.user.deleteFavorite,this._onFavoriteChange)},t.prototype.render=function(){var e=this.props.options.header;if(!1===this.state.hasOneSelected)return null;var t=[];return e.remove&&t.push(rn.a.createElement("button",{key:"remove",className:"btn btn-default",type:"button","aria-label":Object(un.a)("Supprimer"),onClick:this._onRemoveClick},ma,rn.a.createElement("span",{className:"label"},Object(un.a)("Supprimer")))),e.add&&t.push(this._renderAddContextMenu("add",Object(un.a)("Ajouter à une playlist"))),e.download&&t.push(rn.a.createElement(Ln.a,{key:"download",text:Object(un.a)("Télécharger"),position:"left"},rn.a.createElement("a",{className:"btn btn-default",role:"button",tabIndex:"0","aria-label":Object(un.a)("Télécharger"),onClick:this._onDownloadClick},ya))),e.contextMenu&&t.push(rn.a.createElement(Ln.a,{key:"contextMenu",text:Object(un.a)("Ajouter"),position:"left"},this._renderAddContextMenu("options",Object(un.a)("Ajouter")))),0===t.length?null:rn.a.createElement("div",{className:"datagrid-cell header-actions"},t)},t.prototype._renderAddContextMenu=function(e,t){var n=void 0,a=this.props.type;switch(a){case"discography":case"topArtist":n="artist";break;case"personalPlaylist":n="playlist";break;default:n=a}for(var r=[],o=[],i=this._getSelected(),s=void 0,l=0,c=i.length;l<c;l++)s=i[l],o.push(s),r.push(Object(gn.e)(s));var p=rn.a.createElement("button",{className:"btn btn-default",role:"button",tabIndex:"0","aria-label":t},rn.a.createElement(Mn.a,{name:e,size:"12"}),"add"===e?rn.a.createElement("span",{className:"label"},t):null),u=this.state.isFavorite;void 0===u&&1===r.length&&(u=Tn.a.isFavorite("song",r[0]));var d={position:"left",type:"track",forceShowPlaylists:"add"===e,data:{SONG:1===o.length?o[0]:{},PLAYLIST_ID:"playlist"===a||"personalPlaylist"===a?this.context.id:0,PLAYLIST_PERSONNAL:"personalPlaylist"===a},id:r,context:n,listenContext:{TYPE:Object(gn.b)(a),ID:this.context.id},anchor:p,containerClassname:"btn btn-default",key:"add",isFavorite:u,isRadio:this.state.isRadio};return rn.a.createElement(fa.a,d)},t.prototype._onDownloadClick=function(){var e=this,t=this.props.items.filter(function(t){return e.context.itemsStore.isSelected(Object(gn.e)(t))});if((t=t.map(function(e){return Object(gn.e)(e)})).length){var n=Object(gn.a)(t);this._apiCalls.push(n)}},t.prototype._onRemoveClick=function(){var e=this,t=this.props.items.filter(function(t){return e.context.itemsStore.isSelected(Object(gn.e)(t))});if((t=t.map(function(e){var t=Object(gn.e)(e);return[t,t>0?0:1]})).length&&confirm(Object(un.c)("Êtes-vous sûr de vouloir supprimer le titre sélectionné ?","Êtes-vous sûr de vouloir supprimer les titres sélectionnés ?",{count:t.length}))){var n=void 0,a=void 0,r=void 0,o=[];switch(this.props.type){case"personalLoved":for(n=0;n<t.length;n++)o.push(t[n][0]);r=pn.a.call({method:"favorite_song.removeMulti",data:{SNG_IDS:o},success:this._onRemoved,callback_parameters:{sng_list:t}}),this._apiCalls.push(r);break;case"personalPlaylist":case"collaborativePlaylist":a={playlist_id:this.context.id,songs:t},r=pn.a.call({method:"playlist.deleteSongs",data:a,success:this._onRemoved,callback_parameters:{sng_list:t}}),this._apiCalls.push(r);break;case"personalSong":for(n=0;n<t.length;n++)a={upload_id:t[n][0]},r=pn.a.call({method:"personal_song.delete",data:a,success:this._onRemoved,callback_parameters:{sng_list:[t[n][0]]}}),this._apiCalls.push(r)}}},t.prototype._onRemoved=function(e,t){if(!0===e){Tn.a.removePlaylistSong(this.context.id,t.sng_list);for(var n=0,a=t.sng_list.length;n<a;n++){var r="object"===ha(t.sng_list[n])?t.sng_list[n][0]:t.sng_list[n];this.context.itemsStore.unselect(r),"loved"===this.props.type&&"personalLoved"===this.props.type&&Tn.a.isFavorite("song",r)&&Tn.a.deleteFavorite({type:"song",id:r})}}},t.prototype._onPlayerTypeChange=function(){this.setState({isRadio:bn.a.isRadio()})},t.prototype._onFavoriteChange=function(e,t){var n=this._getSelected();1!==n.length||t&&("song"!==t.type||Number(t.id)!==Number(Object(gn.e)(n[0])))||this.setState({isFavorite:Tn.a.isFavorite("song",Object(gn.e)(n[0]))})},t.prototype._updateSelection=function(e){"selection"===e&&this.setState({hasOneSelected:this.context.itemsStore.hasOneSelected()})},t.prototype._getSelected=function(){for(var e=[],t=0,n=this.props.items.length;t<n;t++)this.context.itemsStore.isSelected(Object(gn.e)(this.props.items[t]))&&e.push(this.props.items[t]);return e},t}(an.Component);ba.contextTypes={id:nn.a.oneOfType([nn.a.number,nn.a.string]),itemsStore:nn.a.object.isRequired};var ga=ba,_a=rn.a.createElement(da,null),va=function(e){function t(){B(this,t);var n=H(this,e.call(this));return n._onTrackSelection=n._onTrackSelection.bind(n),n.state={selectedTracks:0},n}return G(t,e),t.prototype.componentDidMount=function(){this.context.itemsStore.onChange(this._onTrackSelection)},t.prototype.componentWillUnmount=function(){this.context.itemsStore.offChange(this._onTrackSelection)},t.prototype.render=function(){var e=this,t=this.props.options.cells,n=this.state.selectedTracks;if(!t.length)return null;var a=t.map(function(t){return e._renderHeader(t)}),r=On()({"datagrid-header":!0,"is-selected":n>0});return rn.a.createElement("div",{className:r},n>0?this._renderSelectedHeader():rn.a.createElement("div",{className:"datagrid-row"},a))},t.prototype._renderHeader=function(e){var t=this.props,n=t.cells,a=t.sortCell,r=t.onSort,o=t.options;if(void 0===n[e])return null;var i=n[e],s={"datagrid-cell":!0,"is-sortable":"function"==typeof i.sort,"sort-active":i.name===a,sortable:o.header.sorter&&"function"==typeof i.sort};s[i.className||""]=!0,s=On()(s);var l=o.header.sorter&&r&&n[e].sort?this._onSort.bind(this,e):void 0;return rn.a.createElement("div",{key:e,className:s,onClick:l,scope:"col"},this._renderLabel(e))},t.prototype._renderSelectedHeader=function(){var e=this.props,t=e.items,n=e.options,a=e.type,r=this.state.selectedTracks,o=r===t.length?Object(un.a)("Tous les titres"):Object(un.c)("%s titre sélectionné","%s titres sélectionnés",{count:r,sprintf:[r]}),i={items:t,options:n,type:a};return rn.a.createElement("div",{className:"datagrid-row"},rn.a.createElement("div",{className:"datagrid-cell cell-title"},rn.a.createElement("span",{className:"datagrid-label color-primary ellipsis"},o)),rn.a.createElement(ga,i),n.cells.indexOf("Checkbox")>-1?_a:null)},t.prototype._renderLabel=function(e){var t=this.props.cells;return t[e].getLabel?rn.a.createElement("span",{className:"datagrid-label ellipsis"},t[e].getLabel(this.props.options),this._renderSortIcon(e)):null},t.prototype._renderSortIcon=function(e){var t=this.props,n=t.cells,a=t.sortCell,r=t.sortOrder;if(!t.options.header.sorter||"function"!=typeof n[e].sort)return null;var o={asc:"sort-asc",desc:"sort-desc"},i=a===e?o[r]:"sort";return rn.a.createElement(Mn.a,{name:i,size:"12"})},t.prototype._onSort=function(e){this.props.options.header.sorter&&this.props.onSort(e)},t.prototype._onTrackSelection=function(){var e=this.context.itemsStore.items;this.setState({selectedTracks:Object.keys(e).filter(function(t){return e[t].selected}).length})},t}(an.Component);va.contextTypes={itemsStore:nn.a.object.isRequired};var Ea=va,Oa=n("./js/_modules/chromecast/index.js"),ja=rn.a.createElement(Mn.a,{name:"add"}),Ta=function(e){function t(n){q(this,t);var a=Y(this,e.call(this,n));return a.state={isRadio:bn.a.isRadio(),isFavorite:Tn.a.isFavorite("song",Object(gn.e)(n.item))},a}return W(t,e),t.prototype.render=function(){var e=void 0,t=this.props,n=t.type,a=t.item,r=this.state,o=r.isFavorite,i=r.isRadio;if(!Object(gn.q)(a))return null;switch(n){case"discography":case"topArtist":e=aa.a.Artist;break;case"personalPlaylist":e=aa.a.Playlist;break;default:e=n}var s=rn.a.createElement("button",{className:"action-item-btn datagrid-action","aria-label":Object(un.a)("Ajouter à une playlist"),type:"button"},ja),l={className:"datagrid-action",position:"left",type:aa.a.Track,anchor:s,forceShowPlaylists:!0,data:{SONG:a,PLAYLIST_ID:"playlist"===n||"personalPlaylist"===n?this.context.id:0,PLAYLIST_PERSONNAL:"personalPlaylist"===n},id:Object(gn.e)(a),context:e,listenContext:{TYPE:Object(gn.b)(n),ID:this.context.id},isFavorite:o,isRadio:i};return rn.a.createElement("div",{className:"datagrid-cell datagrid-cell-hover datagrid-cell-action"},rn.a.createElement("span",{className:"sr-only"},Object(un.a)("Ajouter à une playlist")),rn.a.createElement(Ln.a,{text:Object(un.a)("Ajouter à une playlist")},rn.a.createElement(fa.a,l)))},t}(an.Component);Ta.contextTypes={id:nn.a.oneOfType([nn.a.number,nn.a.string]).isRequired,name:nn.a.string.isRequired,itemsStore:nn.a.object.isRequired};var wa=Ta,Na=n("./js/_modules/utils.js"),Sa=function(e){function t(n){K(this,t);var a=Q(this,e.call(this,n));return a.updateInterval=null,a._updateTime=a._updateTime.bind(a),a.state={time:a._formatDate(n.item.DATE_ADD)},a}return X(t,e),t.prototype.componentDidMount=function(){this.updateInterval=setInterval(this._updateTime,1e3)},t.prototype.componentWillReceiveProps=function(e){this.setState({time:this._formatDate(e.item.DATE_ADD)})},t.prototype.shouldComponentUpdate=function(e,t){return this.state.time!==t.time},t.prototype.componentWillUnmount=function(){clearInterval(this.updateInterval)},t.prototype.render=function(){var e=this.state.time;return rn.a.createElement("div",{className:"datagrid-cell cell-date"},rn.a.createElement("span",{className:"datagrid-label datagrid-label-idle ellipsis",title:e},e))},t.prototype._formatDate=function(e){return 0===e?"-":Object(Na.I)(e,!1,"-")},t.prototype._updateTime=function(){Math.floor(performance.now()/1e3)%30==0&&this.setState({time:this._formatDate(this.props.item.DATE_ADD)})},t}(an.Component);Sa.getLabel=function(){return Object(un.a)("Ajouté")},Sa.className="cell-date",Sa.sort=function(e,t){return e.DATE_ADD-t.DATE_ADD};var Ca=Sa,Pa=n("./js/_components/Link.js"),ka=function(e){function t(){return J(this,t),Z(this,e.apply(this,arguments))}return ee(t,e),t.prototype.shouldComponentUpdate=function(e){var t=this.props.item;return t.ALB_ID!==e.item.ALB_ID||t.ALB_TITLE!==e.item.ALB_TITLE},t.prototype.render=function(){var e=void 0,t=this.props.item,n=t.ALB_TITLE;return e=void 0===t.ALB_ID||0===t.ALB_ID?rn.a.createElement("span",{className:"datagrid-label"},n||"-"):rn.a.createElement(Pa.a,{className:"datagrid-label datagrid-label-main",to:"/album/"+t.ALB_ID},t.ALB_TITLE),rn.a.createElement("div",{className:"datagrid-cell cell-album"},rn.a.createElement("div",{className:"ellipsis"},e))},t}(an.Component);ka.getLabel=function(){return Object(un.a)("Album")},ka.className="cell-album",ka.sort=function(e,t){return e.ALB_TITLE.toLowerCase()<t.ALB_TITLE.toLowerCase()?-1:1},ka.filter=function(e,t){return-1!==Qn(t.ALB_TITLE.toLowerCase()).indexOf(e)};var Aa=ka,xa=function(e){function t(){return ne(this,t),ae(this,e.apply(this,arguments))}return re(t,e),t.prototype.shouldComponentUpdate=function(e){var t=this.props.item;return t.ART_ID!==e.item.ART_ID||t.ART_NAME!==e.item.ART_NAME},t.prototype.render=function(){var e=[],t=this.props.item;if(t.ARTISTS&&t.ARTISTS.length){var n=[];t.ARTISTS.forEach(function(t,a){0!==Number(t.ROLE_ID)&&5!==Number(t.ROLE_ID)||-1!==n.indexOf(t.ART_ID)||(e.push(a>0?", ":"",rn.a.createElement(Pa.a,{key:"artist_"+t.ART_ID,className:"datagrid-label datagrid-label-main",to:"/artist/"+t.ART_ID,title:t.ART_NAME},t.ART_NAME)),n.push(t.ART_ID))})}else 0===Number(t.ART_ID)?e.push(t.ART_NAME||"-"):e.push(rn.a.createElement(Pa.a,{key:"artist_"+t.ART_ID,className:"datagrid-label datagrid-label-main",to:"/artist/"+t.ART_ID},t.ART_NAME));return rn.a.createElement("div",{className:"datagrid-cell cell-artist"},rn.a.createElement("div",{className:"ellipsis"},e))},t}(an.Component);xa.getLabel=function(){return Object(un.a)("Artiste")},xa.className="cell-artist",xa.sort=function(e,t){return e.ART_NAME.toLowerCase()<t.ART_NAME.toLowerCase()?-1:1},xa.filter=function(e,t){return-1!==Qn(t.ART_NAME.toLowerCase()).indexOf(e)};var Da=xa,Ra=rn.a.createElement(Mn.a,{className:"checkbox-tick",name:"check",size:"10"}),Ia=function(e){function t(n,a){ie(this,t);var r=se(this,e.call(this,n,a));return r._onSelect=r._onSelect.bind(r),r._updateSelection=r._updateSelection.bind(r),r.state={selected:a.itemsStore.isSelected(Object(gn.e)(n.item))},r}return le(t,e),t.prototype.componentDidMount=function(){this.context.itemsStore.onChange(this._updateSelection)},t.prototype.componentWillReceiveProps=function(e){this.setState({selected:this.context.itemsStore.isSelected(Object(gn.e)(e.item))})},t.prototype.shouldComponentUpdate=function(e,t){return this.state.selected!==t.selected},t.prototype.componentWillUnmount=function(){this.context.itemsStore.offChange(this._updateSelection)},t.prototype.render=function(){var e=this.state.selected,t=On()({checkbox:!0,checked:e});return rn.a.createElement("div",{className:"datagrid-cell cell-checkbox"},rn.a.createElement("label",{className:t,onDoubleClick:this._onDoubleClick},rn.a.createElement("input",{className:"checkbox-input",type:"checkbox","data-target":"check",checked:e,onChange:this._onSelect}),Ra))},t.prototype._onDoubleClick=function(e){e.stopPropagation()},t.prototype._onSelect=function(){var e=this.state.selected;this.context.itemsStore[e?"unselect":"select"](Object(gn.e)(this.props.item)),this._updateSelection("selection"),this.setState({selected:!e})},t.prototype._updateSelection=function(e){"selection"===e&&this.setState({selected:this.context.itemsStore.isSelected(Object(gn.e)(this.props.item))})},t}(an.Component);Ia.contextTypes={itemsStore:nn.a.object.isRequired};var La=rn.a.createElement(da,null);Ia.getLabel=function(){return La},Ia.className="cell-checkbox";var Ma=Ia,Fa=function(e){function t(n){pe(this,t);var a=ue(this,e.call(this,n));return a.state={isRadio:bn.a.isRadio(),isFavorite:Tn.a.isFavorite("song",Object(gn.e)(n.item))},a}return de(t,e),t.prototype.render=function(){var e=void 0,t=this.props,n=t.type,a=t.item,r=t.index,o=this.state,i=o.isFavorite,s=o.isRadio;if(!Object(gn.q)(a))return null;switch(n){case"discography":case"topArtist":e=aa.a.Artist;break;case"personalPlaylist":e=aa.a.Playlist;break;default:e=n}var l={className:"datagrid-action",position:"left",type:aa.a.Track,data:{SONG:a,PLAYLIST_ID:n===aa.a.Playlist||"personalPlaylist"===n?this.context.id:0,PLAYLIST_PERSONNAL:"personalPlaylist"===n,INDEX:r},id:Object(gn.e)(a),context:e,listenContext:{TYPE:Object(gn.b)(n),ID:this.context.id},isFavorite:i,isRadio:s};return rn.a.createElement("div",{className:"datagrid-cell datagrid-cell-hover datagrid-cell-action"},rn.a.createElement(Ln.a,{text:Object(un.a)("Afficher le menu")},rn.a.createElement(fa.a,l)))},t}(an.Component);Fa.contextTypes={id:nn.a.oneOfType([nn.a.number,nn.a.string]).isRequired,name:nn.a.string.isRequired,itemsStore:nn.a.object.isRequired};var Ua=Fa,Ba=rn.a.createElement(Mn.a,{name:"download",size:"14"}),Ha=function(e){function t(n){he(this,t);var a=me(this,e.call(this,n));return a._onDownloadClick=a._onDownloadClick.bind(a),a}return ye(t,e),t.prototype.shouldComponentUpdate=function(e){return this.props.item.SNG_ID!==e.item.SNG_ID},t.prototype.componentWillUnmount=function(){pn.a.cancel(this._apiCallRef)},t.prototype.render=function(){return rn.a.createElement("div",{className:"datagrid-cell datagrid-cell-action"},rn.a.createElement(Ln.a,{text:Object(un.a)("Télécharger")},rn.a.createElement("span",{className:"datagrid-action",onClick:this._onDownloadClick},Ba)))},t.prototype._onDownloadClick=function(){this._apiCallRef=Object(gn.a)(Object(gn.e)(Object(gn.c)(this.props.item)))},t}(an.Component),Ga=function(e){function t(){return ge(this,t),_e(this,e.apply(this,arguments))}return ve(t,e),t.prototype.shouldComponentUpdate=function(e){var t=this.props.item;return(t.DURATION||t.duration)!==(e.item.DURATION||e.item.duration)},t.prototype.render=function(){var e=this.props.item;return rn.a.createElement("div",{className:"datagrid-cell cell-duration"},rn.a.createElement("span",{className:"datagrid-label datagrid-label-idle ellipsis"},Object(Na.E)(e.DURATION||e.duration)))},t}(an.Component);Ga.getLabel=function(){return Object(un.a)("D.")},Ga.className="cell-duration",Ga.sort=function(e,t){return(e.DURATION||e.duration)-(t.DURATION||t.duration)};var za=Ga,qa=rn.a.createElement(Mn.a,{name:"edit",size:"14"}),Ya=function(e){function t(){Oe(this,t);var n=je(this,e.call(this));return n._onEditClick=n._onEditClick.bind(n),n}return Te(t,e),t.prototype.render=function(){return!0===Object(gn.n)(this.props.item)?null:rn.a.createElement("div",{className:"datagrid-cell datagrid-cell-hover datagrid-cell-action"},rn.a.createElement(Ln.a,{text:Object(un.a)("Editer")},rn.a.createElement("span",{className:"datagrid-action",onClick:this._onEditClick},qa)))},t.prototype._onEditClick=function(e){e.preventDefault(),dn.a.open("/lightbox/edit_personal_song.php?sng_id="+this.props.item.SNG_ID)},t}(an.Component),Wa=n("./js/_components/ContextMenu/Episode.js"),Va=function(e){function t(){return Ne(this,t),Se(this,e.apply(this,arguments))}return Ce(t,e),t.prototype.render=function(){var e=this.props,t=e.type,n=e.item;if(!Object(gn.q)(n))return null;var a={position:"left",type:aa.a.Episode,data:n,id:Number(n.EPISODE_ID),context:aa.a.TalkShow,listenContext:{TYPE:Object(gn.b)(t),ID:this.context.id}};return rn.a.createElement("div",{className:"datagrid-cell datagrid-cell-hover datagrid-cell-action"},rn.a.createElement("div",{className:"datagrid-action"},rn.a.createElement(Ln.a,{text:Object(un.a)("Afficher le menu")},rn.a.createElement(Wa.a,a))))},t}(an.Component);Va.contextTypes={id:nn.a.oneOfType([nn.a.number,nn.a.string]).isRequired};var Ka=Va,Qa=rn.a.createElement("span",{className:"heard-circle"}),Xa=function(e){function t(n){ke(this,t);var a=Ae(this,e.call(this,n));return a._initHeard=a._initHeard.bind(a),a._updateHeard=a._updateHeard.bind(a),a.state={heard:n.item.IS_HEARD},a}return xe(t,e),t.prototype.componentDidMount=function(){cn.a.ready(cn.a.user.userReady,this._initHeard,"bookmark"),cn.a.subscribe(cn.a.talk.bookmarkSet,this._updateHeard,"bookmark")},t.prototype.shouldComponentUpdate=function(e,t){return this.state.heard!==t.heard},t.prototype.componentWillUnmount=function(){cn.a.unsubscribe(cn.a.talk.bookmarkSet,this._updateHeard)},t.prototype.render=function(){var e=this.state.heard,t=On()("heard-status",{empty:"1"===e,half:"0.5"===e});return rn.a.createElement("div",{className:"datagrid-cell datagrid-cell-action"},rn.a.createElement("div",{className:"heard-icon"},Qa,rn.a.createElement("span",{className:t})))},t.prototype._initHeard=function(){var e=this.props.item,t=Tn.a.getEpisodeBookmark(e.EPISODE_ID,e.DURATION);this.setState({heard:t.IS_HEARD})},t.prototype._updateHeard=function(e,t){this.props.item.EPISODE_ID===t.EPISODE_ID&&this.setState({heard:t.ISHEARD})},t}(an.Component);Xa.className="datagrid-cell datagrid-cell-action cell-heard",Xa.sort=function(e,t){return e.IS_HEARD-t.IS_HEARD};var $a=Xa,Ja=rn.a.createElement("button",{type:"button"},rn.a.createElement(Mn.a,{name:"info"})),Za=function(e){function t(){return Re(this,t),Ie(this,e.apply(this,arguments))}return Le(t,e),t.prototype.render=function(){var e=this.props.item;if(!Object(gn.q)(e))return null;var t={id:Number(e.EPISODE_ID),type:"episode",hasDescription:!0,data:e,position:"left",context:this.context.panel_name,listenContext:{TYPE:"show",ID:e.EPISODE_ID},anchor:Ja};return rn.a.createElement("div",{className:"datagrid-cell datagrid-cell-hover datagrid-cell-action"},rn.a.createElement("div",{className:"datagrid-action"},rn.a.createElement(Wa.a,t)))},t}(an.Component);Za.contextTypes={name:nn.a.string.isRequired,panel_name:nn.a.string},Za.sort=function(e,t){return e.DATE_ADD-t.DATE_ADD};var er=Za,tr=function(e){function t(){return Fe(this,t),Ue(this,e.apply(this,arguments))}return Be(t,e),t.prototype.render=function(){var e=this.props.item;return rn.a.createElement("div",{className:"datagrid-cell cell-date"},rn.a.createElement("span",{className:"datagrid-label datagrid-label-idle ellipsis",title:e.EPISODE_PUBLISHED_TIMESTAMP},Object(Na.k)(e.EPISODE_PUBLISHED_TIMESTAMP.split(" ")[0],"/")))},t}(an.Component);tr.className="cell-date",tr.sort=function(e,t){return e.DATE_ADD-t.DATE_ADD};var nr=tr,ar=function(e){function t(n){Ge(this,t);var a=ze(this,e.call(this,n));return a._play=a._play.bind(a),a}return qe(t,e),t.prototype.render=function(){var e=this.props,t=e.type,n=e.item,a="talkEpisodes"===t?n.SHOW_NAME+" | ":"";return a+=n.EPISODE_TITLE,rn.a.createElement("div",{className:"datagrid-cell cell-title"},rn.a.createElement("span",{className:"datagrid-label datagrid-label-main title ellipsis",tabIndex:"0",onClick:this._play,onKeyDown:this._play},a))},t.prototype._play=function(){var e=this.props,t=e.item,n=e.type,a=e.index,r=e.options;!1===Object(gn.q)(t)||r.isRadio||(Object(gn.p)(t,this.context.name)?bn.a.control.togglePause():Object(gn.s)(n)?bn.a.playTrackAtIndex(a):bn.a.play(Object(gn.i)(this.props,this.context)))},t}(an.Component);ar.contextTypes={id:nn.a.oneOfType([nn.a.number,nn.a.string]).isRequired,name:nn.a.string.isRequired},ar.className="cell-title",ar.sort=function(e,t){return e.EPISODE_TITLE.toLowerCase()<t.EPISODE_TITLE.toLowerCase()?-1:1};var rr=ar,or=function(e){function t(n){We(this,t);var a=Ve(this,e.call(this,n));return a._play=a._play.bind(a),a}return Ke(t,e),t.prototype.render=function(){var e=this.props.item;return rn.a.createElement("div",{className:"datagrid-cell cell-title"},rn.a.createElement("div",{className:"ellipsis"},rn.a.createElement("a",{className:"datagrid-label datagrid-label-main title",tabIndex:"0",onClick:this._play,role:"button",onKeyDown:this._play},e.title)))},t.prototype._play=function(e){if(void 0===e.keyCode||13===e.keyCode){var t=this.props,n=t.item,a=t.type,r=t.index;if(!1!==Object(gn.q)(n))if(Object(gn.p)(n,this.context.name))bn.a.control.togglePause();else if(Object(gn.s)(a))bn.a.playTrackAtIndex(r);else{var o=Object(gn.i)(this.props,this.context);bn.a.play(o)}}},t}(an.Component);or.contextTypes={id:nn.a.oneOfType([nn.a.number,nn.a.string]).isRequired,name:nn.a.string.isRequired},or.defaultProps={filter:"",sortCell:""};var ir=or,sr=n("./js/_components/Favorite.js"),lr=function(e){function t(){return Xe(this,t),$e(this,e.apply(this,arguments))}return Je(t,e),t.prototype.shouldComponentUpdate=function(e){return this.props.item.SNG_ID!==e.item.SNG_ID},t.prototype.render=function(){var e=this.props.item,t=Object(gn.q)(e),n={className:"datagrid-action",type:"song",id:String(this.props.item.SNG_ID),tooltip:t,isDisabled:!t,context:this.context.name};return rn.a.createElement("div",{className:"datagrid-cell datagrid-cell-action cell-love"},rn.a.createElement(sr.a,n))},t}(an.Component);lr.contextTypes={name:nn.a.string.isRequired},lr.className="datagrid-cell-action cell-love";var cr=lr,pr=rn.a.createElement(Mn.a,{name:"lyrics",size:"14"}),ur=function(e){function t(){et(this,t);var n=tt(this,e.call(this));return n._onLyricsClick=n._onLyricsClick.bind(n),n}return nt(t,e),t.prototype.render=function(){var e=this.props.item;return!1===Object(gn.q)(e)||void 0===e.LYRICS_ID||0===e.LYRICS_ID?null:rn.a.createElement("div",{className:"datagrid-cell datagrid-cell-action"},rn.a.createElement(Ln.a,{text:Object(un.a)("Écouter avec les paroles")},rn.a.createElement("span",{className:"datagrid-action",onClick:this._onLyricsClick},pr)))},t.prototype._onLyricsClick=function(e){e.preventDefault();var t=this.props.item;if(!1!==Object(gn.q)(t))if(Object(gn.p)(t,this.context.name))cn.a.trigger(cn.a.menu.openPanel,{panel:"lyrics"});else{cn.a.subscribeOnce(cn.a.player.displayCurrentSong,function(){cn.a.trigger(cn.a.menu.openPanel,{panel:"lyrics"})});var n=Object(gn.i)(this.props,this.context);bn.a.play(n)}},t}(an.Component);ur.contextTypes={id:nn.a.oneOfType([nn.a.number,nn.a.string]).isRequired,name:nn.a.string.isRequired,itemsStore:nn.a.object.isRequired};var dr=ur,fr=n("./js/_components/Thumbnail/index.js"),hr=rn.a.createElement("span",{className:"datagrid-badge-unseen"}),mr=rn.a.createElement("span",{className:"play-default"},rn.a.createElement(Mn.a,{name:"play",size:"10"})),yr=rn.a.createElement("span",{className:"play-hover"},rn.a.createElement(Mn.a,{name:"pause",size:"10"})),br=rn.a.createElement("span",{className:"play-active"},rn.a.createElement("span",{className:"equalizer equalizer-inverse equalizer-12"})),gr=function(e){function t(n){rt(this,t);var a=ot(this,e.call(this,n));return a._play=a._play.bind(a),a}return it(t,e),t.prototype.shouldComponentUpdate=function(e){return this.props.index!==e.index||this.props.active!==e.active||this.props.item.SNG_ID!==e.item.SNG_ID},t.prototype.render=function(){var e=this.props,t=e.item,n=e.options,a=e.index,r=e.active;if(!Object(gn.t)(t))return this._renderCalendar();var o=null;n.unseen&&Object(gn.r)(t,this.context.lastSeen)?o=hr:n.trackNumber?o=rn.a.createElement("span",{className:"datagrid-track-number"},t.TRACK_NUMBER):n.trackIndex?o=rn.a.createElement("span",{className:"datagrid-track-number"},a+1):n.cover&&(o=this._renderThumbnail());var i=(Object(gn.q)(t)||n.isRadio)&&(r||!n.isRadio);return rn.a.createElement("div",{className:"datagrid-cell datagrid-cell-action"},o,i?rn.a.createElement("div",{className:"datagrid-cell-hover cell-play"},rn.a.createElement("a",{className:"cell-play-icons",onClick:this._play,role:"button","data-target":"play",tabIndex:"0","aria-label":Object(un.a)("Play")},mr,yr,br)):null)},t.prototype._renderThumbnail=function(){var e=this.props,t=e.options,n=e.item,a=On()("datagrid-cover",{"datagrid-cover-hover":!t.isRadio});return rn.a.createElement("div",{className:a},rn.a.createElement(fr.a,{type:t.cover,coverLink:!1,data:n,height:28,width:28}))},t.prototype._renderCalendar=function(){var e=Object(gn.j)(this.props.item);return rn.a.createElement("div",{className:"datagrid-calendar"},rn.a.createElement("div",{className:"month"},Object(Na.s)(e[1])),rn.a.createElement("div",{className:"day"},e[2]))},t.prototype._play=function(e){e.preventDefault();var t=this.props,n=t.item,a=t.items,r=t.type,o=t.index;if(!1!==Object(gn.q)(n)){if(Object(gn.p)(n,this.context.name))return xn.a.intent("toggle"),void bn.a.control.togglePause();if(Oa.a.isCasting()){var i=Object(gn.f)(n,a)%Oa.a.getQueueMaxItems(),s=bn.a.getTrackList()[i];if(s&&String(s.SNG_ID||s.EPISODE_ID)===String(n.SNG_ID||n.EPISODE_ID))return void Oa.a.executeAction("playAtIndex",[i])}if(Object(gn.s)(r))return xn.a.intent("play"),void bn.a.playTrackAtIndex(o);xn.a.intent("play"),bn.a.play(Object(gn.i)(this.props,this.context))}},t}(an.Component);gr.contextTypes={id:nn.a.oneOfType([nn.a.number,nn.a.string]).isRequired,name:nn.a.string.isRequired,lastSeen:nn.a.number},gr.getLabel=function(e){return e.trackIndex||e.trackNumber?"#":null},gr.className="datagrid-cell datagrid-cell-action cell-play";var _r=gr,vr=function(e){function t(){return lt(this,t),ct(this,e.apply(this,arguments))}return pt(t,e),t.prototype.render=function(){var e=this.props.item.RANK_SNG/1e5;return rn.a.createElement("div",{className:"datagrid-cell cell-popularity"},rn.a.createElement(Ln.a,{text:Object(un.a)("Popularité : ")+e.toFixed(2)+" / 10",position:"left"},this._renderNote(e)))},t.prototype._renderNote=function(e){for(var t=[],n=0;n<10;n++){var a=On()({"datagrid-note":!0,active:n<=Math.round(e)-1});t.push(rn.a.createElement("span",{key:n,className:a}))}return rn.a.createElement("span",{className:"popularity-note"},t)},t}(an.Component);vr.getLabel=function(){return Object(un.a)("Pop.")},vr.className="cell-popularity",vr.sort=function(e,t){return e.RANK_SNG-t.RANK_SNG};var Er=vr,Or=rn.a.createElement("span",{className:"datagrid-action"},rn.a.createElement(Mn.a,{name:"cancel",size:"14"})),jr=function(e){function t(n){dt(this,t);var a=ft(this,e.call(this,n));return a._onRemoveTrack=a._onRemoveTrack.bind(a),a}return ht(t,e),t.prototype.render=function(){return this.props.options.isRadio?null:rn.a.createElement("div",{className:"datagrid-cell datagrid-cell-action cell-remove",onClick:this._onRemoveTrack},rn.a.createElement(Ln.a,{text:Object(un.a)("Retirer de la file d'attente")},Or))},t.prototype._onRemoveTrack=function(){bn.a.removeTracks(this.props.index)},t}(an.Component),Tr=n("./js/_components/DataGrid/elements/HoverCard/HoverCard.js"),wr=rn.a.createElement("div",{className:"tinyscroll_scrollbar"},rn.a.createElement("div",{className:"tinyscroll_track"},rn.a.createElement("div",{className:"tinyscroll_thumb"},rn.a.createElement("div",{className:"tinyscroll_end"})))),Nr=rn.a.createElement("div",{className:"clearfix"}),Sr=rn.a.createElement("div",{className:"clearfix"}),Cr=rn.a.createElement("span",{className:"icn_play sprite_naboo"}),Pr=function(e){function t(n){yt(this,t);var a=bt(this,e.call(this,n));return a._apiCallRefs=[],a.state={},a._renderTrack=a._renderTrack.bind(a),a._delete=a._delete.bind(a),a._deleteCallback=a._deleteCallback.bind(a),a._replace=a._replace.bind(a),a._replaceCallback=a._replaceCallback.bind(a),a._fetchTracks=a._fetchTracks.bind(a),a}return gt(t,e),t.prototype.componentDidMount=function(){cn.a.subscribe(cn.a.hovercard.show,this._fetchTracks)},t.prototype.componentWillUnmount=function(){cn.a.unsubscribe(cn.a.hovercard.show,this._fetchTracks)},t.prototype.render=function(){var e=this.props,t=e.track,n=e.anchor,a={height:"75px"},r={float:"right"},o={display:this.state.selected?"block":"none",float:"right"};return rn.a.createElement(Tr.a,{id:"replace-"+t.SNG_ID,anchor:n},rn.a.createElement("div",{id:"content",className:"box-shadow"},rn.a.createElement("div",{className:"hovercard_replace tooltipdisconnect"},rn.a.createElement("div",{className:"hovercard_content_title"},rn.a.createElement("span",null,t.SNG_TITLE+" - "+t.ART_NAME)),rn.a.createElement("div",{className:"hovercard_content_listing"},rn.a.createElement("div",{id:"hovercard_content_tracks",style:a},wr,rn.a.createElement("div",{className:"tinyscroll_viewport"},rn.a.createElement("div",{className:"tinyscroll_overview"},this._renderResults()))))),Nr,rn.a.createElement("div",{className:"hovercard_replace_bottom"},rn.a.createElement("a",{onClick:this._delete,style:r,className:"btn btn-default btn-small pull-right mr_5"},rn.a.createElement("span",{className:"label"},Object(un.a)("Supprimer le titre de la playlist"))),rn.a.createElement("a",{id:"hovercard_replace_button",style:o,onClick:this._replace,className:"btn btn-default btn-small pull-right mr_5"},rn.a.createElement("span",{className:"label"},Object(un.a)("Remplacer"))),Sr)))},t.prototype._renderResults=function(){var e=this.state.results;if(!e)return null;if(0===e.length)return rn.a.createElement("div",null,rn.a.createElement("b",null,Object(un.a)("Aucune correspondance n'a été trouvée")));var t={width:"100%"};return rn.a.createElement("div",null,rn.a.createElement("strong",{style:t},Object(un.a)("Veuillez choisir un remplacant parmi la liste suivante:")),e.map(this._renderTrack))},t.prototype._renderTrack=function(e){var t=this.state.selected,n=On()({selected:t&&t.SNG_ID===e.SNG_ID});return rn.a.createElement("dl",{key:e.SNG_ID,className:n},rn.a.createElement("dd",{className:"hovercard_line_play"},rn.a.createElement("a",{onClick:this._play.bind(this,e)},Cr)),rn.a.createElement("dd",null,rn.a.createElement("a",{onClick:this._select.bind(this,e)},rn.a.createElement("span",{className:"hovercard_line_title"},e.SNG_TITLE),rn.a.createElement("span",{className:"hovercard_line_artist"},e.ART_NAME),rn.a.createElement("span",{className:"hovercard_line_album"},e.ALB_TITLE))))},t.prototype._play=function(e){bn.a.play({data:[e]})},t.prototype._select=function(e){this.setState({selected:e})},t.prototype._delete=function(){if(confirm(Object(un.a)("Voulez-vous vraiment effacer ce morceau ?"))){var e=this.props.track,t=void 0;switch(this.context.name){case"loved_page":t=pn.a.call({method:"favorite_song.remove",data:{sng_id:e.SNG_ID},success:this._deleteCallback});break;default:t=pn.a.call({method:"playlist.deleteSongs",data:{playlist_id:this.context.id,songs:[[e.SNG_ID,0]]},success:this._deleteCallback})}this._apiCallRefs.push(t)}},t.prototype._deleteCallback=function(e){if(e){var t=this.props.track;switch(this.context.name){case"loved_page":Tn.a.deleteFavorite({type:"song",id:t.SNG_ID});break;default:Tn.a.removePlaylistSong(this.context.id,[t.SNG_ID])}cn.a.trigger(cn.a.hovercard.hide)}},t.prototype._replace=function(){var e=this.props.track,t=this.state.selected,n=void 0;switch(this.context.name){case"loved_page":n=pn.a.call({method:"favorite_song.recoverSong",data:{new_sng_id:t.SNG_ID,old_sng_id:e.SNG_ID},success:this._replaceCallback});break;default:n=pn.a.call({method:"playlist.recoverSong",data:{new_sng_id:t.SNG_ID,old_sng_id:e.SNG_ID,playlist_id:this.context.id},success:this._replaceCallback})}this._apiCallRefs.push(n)},t.prototype._replaceCallback=function(e){if(e){var t=this.props.track,n=this.state.selected;switch(this.context.name){case"loved_page":Tn.a.replaceFavorite(Number(t.SNG_ID),n);break;default:cn.a.trigger(cn.a.playlist.updateSong,{playlist_id:this.context.id,id:Number(t.SNG_ID),item:n})}cn.a.trigger(cn.a.hovercard.hide)}},t.prototype._fetchTracks=function(e,t){var n=this,a=this.state.results,r=this.props.track;if(!a&&t==="replace-"+r.SNG_ID){var o=pn.a.call({method:"search.music",data:{QUERY:'artist:"'+r.ART_NAME+'" track:"'+r.SNG_TITLE+'"',FILTER:0,OUTPUT:"TRACK",NB:5,COUNTRY:An.a.get("COUNTRY")},success:function(e){n.setState({results:e.data})}});this._apiCallRefs.push(o)}},t}(an.Component);Pr.contextTypes={id:nn.a.oneOfType([nn.a.number,nn.a.string]).isRequired,name:nn.a.string.isRequired};var kr=Pr,Ar=rn.a.createElement("button",{className:"datagrid-action",type:"button"},rn.a.createElement(Mn.a,{name:"replace",size:"14"})),xr=function(e){function t(){return vt(this,t),Et(this,e.apply(this,arguments))}return Ot(t,e),t.prototype.render=function(){var e=this.props.item;if(Object(gn.q)(e))return null;var t={track:e,anchor:Ar};return rn.a.createElement("div",{className:"datagrid-cell datagrid-cell-hover datagrid-cell-action"},rn.a.createElement(Ln.a,{text:Object(un.a)("Remplacer")},rn.a.createElement(kr,t)))},t}(an.Component),Dr=rn.a.createElement(Mn.a,{name:"link"}),Rr=function(e){function t(n){Tt(this,t);var a=wt(this,e.call(this,n));return a._onPlayerTypeChange=a._onPlayerTypeChange.bind(a),a._onFavoriteChange=a._onFavoriteChange.bind(a),a._play=a._play.bind(a),a.state={isRadio:bn.a.isRadio(),isFavorite:Tn.a.isFavorite("song",Object(gn.e)(n.item))},a}return Nt(t,e),t.prototype.componentDidMount=function(){cn.a.subscribe(cn.a.player.changePlayerType,this._onPlayerTypeChange),cn.a.ready(cn.a.user.userReady,this._onFavoriteChange),cn.a.subscribe(cn.a.user.addFavorite,this._onFavoriteChange),cn.a.subscribe(cn.a.user.deleteFavorite,this._onFavoriteChange)},t.prototype.shouldComponentUpdate=function(e,t){var n=Object(gn.e)(this.props.item),a=Object(gn.e)(e.item);return n!==a||e.item.SNG_TITLE!==this.props.item.SNG_TITLE||e.active!==this.props.active||t.isFavorite!==this.state.isFavorite||t.isRadio!==this.state.isRadio||this.context.itemsStore.hasDisplayedContributors(n)!==this.context.itemsStore.hasDisplayedContributors(a)},t.prototype.componentWillUnmount=function(){pn.a.cancel(this._apiCallRef),cn.a.unsubscribe(cn.a.player.changePlayerType,this._onPlayerTypeChange),cn.a.unsubscribe(cn.a.user.addFavorite,this._onFavoriteChange),cn.a.unsubscribe(cn.a.user.deleteFavorite,this._onFavoriteChange)},t.prototype.render=function(){return rn.a.createElement("div",{className:"datagrid-cell cell-title"},rn.a.createElement("div",{className:"ellipsis"},this._renderTitle(),this._renderMultiArtist()))},t.prototype._renderTitle=function(){var e=this._getTitle(),t=this.props,n=t.options,a=t.active;return n.isRadio&&!a?e:rn.a.createElement("a",{className:"datagrid-label datagrid-label-main title",tabIndex:"0",onClick:this._play,role:"button",onKeyDown:this._play},e)},t.prototype._renderLink=function(){var e=this.props,t=e.item,n=e.options;return void 0===t.FALLBACK||!0!==n.fallback?null:rn.a.createElement("li",null,rn.a.createElement(Ln.a,{text:Object(un.a)("Afficher la source de ce titre")},rn.a.createElement(Pa.a,{to:"/album/"+t.FALLBACK.ALB_ID,"aria-label":Object(un.a)("Afficher la source de ce titre")},Dr)))},t.prototype._renderMultiArtist=function(){var e=this.props,t=e.item;if(!e.options.multiArtist||!Array.isArray(t.MULTI_ARTIST)||0===t.MULTI_ARTIST.length)return null;var n=t.MULTI_ARTIST.map(function(e,t,n){if(0===Number(e.ROLE_ID)||5===Number(e.ROLE_ID)){var a=t===n.length-1?"":", ";return[rn.a.createElement(Pa.a,{key:e.ART_ID,className:"datagrid-label-sub",to:"/artist/"+e.ART_ID},e.ART_NAME),a]}return[]});return rn.a.createElement("span",{className:"datagrid-label-artist"},n)},t.prototype._onPlayerTypeChange=function(){this.setState({isRadio:bn.a.isRadio()})},t.prototype._onFavoriteChange=function(e,t){var n=Number(Object(gn.e)(this.props.item));t&&("song"!==t.type||Number(t.id)!==n)||"loved"===this.props.type||"personalLoved"===this.props.type||this.setState({isFavorite:Tn.a.isFavorite("song",n)})},t.prototype._play=function(e){if(void 0===e.keyCode||13===e.keyCode){var t=this.props,n=t.item,a=t.type,r=t.index;!1!==Object(gn.q)(n)&&(Object(gn.p)(n,this.context.name)?bn.a.control.togglePause():Object(gn.s)(a)?bn.a.playTrackAtIndex(r):bn.a.play(Object(gn.i)(this.props,this.context)))}},t.prototype._getTitle=function(){var e=[],t=this.props.item;return void 0!==t.SNG_CONTRIBUTORS&&void 0!==t.SNG_CONTRIBUTORS.abbreviated_composer&&""!==t.SNG_CONTRIBUTORS.abbreviated_composer&&e.push(t.SNG_CONTRIBUTORS.abbreviated_composer),e.push(t.SNG_TITLE),e=e.join(" | "),"string"==typeof t.VERSION&&""!==t.VERSION&&(e+=" "+t.VERSION),e},t.prototype._toggleContributors=function(e){e.preventDefault(),this.context.itemsStore.toggleContributors(Object(gn.e)(this.props.item))},t.prototype._getContext=function(e){switch(e){case"discography":case"topArtist":return"artist";case"personalPlaylist":return"playlist";default:return e}},t}(an.Component);Rr.contextTypes={id:nn.a.oneOfType([nn.a.number,nn.a.string]).isRequired,name:nn.a.string.isRequired,itemsStore:nn.a.object.isRequired},Rr.getLabel=function(){return Object(un.a)("Titre")},Rr.className="cell-title",Rr.sort=function(e,t){return e.SNG_TITLE.toLowerCase()<t.SNG_TITLE.toLowerCase()?-1:1},Rr.filter=function(e,t){return-1!==Qn(t.SNG_TITLE.toLowerCase()).indexOf(e)};var Ir=Rr,Lr=function(e){function t(){return Ct(this,t),Pt(this,e.apply(this,arguments))}return kt(t,e),t.prototype.shouldComponentUpdate=function(e){return this.props.item.VARIATION!==e.VARIATION},t.prototype.render=function(){var e=this.props.item.VARIATION,t=Number(e)||0,n="eq",a="arrow-right";return t>0&&(n="up",a="arrow-up"),t<0&&(n="down",a="arrow-down"),rn.a.createElement("div",{className:"datagrid-cell datagrid-cell-action"},rn.a.createElement(Mn.a,{className:"datagrid-variation-"+n,name:a,size:"12"}))},t}(an.Component);Lr.className="datagrid-cell datagrid-cell-action",Lr.sort=function(e,t){return e=Number(e.VARIATION)||.5,(t=Number(t.VARIATION)||.5)-e};var Mr=Lr,Fr=rn.a.createElement(Mn.a,{name:"link",size:"14"}),Ur=function(e){function t(){return xt(this,t),Dt(this,e.apply(this,arguments))}return Rt(t,e),t.prototype.render=function(){var e=this.props.item;return e.hasFallback()?rn.a.createElement("div",{className:"datagrid-cell datagrid-cell-hover datagrid-cell-action"},rn.a.createElement(Ln.a,{text:Object(un.a)("Afficher la source de ce titre")},rn.a.createElement(Pa.a,{className:"datagrid-action",to:"/album/"+e.FALLBACK.ALB_ID},Fr))):null},t}(an.Component),Br=rn.a.createElement(Mn.a,{name:"share",size:"14"}),Hr={AddToPlaylist:wa,AddDate:Ca,Album:Aa,Artist:Da,Checkbox:Ma,ContextMenu:Ua,Download:Ha,Duration:za,EditMp3:Ya,EpisodeAdd:Ka,EpisodeHeard:$a,EpisodeInformation:er,EpisodeReleaseDate:nr,EpisodeTitle:rr,ChapterTitle:ir,Love:cr,Lyrics:dr,Play:_r,Popularity:Er,RemoveFromQueueList:jr,Replace:xr,Title:Ir,Variation:Mr,FallbackLink:Ur,Share:function(e){function t(n){Lt(this,t);var a=Mt(this,e.call(this,n));return a._onShare=a._onShare.bind(a),a}return Ft(t,e),t.prototype.render=function(){var e=this.props.item;return Object(gn.q)(e)?rn.a.createElement("div",{className:"datagrid-cell datagrid-cell-hover datagrid-cell-action"},rn.a.createElement(Ln.a,{text:Object(un.a)("Partager")},rn.a.createElement("button",{className:"datagrid-action",onClick:this._onShare},Br))):null},t.prototype._onShare=function(){var e=this.props.item;window.sharebox.load(Object(Na.r)(e.__TYPE__),Object(Na.o)(e))},t}(an.Component)},Gr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},zr=function(e){function t(n,a){Bt(this,t);var r=Ht(this,e.call(this,n,a));return r._onPlay=r._onPlay.bind(r),r._onPause=r._onPause.bind(r),r._updateTrack=r._updateTrack.bind(r),r._onPlaying=r._onPlaying.bind(r),r._play=r._play.bind(r),r._contextMenu=r._contextMenu.bind(r),r.state={trackActive:Object(gn.p)(n.item,a.name),trackPaused:r._isTrackPaused(n.item,a.name)},r}return Gt(t,e),t.prototype.componentDidMount=function(){cn.a.subscribe(cn.a.player.play,this._onPlay),cn.a.subscribe(cn.a.player.paused,this._onPause),cn.a.subscribe(cn.a.player.playerLoaded,this._updateTrack),cn.a.subscribe(cn.a.player.updateCurrentTrack,this._updateTrack),cn.a.subscribe(cn.a.player.playing,this._onPlaying)},t.prototype.componentWillReceiveProps=function(e){this.setState({trackActive:Object(gn.p)(e.item,this.context.name),trackPaused:this._isTrackPaused(e.item,this.context.name)})},t.prototype.shouldComponentUpdate=function(e,t){return this.props.index!==e.index||this.props.filter!==e.filter||this.props.sortCell!==e.sortCell||this.props.sortOrder!==e.sortOrder||this.state.trackActive!==t.trackActive||this.state.trackPaused!==t.trackPaused||this.props.draggable!==e.draggable||this.props.item.ART_NAME!==e.item.ART_NAME||this.props.item.ALB_TITLE!==e.item.ALB_TITLE||this.props.item.SNG_TITLE!==e.item.SNG_TITLE||this.props.item.title!==e.item.title},t.prototype.componentWillUnmount=function(){cn.a.unsubscribe(cn.a.player.play,this._onPlay),cn.a.unsubscribe(cn.a.player.paused,this._onPause),cn.a.unsubscribe(cn.a.player.playerLoaded,this._updateTrack),cn.a.unsubscribe(cn.a.player.updateCurrentTrack,this._updateTrack),cn.a.unsubscribe(cn.a.player.playing,this._onPlaying)},t.prototype.render=function(){var e=this,t=this.props,n=t.type,a=t.item,r=t.items,o=t.options,i=t.filter,s=t.sortCell,l=t.index,c=t.draggable,p=t.onDragStart,u=t.onDrop,d=t.onDragOver,f=t.onDragEnd,h=this.state,m=h.trackActive,y=h.trackPaused,b=Object(gn.e)(Object(gn.c)(a)),g=Object(gn.g)(a),_=On()("datagrid-row",{song:n!==aa.a.TalkShow,show:n===aa.a.TalkShow,unavailable:!Object(gn.q)(a)&&!o.isRadio,active:m,paused:y,unseen:o.unseen&&Object(gn.r)(a,this.context.lastSeen),soon:!Object(gn.t)(a),new:("chartsPlaylist"===n||"curatedChartsPlaylist"===n)&&void 0===a.VARIATION}),v=o.cells.map(function(t){return e._renderCell(t,{type:n,item:a,items:r,options:o,filter:i,sortCell:s,index:l,active:m})}),E=rn.a.createElement("div",{className:_,key:"item-"+b,"data-key":b,draggable:c,onDoubleClick:this._play,onDragStart:p,onDrop:u,onDragOver:d,onDragEnd:f},v);return""===g||o.isRadio?E:rn.a.createElement(Ln.a,{text:g,relativeTo:".title"},E)},t.prototype._renderCell=function(e,t){return void 0===Hr[e]?rn.a.createElement("div",{key:e,className:"datagrid-cell cell-action"}):rn.a.createFactory(Hr[e])(Gr({key:e},t))},t.prototype._onPlay=function(){var e=Object(gn.p)(this.props.item,this.context.name);this.state.trackActive===e&&!1===this.state.trackPaused||this.setState({trackActive:e,trackPaused:!1})},t.prototype._onPause=function(){var e=this._isTrackPaused(this.props.item,this.context.name);this.state.trackPaused!==e&&this.setState({trackPaused:e})},t.prototype._onPlaying=function(){this.setState({trackPaused:this._isTrackPaused(this.props.item,this.context.name)})},t.prototype._updateTrack=function(){var e=Object(gn.p)(this.props.item,this.context.name),t=this._isTrackPaused(this.props.item,this.context.name);this.state.trackActive===e&&this.state.trackPaused===t||this.setState({trackActive:e,trackPaused:t})},t.prototype._play=function(e){e.preventDefault();var t=this.props,n=t.item,a=t.items,r=t.type,o=t.index,i=t.options;if(!1!==Object(gn.q)(n)&&!i.isRadio)if(Object(gn.p)(n,this.context.name))bn.a.control.togglePause();else{if(Oa.a.isCasting()){var s=Object(gn.f)(n,a)%Oa.a.getQueueMaxItems(),l=bn.a.getTrackList()[s];if(l&&String(l.SNG_ID||l.EPISODE_ID)===String(n.SNG_ID||n.EPISODE_ID))return void Oa.a.executeAction("playAtIndex",[s])}Object(gn.s)(r)?bn.a.playTrackAtIndex(o):bn.a.play(Object(gn.i)(this.props,this.context))}},t.prototype._contextMenu=function(e){e.preventDefault();var t=this.props,n=t.type,a=t.item,r=void 0;switch(n){case"discography":case"topArtist":r="artist";break;case"personalPlaylist":r="playlist";break;default:r=n}cn.a.trigger(cn.a.menu.contextMenuRightClickOpen,{style:{left:e.pageX+1,top:e.pageY+1},data:{SONG:a,PLAYLIST_ID:"playlist"===r?this.context.id:0,PLAYLIST_PERSONNAL:"personalPlaylist"===n},id:Number(a.SNG_ID),context:r,listenContext:{TYPE:Object(gn.b)(n),ID:this.context.id},isRadio:bn.a.isRadio(),isFavorite:Tn.a.isFavorite("song",Number(a.SNG_ID))})},t.prototype._isTrackPaused=function(e,t){return Object(gn.p)(e,t)&&!bn.a.isPlaying()},t}(an.Component);zr.contextTypes={id:nn.a.oneOfType([nn.a.number,nn.a.string]),name:nn.a.string,lastSeen:nn.a.number};var qr=zr,Yr=function(e){function t(){var n,a,r;qt(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=a=Yt(this,e.call.apply(e,[this].concat(i))),a.defaultImage="https://"+An.a.get("host_img_url_ssl")+"/cover/d41d8cd98f00b204e9800998ecf8427e/30x30-000000-80-0-0.jpg",r=n,Yt(a,r)}return Wt(t,e),t.prototype.render=function(){var e=this.props.items;return e?1===e.length?this._renderDragImageSingle():this._renderDragImageMultiple():this._renderPlaceholder()},t.prototype._renderPlaceholder=function(){return rn.a.createElement("div",{className:"datagrid-ghost",id:"naboo_datagrid_ghost_single","aria-grabbed":this.props.isDragging,"aria-dropeffect":this.props.isDragging?"move":"none"},rn.a.createElement("img",{className:"picture",src:this.defaultImage}))},t.prototype._renderDragImageSingle=function(){var e=this.props.items[0],t=e.RANK_SNG/1e5;return rn.a.createElement("div",{className:"datagrid-ghost",id:"naboo_datagrid_ghost_single","aria-grabbed":this.props.isDragging,"aria-dropeffect":this.props.isDragging?"move":"none"},rn.a.createElement("div",{className:"wrapper-table"},rn.a.createElement("span",{className:"cell cell-thumbnail"},rn.a.createElement("figure",{className:"thumbnail thumbnail-bordered"},rn.a.createElement("img",{className:"picture",src:this.defaultImage}))),rn.a.createElement("span",{className:"cell cell-track"},rn.a.createElement("div",{className:"ellipsis"},rn.a.createElement("strong",null,e.SNG_TITLE)),rn.a.createElement("div",{className:"ellipsis"},e.ALB_TITLE)),rn.a.createElement("span",{className:"cell cell-length"},Object(Na.E)(e.DURATION)),rn.a.createElement("span",{className:"cell cell-popularity"},rn.a.createElement("span",{className:"note note-"+Math.round(t)}))))},t.prototype._renderDragImageMultiple=function(){var e=this.props.items.length,t=Object(un.c)("%s titre","%s titres",{sprintf:[e],count:e});return rn.a.createElement("div",{className:"datagrid-ghost multiple",id:"naboo_datagrid_ghost_multi","aria-grabbed":this.props.isDragging,"aria-dropeffect":this.props.isDragging?"move":"none"},rn.a.createElement("div",{className:"wrapper-table"},rn.a.createElement("span",{className:"cell cell-thumbnail"},rn.a.createElement("figure",{className:"thumbnail thumbnail-bordered"},rn.a.createElement("img",{className:"picture",src:this.defaultImage}))),rn.a.createElement("span",{className:"cell"},rn.a.createElement("strong",null,t))))},t}(an.Component);Yr.defaultProps={items:null,isDragging:!1};var Wr=Yr,Vr=rn.a.createElement("div",{key:"divider",className:"datagrid-drag-divider"}),Kr=rn.a.createElement("div",{key:"divider",className:"datagrid-drag-divider"}),Qr=rn.a.createElement("span",{className:"btn btn-primary btn-icon"},rn.a.createElement(Mn.a,{name:"add"})),Xr=function(e){function t(n,a){Kt(this,t);var r=Qt(this,e.call(this,n,a));r.defaultOptions={availableOnly:!1,cdNumber:!1,changeOrder:!1,cells:["Play","Love","Title","Artist","Album","Duration"],isRadio:!1,header:!1,toolbar:!1,contributors:!1,cover:!1,fallback:!1,infiniteScroll:!1,fillerHeight:!1,multiArtist:!1,sorterStorageKey:"",trackNumber:!1,trackIndex:!1,unseen:!1},r.defaultToolbarOptions={playAll:!1,favorite:!1,shareType:!1,contextMenu:!1,playlistAssistant:!1,upload:!1,edit:!1,filter:!1,sorter:!1,download:!1},r.defaultHeaderOptions={sorter:!1,add:!1,remove:!1,download:!1},r.fillerHeight=0,r._apiCallRefs=[],r._filteredItems=[],r._dragDebounce=0,r._onAddFavorite=r._onAddFavorite.bind(r),r._onRemoveFavorite=r._onRemoveFavorite.bind(r),r._onUpdateFavorite=r._onUpdateFavorite.bind(r),r._onAddPersonalSong=r._onAddPersonalSong.bind(r),r._onUpdatePersonalSong=r._onUpdatePersonalSong.bind(r),r._onAddSong=r._onAddSong.bind(r),r._onRemoveSong=r._onRemoveSong.bind(r),r._onUpdateSong=r._onUpdateSong.bind(r),r._onPlaylistAssistantClick=r._onPlaylistAssistantClick.bind(r),r._onSendPersonalSong=r._onSendPersonalSong.bind(r),r._onSort=r._onSort.bind(r),r._onFilter=r._onFilter.bind(r),r._drop=r._drop.bind(r),r._dragOver=r._dragOver.bind(r),r._dragEnd=r._dragEnd.bind(r);var o=fn.a.hydrate(n.items),i=o.map(function(e){return Object(gn.e)(e)});r._store=(new yn).fill(i);var s=r._getOptions(n.options,n.type),l=Object(gn.k)(a.id||n.id,s.sorterStorageKey),c=l.cell,p=l.order;return r.state={id:n.id||a&&a.id,type:n.type,items:o,options:s,sortCell:c,sortOrder:p,filter:"",dragItems:null,dragDivider:null,isDragging:!1},r}return Xt(t,e),t.prototype.getChildContext=function(){return{id:this.props.id||this.context&&this.context.id,name:this.props.context||this.context&&this.context.name||Object(gn.b)(this.props.type),itemsStore:this._store,type:this.props.type}},t.prototype.componentWillMount=function(){this._filteredItems=this._filterItems(this.state.items,this.state.filter),this._filteredItems=this._sortItems(this._filteredItems,this.state.sortCell,this.state.sortOrder)},t.prototype.componentDidMount=function(){cn.a.subscribe(cn.a.user.addFavorite,this._onAddFavorite),cn.a.subscribe(cn.a.user.deleteFavorite,this._onRemoveFavorite),cn.a.subscribe(cn.a.user.updateFavorite,this._onUpdateFavorite),cn.a.subscribe(cn.a.user.sendPersonalSong,this._onSendPersonalSong),cn.a.subscribe(cn.a.user.addPersonalSong,this._onAddPersonalSong),cn.a.subscribe(cn.a.user.updatePersonalSong,this._onUpdatePersonalSong),cn.a.subscribe(cn.a.playlist.addSong,this._onAddSong),cn.a.subscribe(cn.a.playlist.removeSong,this._onRemoveSong),cn.a.subscribe(cn.a.playlist.updateSong,this._onUpdateSong),cn.a.subscribe(cn.a.player.tracklist_changed,this._onRemoveSong),!0===this.state.options.infiniteScroll&&this.forceUpdate()},t.prototype.componentWillReceiveProps=function(e,t){var n=fn.a.hydrate(e.items),a=n.map(function(e){return Object(gn.e)(e)}),r=e.id||t&&t.id,o=this._getOptions(e.options,e.type),i=Object(gn.k)(r,o.sorterStorageKey),s=i.cell,l=i.order;r!==this.state.id&&this._store.reset(),this._store.fill(a),this.setState({id:r,type:e.type,items:this.state.id!==r||this.props.type!==e.type||Object(gn.s)(e.type)||Object(gn.o)(e.type)?n:this.state.items,options:o,sortCell:s,sortOrder:l,filter:"",context:e.context||t&&t.name||Object(gn.b)(this.props.type)})},t.prototype.componentWillUpdate=function(e,t){this._filteredItems=this._filterItems(t.items,t.filter),this._filteredItems=this._sortItems(this._filteredItems,t.sortCell,t.sortOrder),!0===t.options.infiniteScroll&&!0===t.options.fillerHeight&&(this.fillerHeight=this._getFillerHeight(e.scrollingContainer))},t.prototype.componentWillUnmount=function(){this._apiCallRefs.forEach(pn.a.cancel),cn.a.unsubscribe(cn.a.user.addFavorite,this._onAddFavorite),cn.a.unsubscribe(cn.a.user.deleteFavorite,this._onRemoveFavorite),cn.a.unsubscribe(cn.a.user.updateFavorite,this._onUpdateFavorite),cn.a.unsubscribe(cn.a.user.sendPersonalSong,this._onSendPersonalSong),cn.a.unsubscribe(cn.a.user.addPersonalSong,this._onAddPersonalSong),cn.a.unsubscribe(cn.a.user.updatePersonalSong,this._onUpdatePersonalSong),cn.a.unsubscribe(cn.a.playlist.addSong,this._onAddSong),cn.a.unsubscribe(cn.a.playlist.removeSong,this._onRemoveSong),cn.a.unsubscribe(cn.a.playlist.updateSong,this._onUpdateSong),cn.a.unsubscribe(cn.a.player.tracklist_changed,this._onRemoveSong)},t.prototype.addItems=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=function(a){if("number"!=typeof a.count||a.count===e.length){a=a.data||a,e=a.map(function(e){return void 0===e.DATE_ADD&&(e.DATE_ADD=Number(Date.now()/1e3)),e}),e=fn.a.hydrate(e);var r=(e=n?e.concat(t.state.items):t.state.items.concat(e)).map(function(e){return Object(gn.e)(e)});t._store.fill(r),t.setState({items:e}),cn.a.trigger(cn.a.datagrid.addedItems,{items:e})}};if("number"!=typeof(e=Array.isArray(e)?e:[e])[0])a(e);else{e=e.map(function(e){return[e,0]});var r=pn.a.call({method:"song.getListAllData",data:{sng_ids:e},success:a});this._apiCallRefs.push(r)}},t.prototype.removeItems=function(e){e=Array.isArray(e)?e:[e],e=e.map(function(e){return Number(Array.isArray(e)?e[0]:e)}),e=this.state.items.filter(function(t){return-1===e.indexOf(Number(t.SNG_ID))}),this.setState({items:e})},t.prototype.updateItem=function(e,t){for(var n=this.state.items.slice(0),a=0,r=n.length;a<r;a++)if(Number(n[a].SNG_ID)===e){n[a]=Object.assign({},n[a],t);break}this.setState({items:fn.a.hydrate(n)},this._forceListUpdate)},t.prototype.render=function(){return rn.a.createElement("div",{className:"datagrid-container"},this._renderToolbar(this._filteredItems),this.props.caption?rn.a.createElement("span",{className:"hide sr-only"},this.props.caption):null,rn.a.createElement("div",{ref:"datagrid",className:"datagrid"},this._renderHeader(this._filteredItems),this._renderBody(this._filteredItems)),this._renderDragImage())},t.prototype._renderToolbar=function(e){var t=this.props,n=t.onLoadAll,a=t.pageData,r=this.state,o=r.options,i=r.id,s=r.type,l=r.filter,c=r.sortOrder,p=r.sortCell;return!1===o.toolbar?null:rn.a.createElement(ca,{id:Number(i),type:s,data:a,items:e,options:o,onFilter:this._onFilter,filter:l,sortOrder:c,sortCell:p,onSort:this._onSort,onUpload:function(){return n()}})},t.prototype._renderHeader=function(e){var t=this.props,n=t.type,a=t.pageData,r=this.state,o=r.options,i=r.sortOrder,s=r.sortCell;return o.header?rn.a.createElement(Ea,{cells:Hr,nbTracks:a.NB_SONG,items:e,options:o,sortOrder:i,sortCell:s,onSort:this._onSort,type:n}):null},t.prototype._renderBody=function(e){return!1===this.state.options.infiniteScroll?this._renderLines(e):rn.a.createElement(Pn,{ref:"list",containerType:"div",spacerType:"div",elementHeight:gn.u},this._renderLines(e))},t.prototype._renderLines=function(e){var t=[],n=void 0,a=void 0,r=void 0,o=void 0,i=void 0,s=void 0,l=void 0,c=void 0,p=[],u=this.state,d=u.options,f=u.sortCell,h=u.dragDivider,m=u.type,y=u.filter,b=u.sortOrder;d.changeOrder&&null===f&&(r=!0,i=this._drop,s=this._dragOver,l=this._dragEnd);for(var g=0,_=e.length;g<_;++g)n=Object(gn.c)(e[g]),a=Object(gn.e)(n),!0===d.availableOnly&&!1===Object(gn.q)(e[g])||(h&&h[0]===a&&"before"===h[1]&&t.push(Vr),d.changeOrder&&null===f&&(o=this._dragStart.bind(this,e[g])),d.cdNumber&&n.DISK_NUMBER!==c&&null===f&&(p.push(g),c=n.DISK_NUMBER),t.push(rn.a.createElement(qr,{type:m,items:e,item:e[g],filter:y,sortCell:f,sortOrder:b,options:d,index:r?g:e[g].SONG_RANK||g,draggable:r,onDragStart:o,onDrop:i,onDragOver:s,onDragEnd:l,key:Object(gn.h)(e[g])})),h&&h[0]===a&&"after"===h[1]&&t.push(Kr));return d.cdNumber&&p.length>1&&p.forEach(function(e,n){var a=String(n+1),r=e+n;t.splice(r,0,rn.a.createElement("div",{className:"datagrid-divider",key:"cd-"+a},rn.a.createElement("div",{className:"datagrid-row"},"CD ",a)))}),!1===d.infiniteScroll?t:(this.fillerHeight>0&&t.push(rn.a.createElement("div",{key:"filler",style:{height:this.fillerHeight}})),t)},t.prototype._renderDragImage=function(){var e=this.state,t=e.dragItems,n=e.isDragging;return rn.a.createElement(Wr,{ref:"dragImage",items:t,isDragging:n})},t.prototype._renderGridContextMenu=function(){return rn.a.createElement(Sn,{id:"grid_context_"+this.props.id})},t.prototype._renderPlaylistAssistant=function(){return!1===hn.a.isAllowed("playlist_assistant")?null:!1===this.state.options.playlistAssistant||0!==this.state.items.length||0===this.props.userID?null:this.fillerHeight<50?null:rn.a.createElement("button",{className:"btn datagrid-empty-add-track",type:"button",onClick:this._onPlaylistAssistantClick},Qr,rn.a.createElement("span",{className:"label"},Object(un.a)("Me suggérer des titres")))},t.prototype._onSort=function(e,t){if(null===e||void 0!==Hr[e]&&"function"==typeof Hr[e].sort){var n=this._updateSort.bind(this,e,t);"function"!=typeof this.props.onLoadAll?setTimeout(n,0):this.props.onLoadAll(n)}},t.prototype._onFilter=function(e){var t=this._updateFilter.bind(this,e);"function"!=typeof this.props.onLoadAll?setTimeout(t,0):this.props.onLoadAll(t)},t.prototype._onAddSong=function(e,t){if(this.state.id===Number(t.playlist_id)&&-1!==["personalPlaylist","collaborativePlaylist"].indexOf(this.props.type)){var n=t.song.map(function(e){return Number(Array.isArray(e)?e[0]:e)});this.addItems(n,hn.a.isAllowed("curator_local"))}},t.prototype._onRemoveSong=function(e,t){var n=this.props.type,a=["personalPlaylist","personalSong"].indexOf(n)>-1;("PLAYLIST.removeSong"!==e.namespace||a&&this.state.id===Number(t.playlist_id))&&"PLAYER.tracklist_changed"!==e.namespace&&this.removeItems(t.song)},t.prototype._onUpdateSong=function(e,t){this.state.id===Number(t.playlist_id)&&-1!==["personalPlaylist","personalSong"].indexOf(this.props.type)&&this.updateItem(t.id,t.item)},t.prototype._onAddFavorite=function(e,t){this.state.id===this.props.userID&&"loved"===this.props.type&&"personalLoved"===this.props.type&&"song"===t.type&&this.addItems(Number(t.id))},t.prototype._onRemoveFavorite=function(e,t){this.state.id===this.props.userID&&"loved"===this.props.type&&"personalLoved"===this.props.type&&this.removeItems(Number(t.id))},t.prototype._onUpdateFavorite=function(e,t){this.state.id===this.props.userID&&"loved"===this.props.type&&"personalLoved"===this.props.type&&this.updateItem(t.id,t.item)},t.prototype._onAddPersonalSong=function(e,t){this.state.id===this.props.userID&&"personalSong"===this.props.type&&this.addItems(Number(t))},t.prototype._onUpdatePersonalSong=function(e,t){this.state.id===this.props.userID&&"personalSong"===this.props.type&&this.updateItem(t.id,t.item)},t.prototype._onSendPersonalSong=function(e,t){this.addItems(t.sng_id)},t.prototype._onPlaylistAssistantClick=function(){dn.a.open("/lightbox/playlist_assistant?type=add_song&playlist_id="+this.context.id)},t.prototype._forceListUpdate=function(){void 0!==this.refs&&void 0!==this.refs.list&&this.refs.list.forceUpdate()},t.prototype._getOptions=function(e,t){e=e||{};var n={},a=void 0,r=void 0;for(var o in this.defaultOptions)this.defaultOptions.hasOwnProperty(o)&&(a=e[o],r=vn.a[t]&&vn.a[t][o],n[o]=void 0!==a?a:void 0!==r?r:this.defaultOptions[o]);return!1!==n.toolbar&&(n.toolbar=Object.assign({},this.defaultToolbarOptions,n.toolbar)),!1!==n.header&&(n.header=Object.assign({},this.defaultHeaderOptions,n.header)),n},t.prototype._updateSort=function(e,t){var n=this.state,a=n.sortCell,r=n.sortOrder,o=n.options;if(void 0===t)switch(a===e&&r){case"asc":t="desc";break;case"desc":t=void 0,e=null;break;default:t="asc"}Object(gn.w)(this.context.id||this.props.id,o.sorterStorageKey,{cell:e,order:t}),r===t&&a===e||this.setState({sortOrder:t,sortCell:e},this._forceListUpdate)},t.prototype._updateFilter=function(e){this.state.filter!==e&&this.setState({filter:e},this._forceListUpdate)},t.prototype._sortItems=function(e,t,n){return void 0===Hr[t]||"function"!=typeof Hr[t].sort?e:((e=e.slice()).sort(Hr[t].sort),"asc"===n?e:e.reverse())},t.prototype._filterItems=function(e,t){var n=this;if(""===t)return e;if(!this._filterFuncs){this._filterFuncs=[];for(var a in Hr)Hr.hasOwnProperty(a)&&void 0!==Hr[a].filter&&this._filterFuncs.push(Hr[a].filter)}return e.filter(function(e){return n._filterFuncs.some(function(n){return n(t,e)})})},t.prototype._getFillerHeight=function(e){var t=e?e.offsetHeight:window.innerHeight,n=this.refs.datagrid.getBoundingClientRect().top,a=gn.x+gn.m+this._filteredItems.length*gn.u;return Math.max(0,t-n-a)},t.prototype._dragStart=function(e,t){var n=this.state.items,a=void 0,r=[];this._store.select(Object(gn.e)(e));for(var o=0,i=n.length;o<i;o++)a=Object(gn.e)(n[o]),this._store.isSelected(a)&&r.push(n[o]);if(Object(gn.s)(this.props.type)&&r.length>1)return this._store.unselectAll(),void t.preventDefault();this.setState({dragItems:r,isDragging:!0}),t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text",""),"setDragImage"in t.dataTransfer&&t.dataTransfer.setDragImage(sn.a.findDOMNode(this.refs.dragImage),-10,-10)},t.prototype._drop=function(){var e=void 0,t=void 0,n=this.state.items.slice(0),a=0,r=!1,o=!1,i=this.state,s=i.dragDivider,l=i.dragItems;for(Object(gn.f)(Object(gn.d)(s[0],n),n)<Object(gn.f)(l[0],n)?o=!0:r=!0,e=0,t=l.length;e<t;e++){var c=this._getIndexes(l[e],s);this._moveItem(n,c.src+(r?a--:0),c.dest+(o?a++:0))}var p=[];for(e=0,t=n.length;e<t;e++)p.push(Object(gn.e)(n[e]));var u=void 0;switch(this.props.type){case"personalPlaylist":case"collaborativePlaylist":u=pn.a.call({method:"playlist.updateOrder",data:{playlist_id:this.context.id,position:"0",order:p}});break;case"personalLoved":u=pn.a.call({method:"favorite_song.updateOrder",data:{position:"0",order:p}});break;case"queuelist":bn.a.orderTracks(p)}this._apiCallRefs.push(u),this.setState({items:n},this._forceListUpdate),this._cleanAfterDrag()},t.prototype._dragEnd=function(){this._cleanAfterDrag()},t.prototype._dragOver=function(e){e.preventDefault();var t=Date.now();if(!(t-this._dragDebounce<150)){this._dragDebounce=t;var n=this.state.dragDivider,a=Number(e.currentTarget.getAttribute("data-key")),r=e.currentTarget.getBoundingClientRect(),o=e.clientY-r.top<gn.u/2?"before":"after";n&&a===n[0]&&o===n[1]||this.setState({dragDivider:[a,o]},this._forceListUpdate)}},t.prototype._cleanAfterDrag=function(){var e=this.state,t=e.dragDivider,n=e.items;if(null!==t){var a=void 0,r=void 0,o=void 0;for(a=0,r=n.length;a<r;a++)o=Object(gn.e)(n[a]),this._store.unselect(o);this.setState({dragItems:null,dragDivider:null,isDragging:!1},this._forceListUpdate)}},t.prototype._getIndexes=function(e,t){var n=void 0,a=void 0,r=void 0,o=void 0,i=void 0,s=Object(gn.e)(Object(gn.c)(e)),l=t[0],c=t[1],p=this.state.items;for(n=0,a=p.length;n<a&&(r=Object(gn.e)(Object(gn.c)(p[n])),s===r&&(o=n),l===r&&(i=n),!o||!i);n++);return o<i&&"before"===c?i-=1:o>i&&"after"===c&&(i+=1),{src:o,dest:i}},t.prototype._moveItem=function(e,t,n){var a=void 0,r=e[t];if(t<n)for(a=t;a<n;a++)e[a]=e[a+1];else for(a=t;a>n;a--)e[a]=e[a-1];e[n]=r},t}(an.Component);Xr.contextTypes={id:nn.a.oneOfType([nn.a.number,nn.a.string]),name:nn.a.string},Xr.childContextTypes={id:nn.a.oneOfType([nn.a.number,nn.a.string]),name:nn.a.string,itemsStore:nn.a.object,type:nn.a.string},Xr.defaultProps={id:0,context:void 0,caption:void 0,options:void 0,scrollingContainer:void 0,onLoadAll:void 0,pageData:{}};var $r=Object(ln.b)(function(e){return{userID:e.user.id}},null,null,{withRef:!0})(Xr),Jr=n("./js/_components/PageScroll.js"),Zr=n("./js/_modules/redux/stores/entities/playlists.js"),eo=function(e){function t(n,a){Jt(this,t);var r=Zt(this,e.call(this,n,a));return r._loadAll=r._loadAll.bind(r),r._update=r._update.bind(r),r._getData=r._getData.bind(r),r._itemsSize=n.itemsSize,r._itemsTotal=n.itemsTotal,r.state={id:n.id||a&&a.id,context:n.context||a&&a.name||Object(gn.b)(n.type),itemsNext:n.itemsNext,isLoadingAll:!1},r}return en(t,e),t.prototype.getChildContext=function(){return{id:this.state.id,name:this.state.context}},t.prototype.componentDidMount=function(){this._isFullLoaded()&&this.props.onFullLoaded(),cn.a.subscribe(cn.a.datagrid.allTracksSelected,this._loadAll)},t.prototype.componentWillReceiveProps=function(e){var t={id:e.id||this.context&&this.context.id,context:e.context||this.context&&this.context.name||Object(gn.b)(this.props.type),itemsNext:e.next||this._itemsSize};Object(gn.o)(this.props.type)&&(t.items=e.items),this.setState(t)},t.prototype.shouldComponentUpdate=function(e,t){return t.itemsNext!==this.state.itemsNext||this.props.id&&e.id&&this.props.id!==e.id||this.state.items!==t.items},t.prototype.componentWillUnmount=function(){pn.a.cancel(this._apiLoadMore),cn.a.unsubscribe(cn.a.datagrid.allTracksSelected,this._loadAll)},t.prototype.isSorted=function(){var e=Object(gn.k)(this.state.id,"topArtistFull"),t=e.cell,n=e.order;return null!==t||"string"==typeof n&&"asc"!==n},t.prototype.render=function(){var e=this.props,t=e.caption,n=e.type,a=e.pageData,r=e.items;return rn.a.createElement(Jr.a,{loadData:this._getData,start:this.state.itemsNext,total:this._itemsTotal,nb:gn.l,spacer:100,wrapperClass:""},rn.a.createElement($r,{ref:"datagrid",caption:t,type:n,pageData:a,items:r,onLoadAll:this._loadAll}))},t.prototype._getData=function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(!this._isFullLoaded())if(Object(gn.o)(this.props.type))this.props.fetchData({start:this.props.itemsSize,nb:t,id:this.state.id},a);else{var r=this._getRequestArgs(this.props.type,e,t),o=r.method,i=r.parameters;this._apiLoadMore=pn.a.call({method:o,data:i,success:function(e){n._update(e),a()}})}},t.prototype._loadAll=function(e,t){t=(t="function"==typeof e?e:t)||function(){},this._isFullLoaded()?t():this.state.isLoadingAll||(this.setState({isLoadingAll:!0}),this._getData(this.state.itemsNext,this._itemsTotal-this.state.itemsNext,t))},t.prototype._update=function(e){var t=this,n=e=e.SONGS||e.EPISODES||e,a=n.data,r=n.count,o=n.total,i=n.next,s=this.state.itemsNext;this._itemsTotal=o,0!==r&&(this._itemsSize=a.length>gn.l?o:this._itemsSize+Math.max(a.length,gn.l),this.setState({itemsNext:i||this._itemsSize},function(){t.refs.datagrid.getWrappedInstance().addItems(Object(Zr.f)(a,s)),t._isFullLoaded()&&t.props.onFullLoaded()}))},t.prototype._isFullLoaded=function(){return Object(gn.o)(this.props.type)?this.props.isFullLoaded:null!==this._itemsTotal&&this._itemsTotal<=this._itemsSize},t.prototype._getRequestArgs=function(e,t,n){var a=void 0,r=void 0;switch(e){case"loved":case"personalLoved":case"favorite":a="favorite_song.getList",r={user_id:this.state.id,start:t,nb:n};break;case"history":a="user.getSongsHistory",r={start:t,nb:n};break;case"personalSong":a="personal_song.getList",r={start:t,nb:n};break;case"search":a="search.music",r={query:this.context.id,filter:"searchTag"===this.context.searchType?"TAG":"ALL",output:"TRACK",start:t,nb:n};break;case aa.a.Audiobook:a="deezer.pageAudiobook",r={audiobook_id:this.state.id,start:this._itemsNext,nb:n};break;case"playlist":case"collaborativePlaylist":case"curatorPlaylist":case"chartsPlaylist":case"curatedChartsPlaylist":case"personalPlaylist":a="deezer.pagePlaylist",r={playlist_id:this.state.id,lang:An.a.get("SETTING_LANG"),start:t,nb:n,header:!1,tags:!1};break;case"downloads":a="store.getList",r={start:t,nb:n,order:7};break;case"topArtistFull":a="artist.getTopTrack",r={art_id:this.state.id,start:t,nb:this.isSorted()?gn.v:n};break;default:throw new Error('Items of type "'+e+'" are not handled by the DataGrid.FullPage component.')}return{method:a,parameters:r}},t}(an.Component);eo.contextTypes={id:nn.a.oneOfType([nn.a.number,nn.a.string]),name:nn.a.string,searchType:nn.a.string},eo.childContextTypes={id:nn.a.oneOfType([nn.a.number,nn.a.string]),name:nn.a.string.isRequired},eo.defaultProps={itemsTotal:gn.v,context:void 0,caption:void 0,next:void 0,pageData:{},onFullLoaded:function(){},fetchData:function(){}};var to=Object(ln.b)(function(e,t){var n=Math.max(t.items.length,Math.ceil(t.items.length/gn.l)*gn.l);return{isFullLoaded:null!==t.itemsTotal&&t.itemsTotal<=n,itemsSize:n,itemsNext:t.next||n}},{})(eo);$r.FullPage=to;t.a=$r},"./js/_components/DataGrid/presets/album.json":function(e,t){e.exports={cdNumber:!0,cells:["Play","Love","Title","AddToPlaylist","ContextMenu","FallbackLink","Lyrics","Duration","Popularity","Checkbox"],toolbar:{playAll:!0,favorite:!0,shareType:1,contextMenu:!0},header:{sorter:!0,add:!0,contextMenu:!0},multiArtist:!0,trackNumber:!0,sorterStorageKey:"album"}},"./js/_components/DataGrid/presets/audiobook.json":function(e,t){e.exports={cells:["Play","ChapterTitle","Duration"],toolbar:{playAll:!0,favorite:!0,shareType:9},trackIndex:!1,infiniteScroll:!0,fillerHeight:!0}},"./js/_components/DataGrid/presets/chartsPlaylist.json":function(e,t){e.exports={cells:["Play","Variation","Love","Title","AddToPlaylist","ContextMenu","Lyrics","Artist","Album","Duration","Checkbox"],header:{contextMenu:!0},toolbar:{playAll:!0,favorite:!0,shareType:3,contextMenu:!0,filter:!0},trackIndex:!0,unseen:!0,infiniteScroll:!0,fillerHeight:!0}},"./js/_components/DataGrid/presets/collaborativePlaylist.json":function(e,t){e.exports={changeOrder:!0,cells:["Play","Love","Title","Replace","EditMp3","AddToPlaylist","ContextMenu","Lyrics","Artist","Album","Duration","Popularity","Checkbox"],header:{sorter:!0,add:!0,contextMenu:!0,remove:!0},toolbar:{playAll:!0,favorite:!0,shareType:3,contextMenu:!0,filter:!0,sorter:!0},infiniteScroll:!0,fillerHeight:!0,trackIndex:!0,unseen:!0,sorterStorageKey:"playlist"}},"./js/_components/DataGrid/presets/curatedChartsPlaylist.json":function(e,t){e.exports={cells:["Play","Variation","Love","Title","AddToPlaylist","ContextMenu","Lyrics","Artist","Album","Duration","Checkbox"],header:{contextMenu:!0},toolbar:{playAll:!0,favorite:!0,shareType:3,contextMenu:!0,edit:!0,filter:!0},trackIndex:!0,unseen:!0,infiniteScroll:!0,fillerHeight:!0}},"./js/_components/DataGrid/presets/curatorPlaylist.json":function(e,t){e.exports={availableOnly:!0,cells:["Play","Love","Title","ContextMenu","Lyrics","Artist","Album","Duration","Popularity","Checkbox"],header:{sorter:!0,add:!0,contextMenu:!0},toolbar:{playAll:!0,favorite:!0,shareType:3,contextMenu:!0,filter:!0,sorter:!0},infiniteScroll:!0,fillerHeight:!0,unseen:!0,sorterStorageKey:"playlist"}},"./js/_components/DataGrid/presets/discographyArtist.json":function(e,t){e.exports={cells:["Play","Love","Title","AddToPlaylist","ContextMenu","Lyrics"],trackIndex:!0,trackNumber:!0}},"./js/_components/DataGrid/presets/downloads.json":function(e,t){e.exports={cells:["Play","Love","Title","AddToPlaylist","ContextMenu","Download","Lyrics","Artist","Album","Duration","Checkbox"],header:{contextMenu:!0,download:!0},toolbar:{playAll:!0,filter:!0,download:!0},infiniteScroll:!0,fillerHeight:!0,trackIndex:!0}},"./js/_components/DataGrid/presets/history.json":function(e,t){e.exports={cells:["Play","Love","Title","AddToPlaylist","ContextMenu","Lyrics","Artist","Album","Duration","Checkbox"],header:{contextMenu:!0},toolbar:{playAll:!0,filter:!0},infiniteScroll:!0,fillerHeight:!0,trackIndex:!0}},"./js/_components/DataGrid/presets/index.js":function(e,t,n){e.exports={album:n("./js/_components/DataGrid/presets/album.json"),collaborativePlaylist:n("./js/_components/DataGrid/presets/collaborativePlaylist.json"),curatorPlaylist:n("./js/_components/DataGrid/presets/curatorPlaylist.json"),chartsPlaylist:n("./js/_components/DataGrid/presets/chartsPlaylist.json"),curatedChartsPlaylist:n("./js/_components/DataGrid/presets/curatedChartsPlaylist.json"),history:n("./js/_components/DataGrid/presets/history.json"),personalSong:n("./js/_components/DataGrid/presets/personalSong.json"),loved:n("./js/_components/DataGrid/presets/loved.json"),personalLoved:n("./js/_components/DataGrid/presets/personalLoved.json"),personalPlaylist:n("./js/_components/DataGrid/presets/personalPlaylist.json"),playlist:n("./js/_components/DataGrid/presets/playlist.json"),downloads:n("./js/_components/DataGrid/presets/downloads.json"),search:n("./js/_components/DataGrid/presets/search.json"),talkShow:n("./js/_components/DataGrid/presets/talkShow.json"),talkEpisodes:n("./js/_components/DataGrid/presets/talkEpisodes.json"),discographyArtist:n("./js/_components/DataGrid/presets/discographyArtist.json"),topArtist:n("./js/_components/DataGrid/presets/topArtist.json"),topArtistFull:n("./js/_components/DataGrid/presets/topArtistFull.json"),audiobook:n("./js/_components/DataGrid/presets/audiobook.json"),queuelist:n("./js/_components/DataGrid/presets/queuelist.json"),queuelistPodcast:n("./js/_components/DataGrid/presets/queuelistPodcast.json")}},"./js/_components/DataGrid/presets/loved.json":function(e,t){e.exports={cells:["Play","Love","Title","AddToPlaylist","Lyrics","Artist","Album","Duration","AddDate","Checkbox"],header:{sorter:!0,contextMenu:!0},toolbar:{playAll:!0,filter:!0,sorter:!0},infiniteScroll:!0,fillerHeight:!0,sorterStorageKey:"loved",trackIndex:!0}},"./js/_components/DataGrid/presets/personalLoved.json":function(e,t){e.exports={changeOrder:!0,cells:["Play","Love","Title","AddToPlaylist","ContextMenu","Replace","Lyrics","Artist","Album","Duration","AddDate","Checkbox"],header:{sorter:!0,contextMenu:!0,remove:!0},toolbar:{playAll:!0,filter:!0,sorter:!0},infiniteScroll:!0,fillerHeight:!0,sorterStorageKey:"loved",trackIndex:!0}},"./js/_components/DataGrid/presets/personalPlaylist.json":function(e,t){e.exports={changeOrder:!0,cells:["Play","Love","Title","Replace","AddToPlaylist","ContextMenu","Lyrics","Artist","Album","Duration","AddDate","Checkbox"],header:{sorter:!0,contextMenu:!0,remove:!0},toolbar:{playAll:!0,shareType:3,contextMenu:!0,edit:!0,filter:!0,sorter:!0},infiniteScroll:!0,trackIndex:!0,sorterStorageKey:"playlist"}},"./js/_components/DataGrid/presets/personalSong.json":function(e,t){e.exports={cells:["Play","Love","Title","EditMp3","AddToPlaylist","ContextMenu","Lyrics","Artist","Album","Duration","Checkbox"],header:{contextMenu:!0,remove:!0},toolbar:{playAll:!0,upload:!0,filter:!0},infiniteScroll:!0,fillerHeight:!0,trackIndex:!0}},"./js/_components/DataGrid/presets/playlist.json":function(e,t){e.exports={availableOnly:!1,cells:["Play","Love","Title","AddToPlaylist","ContextMenu","Lyrics","Artist","Album","Duration","Popularity","Checkbox"],header:{sorter:!0,add:!0,contextMenu:!0},toolbar:{playAll:!0,favorite:!0,shareType:3,contextMenu:!0,filter:!0,sorter:!0},infiniteScroll:!0,trackIndex:!0,unseen:!0,sorterStorageKey:"playlist"}},"./js/_components/DataGrid/presets/queuelist.json":function(e,t){e.exports={changeOrder:!0,cells:["Play","Love","Title","ContextMenu","Lyrics","Artist","Duration","RemoveFromQueueList"],multiArtist:!0,cover:"album",sorterStorageKey:"queuelist"}},"./js/_components/DataGrid/presets/queuelistPodcast.json":function(e,t){e.exports={cells:["Play","EpisodeHeard","EpisodeTitle","EpisodeInformation","Share","Duration","EpisodeReleaseDate"],cover:"episode",sorterStorageKey:"queuelist"}},"./js/_components/DataGrid/presets/search.json":function(e,t){e.exports={cells:["Play","Love","Title","AddToPlaylist","ContextMenu","Lyrics","Artist","Album","Duration","Popularity","Checkbox"],header:{sorter:!0,add:!0,contextMenu:!0},infiniteScroll:!0,fillerHeight:!0,cover:"album",sorterStorageKey:"search"}},"./js/_components/DataGrid/presets/talkEpisodes.json":function(e,t){e.exports={availableOnly:!0,cells:["Play","EpisodeHeard","EpisodeTitle","EpisodeInformation","EpisodeAdd","Duration","EpisodeReleaseDate"],shareType:8,trackIndex:!0,infiniteScroll:!0,fillerHeight:!0}},"./js/_components/DataGrid/presets/talkShow.json":function(e,t){e.exports={cells:["Play","EpisodeHeard","EpisodeTitle","EpisodeInformation","Share","Duration","EpisodeReleaseDate"],toolbar:{playAll:!0,favorite:!0,shareType:7},infiniteScroll:!0,fillerHeight:!0}},"./js/_components/DataGrid/presets/topArtist.json":function(e,t){e.exports={cells:["Play","Love","Title","ContextMenu","Lyrics"],toolbar:!1,share:!0,trackIndex:!0,sorterStorageKey:"topArtist",selectAll:!1}},"./js/_components/DataGrid/presets/topArtistFull.json":function(e,t){e.exports={cells:["Play","Love","Title","AddToPlaylist","ContextMenu","Lyrics","Artist","Album","Popularity","Duration","Checkbox"],header:{sorter:!0,add:!0,contextMenu:!0},toolbar:{playAll:!0,filter:!0},sorterStorageKey:"topArtistFull",infiniteScroll:!0,fillerHeight:!0,trackIndex:!0}},"./js/_components/Dislike.js":function(e,t,n){"use strict";function a(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):a(e,t))}var s=n("./node_modules/prop-types/index.js"),l=(n.n(s),n("./node_modules/react/index.js")),c=n.n(l),p=n("./node_modules/classnames/index.js"),u=n.n(p),d=n("./js/_modules/i18n.js"),f=n("./js/_modules/favorite.js"),h=n("./js/_modules/Events.js"),m=n("./js/_modules/dzPlayer.js"),y=n("./js/_modules/userData.js"),b=n("./js/_components/Icon/index.js"),g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_=function(e){function t(n){r(this,t);var a=o(this,e.call(this,n));return a._onFavoriteToggle=a._onFavoriteToggle.bind(a),a._onDislikeClick=a._onDislikeClick.bind(a),a.state={active:!1},a}return i(t,e),t.prototype.componentDidMount=function(){h.a.subscribe(h.a.user.addFavorite,this._onFavoriteToggle),h.a.subscribe(h.a.user.deleteFavorite,this._onFavoriteToggle)},t.prototype.componentWillReceiveProps=function(){this.setState({active:!1})},t.prototype.shouldComponentUpdate=function(e,t){return this.state.active!==t.active||this.props.id!==e.id},t.prototype.componentWillUnmount=function(){clearTimeout(this._removeTooltipTimeout),h.a.unsubscribe(h.a.user.addFavorite,this._onFavoriteToggle),h.a.unsubscribe(h.a.user.deleteFavorite,this._onFavoriteToggle)},t.prototype.render=function(){var e=this.props,t=e.className,n=e.tooltip,a=e.tooltip_gravity,r=this.state.active,o=Object(d.a)("Ne plus me proposer ce titre"),i={};n&&(i={"data-tooltip":"1","data-tooltip-gravity":a,"data-tooltip-delay":"400","data-original-title":o});var s=g({className:u()(t,{"evt-over evt-out":n}),type:"button",onClick:this._onDislikeClick,"aria-label":o},i),l=u()({"is-active":r&&m.a.skipRadioAllowed()});return c.a.createElement("button",s,c.a.createElement(b.a,{className:l,name:"cancel",size:"auto"}))},t.prototype._onFavoriteToggle=function(e,t){var n=Number(this.props.id);n===Number(t.SNG_ID)&&"disliked_song"===t.type&&this.setState({active:y.a.isDisliked(n)})},t.prototype._onDislikeClick=function(e){e.stopPropagation();var t=this.props,n=t.type,a=t.id,r=t.onClickCallback;f.a.add({type:n,id:a}),r(),this._removeTooltipTimeout=setTimeout(function(){for(var e=document.querySelectorAll(".tipsy"),t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t])},0)},t}(l.Component);_.defaultProps={className:"",type:"disliked_song",tooltip:!1,tooltip_gravity:"s",onClickCallback:function(){}},t.a=_},"./js/_components/PageScroll.js":function(e,t,n){"use strict";function a(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):a(e,t))}var s=n("./node_modules/prop-types/index.js"),l=(n.n(s),n("./node_modules/react/index.js")),c=n.n(l),p=n("./node_modules/lodash.debounce/index.js"),u=n.n(p),d=n("./js/_modules/Events.js"),f=function(e){function t(n){r(this,t);var a=o(this,e.call(this,n));return a._onScroll=a._onScroll.bind(a),a._onResize=a._onResize.bind(a),a}return i(t,e),t.prototype.componentWillMount=function(){this._scrollActive=0!==this.props.total,this._scrollActive&&0===this.props.start&&this._loadData()},t.prototype.componentDidMount=function(){this._resizeCallback=u()(this._onResize,500),d.a.subscribe(d.a.layout.scroll,this._onScroll),window.addEventListener("resize",this._resizeCallback),this._scrollActive&&!this._hasScrollbar()&&this._loadData()},t.prototype.componentWillReceiveProps=function(e){this._scrollActive=0!==e.total,this._scrollActive&&0===e.start&&this._loadData()},t.prototype.componentDidUpdate=function(){this._scrollActive=this.props.total>this.props.start,this._scrollActive&&!this._hasScrollbar()&&this._loadData()},t.prototype.componentWillUnmount=function(){this._resizeCallback.cancel(),d.a.unsubscribe(d.a.layout.scroll,this._onScroll),window.removeEventListener("resize",this._resizeCallback)},t.prototype.render=function(){return c.a.createElement("div",{className:this.props.wrapperClass,"aria-live":"polite"},this.props.children)},t.prototype._onScroll=function(e,t){var n=t.height,a=t.yscroll,r=document.body.scrollHeight;this._scrollActive&&r<=n+a+this.props.spacer&&this._loadData()},t.prototype._onResize=function(){this._scrollActive&&!this._hasScrollbar()&&this._loadData()},t.prototype._loadData=function(){this._scrollActive=!1;var e=this.props,t=e.start,n=e.nb;this.props.loadData(t,n)},t.prototype._hasScrollbar=function(){return window.innerHeight<document.body.scrollHeight},t}(l.Component);f.defaultProps={wrapperClass:"container",spacer:0,nb:20},t.a=f},"./js/_components/Root.js":function(e,t,n){"use strict";function a(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):a(e,t))}function s(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):s(e,t))}function u(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):u(e,t))}function m(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):m(e,t))}function _(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_(e,t))}function j(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function N(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):j(e,t))}function S(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function k(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):S(e,t))}function A(e){return Pi[e]||!1}function x(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function I(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):x(e,t))}function L(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function U(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):L(e,t))}function B(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function H(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(r,o){try{var i=t[r](o),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){a("next",e)},function(e){a("throw",e)});e(s)}return a("next")})}}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function q(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):B(e,t))}function Y(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function K(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Y(e,t))}function Q(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function J(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Q(e,t))}function Z(e,t){var n=null;return t===Yo.a.MEDIA_TYPE_TALK?n="/show/"+e.SHOW_ID:Number(e.ALB_ID)>0&&(n="/album/"+e.ALB_ID),n}function ee(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ne(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ae(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):ee(e,t))}function re(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function se(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):re(e,t))}function le(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ue(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):le(e,t))}function de(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function he(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function me(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):de(e,t))}function ye(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ge(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _e(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):ye(e,t))}function ve(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function je(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):ve(e,t))}function Te(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function we(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ne(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Se(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Te(e,t))}function Ce(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ke(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ae(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Ce(e,t))}function xe(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function De(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Re(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ie(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):xe(e,t))}function Le(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ue(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Le(e,t))}function Be(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function He(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ge(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ze(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Be(e,t))}function qe(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function We(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ve(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):qe(e,t))}function Ke(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Qe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function $e(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Ke(e,t))}function Je(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Ze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function et(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function tt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Je(e,t))}function nt(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function at(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ot(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):nt(e,t))}function it(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function st(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ct(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):it(e,t))}function pt(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function ut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ft(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):pt(e,t))}function ht(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function mt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function bt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):ht(e,t))}function gt(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function _t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Et(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):gt(e,t))}function Ot(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function jt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function wt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Ot(e,t))}function Nt(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function St(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ct(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Pt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Nt(e,t))}function kt(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function At(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Dt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):kt(e,t))}function Rt(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function It(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Mt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Rt(e,t))}function Ft(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Ut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ht(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Ft(e,t))}function Gt(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function zt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Yt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Gt(e,t))}function Wt(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Vt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Qt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Wt(e,t))}function Xt(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function $t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Zt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Xt(e,t))}function en(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function tn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function an(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):en(e,t))}function rn(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function on(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ln(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):rn(e,t))}function cn(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function pn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function un(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function dn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):cn(e,t))}function fn(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function hn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function yn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):fn(e,t))}function bn(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function gn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function vn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):bn(e,t))}function En(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function On(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Tn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):En(e,t))}function wn(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Nn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Cn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):wn(e,t))}function Pn(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function kn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function An(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function xn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Pn(e,t))}function Dn(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Rn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function In(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ln(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Dn(e,t))}function Mn(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Fn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Un(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Bn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Mn(e,t))}function Hn(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Gn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function qn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Hn(e,t))}function Yn(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Wn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Kn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Yn(e,t))}function Qn(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Xn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Jn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Qn(e,t))}function Zn(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function ea(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ta(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function na(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Zn(e,t))}function aa(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function ra(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oa(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ia(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):aa(e,t))}function sa(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function la(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ca(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function pa(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):sa(e,t))}function ua(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function da(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fa(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ha(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):ua(e,t))}function ma(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function ya(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ba(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ga(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):ma(e,t))}function _a(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function va(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ea(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Oa(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_a(e,t))}function ja(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Ta(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wa(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Na(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):ja(e,t))}function Sa(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Ca(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pa(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ka(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Sa(e,t))}function Aa(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function xa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Da(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ra(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Aa(e,t))}function Ia(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function La(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ma(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Fa(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Ia(e,t))}function Ua(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Ba(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ha(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ga(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Ua(e,t))}function za(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function qa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ya(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Wa(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):za(e,t))}function Va(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Ka(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qa(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Xa(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Va(e,t))}function $a(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Ja(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Za(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function er(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):$a(e,t))}function tr(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function nr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ar(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function rr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):tr(e,t))}function or(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function ir(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function lr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):or(e,t))}function cr(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function pr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ur(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function dr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):cr(e,t))}function fr(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function hr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function yr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):fr(e,t))}function br(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function gr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function vr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):br(e,t))}function Er(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Or(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Tr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Er(e,t))}function wr(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Nr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Cr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):wr(e,t))}function Pr(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function kr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ar(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function xr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Pr(e,t))}function Dr(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Rr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ir(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Lr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Dr(e,t))}function Mr(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Fr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ur(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Br(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Mr(e,t))}function Hr(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Gr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function qr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Hr(e,t))}function Yr(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Wr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Kr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Yr(e,t))}function Qr(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Xr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Jr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Qr(e,t))}function Zr(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function eo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function to(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function no(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Zr(e,t))}function ao(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function ro(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oo(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function io(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):ao(e,t))}function so(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function lo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function co(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function po(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):so(e,t))}function uo(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function fo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ho(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function mo(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):uo(e,t))}function yo(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function bo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function go(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):yo(e,t))}function vo(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Eo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oo(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function jo(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):vo(e,t))}function To(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function wo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function No(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function So(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):To(e,t))}function Co(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Po(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(r,o){try{var i=t[r](o),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){a("next",e)},function(e){a("throw",e)});e(s)}return a("next")})}}function ko(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ao(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function xo(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Co(e,t))}function Do(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function Ro(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Io(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Lo(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):Do(e,t))}function Mo(e){var t=e.params,n=t.id,a=void 0===n?null:n,r=t.goBack,o=void 0!==r&&r;a&&(o?zo.a.goBack():zo.a.replace("/"),Yo.a.play({type:Vo.a.Livestream,id:parseInt(a,10),radio:!0,context:{TYPE:"livestream_page",ID:parseInt(a,10)}}))}function Fo(e,t,a){function r(){return a.getState().user.USER.OPTIONS.ads_display&&Yo.a.isAdvertisingAllowed()}function o(){0===a.getState().user.id&&qo.c.goToConnection()}return Ko.a.isAllowed("business")&&!Ko.a.isAllowed("business_mod")?Bo.a.createElement(Go.d,{path:"/",component:r()?Sf:nf,appState:e,modalPath:t,store:a},Bo.a.createElement(Go.a,{getComponent:function(e,t){return n.e("plannings-index").then(n.bind(null,"./js/Plannings/index.js")).then(Cf(t)).catch(Pf)},onEnter:o}),Bo.a.createElement(Go.d,{path:"planning/:planning_id",getComponent:function(e,t){return n.e("components-business-planneritem").then(n.bind(null,"./js/Planning/index.js")).then(Cf(t)).catch(Pf)},onEnter:o}),Bo.a.createElement(Go.d,{path:"boxes",getComponent:function(e,t){return n.e("boxes-index").then(n.bind(null,"./js/Boxes/index.js")).then(Cf(t)).catch(Pf)},onEnter:o}),Bo.a.createElement(Go.d,{path:"campaigns",getComponent:function(e,t){return n.e("campaigns-index").then(n.bind(null,"./js/Campaigns/index.js")).then(Cf(t)).catch(Pf)},onEnter:o}),Bo.a.createElement(Go.d,{path:"campaign/:id",getComponent:function(e,t){return n.e("campaigns-index").then(n.bind(null,"./js/Campaigns/index.js")).then(Cf(t)).catch(Pf)},onEnter:o}),kf):Bo.a.createElement(Go.d,{path:"/",component:r()?Sf:nf,appState:e,modalPath:t,store:a},Bo.a.createElement(Go.a,{getComponent:function(e,t){return n.e("page-index").then(n.bind(null,"./js/Page/index.js")).then(Cf(t)).catch(Pf)},onEnter:o}),Bo.a.createElement(Go.d,null,Bo.a.createElement(Go.a,{getComponent:function(e,t){return n.e("page-index").then(n.bind(null,"./js/Page/index.js")).then(Cf(t)).catch(Pf)}}),Wo.a.get("AVAILABLE_LANGUAGES").map(function(e){return Bo.a.createElement(Go.d,{key:e,path:e+"/"},Bo.a.createElement(Go.a,{getComponent:function(e,t){return n.e("page-index").then(n.bind(null,"./js/Page/index.js")).then(Cf(t)).catch(Pf)}}),Bo.a.createElement(Go.d,{path:"page/*",getComponent:function(e,t){return n.e("page-index").then(n.bind(null,"./js/Page/index.js")).then(Cf(t)).catch(Pf)}}),Bo.a.createElement(Go.d,null,Bo.a.createElement(Go.d,{path:"channels/*",getComponent:function(e,t){return n.e("page-index").then(n.bind(null,"./js/Page/index.js")).then(Cf(t)).catch(Pf)}}),Af,xf,Df,Rf,If),Bo.a.createElement(Go.d,{path:"artist/:id(/:tab)",getComponent:function(e,t){return n.e("artist-index").then(n.bind(null,"./js/Artist/index.js")).then(Cf(t)).catch(Pf)}}),Bo.a.createElement(Go.d,{path:"album/:id",getComponent:function(e,t){return n.e("album-index").then(n.bind(null,"./js/Album/index.js")).then(Cf(t)).catch(Pf)}}),Bo.a.createElement(Go.d,{path:"audiobook/:id",getComponent:function(e,t){return n.e("audiobook-index").then(n.bind(null,"./js/Audiobook/index.js")).then(Cf(t)).catch(Pf)}}),Bo.a.createElement(Go.d,{path:"playlist/:id",getComponent:function(e,t){return n.e("playlist-index").then(n.bind(null,"./js/Playlist/index.js")).then(Cf(t)).catch(Pf)}}),Bo.a.createElement(Go.d,{path:"track/:id(/:tab)",getComponent:function(e,t){return n.e("track-index").then(n.bind(null,"./js/Track/index.js")).then(Cf(t)).catch(Pf)}}),Bo.a.createElement(Go.d,{path:"show/:id",getComponent:function(e,t){return n.e("show-index").then(n.bind(null,"./js/Show/index.js")).then(Cf(t)).catch(Pf)}}),Bo.a.createElement(Go.d,{path:"profile/:id(/:tab)",getComponent:function(e,t){return n.e("profile-index").then(n.bind(null,"./js/Profile/index.js")).then(Cf(t)).catch(Pf)}}),Bo.a.createElement(Go.d,{path:"episodes",getComponent:function(e,t){return n.e("episodes-index").then(n.bind(null,"./js/Episodes/index.js")).then(Cf(t)).catch(Pf)}}),Bo.a.createElement(Go.d,{path:"episode/:id",getComponent:function(e,t){return n.e("episode-index").then(n.bind(null,"./js/Episode/index.js")).then(Cf(t)).catch(Pf)}}),Bo.a.createElement(Go.d,{path:"feed",getComponent:function(e,t){return n.e("feed-index").then(n.bind(null,"./js/Feed/index.js")).then(Cf(t)).catch(Pf)},onEnter:o}))})),Bo.a.createElement(Go.d,{path:"flow",getComponent:function(e,t){return n.e("page-index").then(n.bind(null,"./js/Page/index.js")).then(Cf(t)).catch(Pf)},onEnter:o}),Bo.a.createElement(Go.d,{path:"mixes/genre/:id",getComponent:function(e,t){return n.e("mix-index").then(n.bind(null,"./js/Mix/index.js")).then(Cf(t)).catch(Pf)}}),Bo.a.createElement(Go.d,null,Bo.a.createElement(Go.d,{path:"mixes/:type/:id",getComponent:function(e,t){return n.e("mixes-index").then(n.bind(null,"./js/Mixes/index.js")).then(Cf(t)).catch(Pf)}}),Lf),Bo.a.createElement(Go.d,{path:"shows(/:tab(/:id))",getComponent:function(e,t){return n.e("shows-index").then(n.bind(null,"./js/Shows/index.js")).then(Cf(t)).catch(Pf)},onEnter:o}),Bo.a.createElement(Go.d,{path:"appstudio",getComponent:function(e,t){return n.e("appstudio-index").then(n.bind(null,"./js/AppStudio/index.js")).then(Cf(t)).catch(Pf)}}),Bo.a.createElement(Go.d,{path:"app/login",getComponent:function(e,t){return n.e("app-index").then(n.bind(null,"./js/App/index.js")).then(Cf(t)).catch(Pf)}}),Bo.a.createElement(Go.d,{path:"app/:app_id(/)*",getComponent:function(e,t){return n.e("app-index").then(n.bind(null,"./js/App/index.js")).then(Cf(t)).catch(Pf)}}),Bo.a.createElement(Go.d,{path:"search/:query(/:tab)",getComponent:function(e,t){return n.e("search-index").then(n.bind(null,"./js/Search/index.js")).then(Cf(t)).catch(Pf)}}),Bo.a.createElement(Go.d,{path:"tags/:tags(/:tab)",getComponent:function(e,t){return n.e("search-index").then(n.bind(null,"./js/Search/index.js")).then(Cf(t)).catch(Pf)}}),Bo.a.createElement(Go.d,{path:"offline",getComponent:function(e,t){return n.e("offline-index").then(n.bind(null,"./js/Offline/index.js")).then(Cf(t)).catch(Pf)}}),Bo.a.createElement(Go.d,{path:"page/*",getComponent:function(e,t){return n.e("page-index").then(n.bind(null,"./js/Page/index.js")).then(Cf(t)).catch(Pf)}}),Bo.a.createElement(Go.d,{path:"campaigns",getComponent:function(e,t){return n.e("campaigns-index").then(n.bind(null,"./js/Campaigns/index.js")).then(Cf(t)).catch(Pf)},onEnter:o}),Bo.a.createElement(Go.d,{path:"campaign/:id",getComponent:function(e,t){return n.e("campaigns-index").then(n.bind(null,"./js/Campaigns/index.js")).then(Cf(t)).catch(Pf)},onEnter:o}),Bo.a.createElement(Go.d,{path:"plannings",getComponent:function(e,t){return n.e("plannings-index").then(n.bind(null,"./js/Plannings/index.js")).then(Cf(t)).catch(Pf)},onEnter:o}),Bo.a.createElement(Go.d,{path:"planning/:planning_id",getComponent:function(e,t){return n.e("components-business-planneritem").then(n.bind(null,"./js/Planning/index.js")).then(Cf(t)).catch(Pf)},onEnter:o}),Bo.a.createElement(Go.d,{path:"boxes",getComponent:function(e,t){return n.e("boxes-index").then(n.bind(null,"./js/Boxes/index.js")).then(Cf(t)).catch(Pf)},onEnter:o}),Bo.a.createElement(Go.d,{path:"account(/:tab)",getComponent:function(e,t){return n.e("account-index").then(n.bind(null,"./js/Account/index.js")).then(Cf(t)).catch(Pf)}}),Bo.a.createElement(Go.d,{path:"/livestream/:id(/:goBack)",onEnter:Mo,getComponent:function(){return[]}}),Bo.a.createElement(Go.d,{path:"*",getComponent:function(e,t){return n.e("legacy-index").then(n.bind(null,"./js/Legacy/index.js")).then(Cf(t)).catch(Pf)}}))}var Uo=n("./node_modules/react/index.js"),Bo=n.n(Uo),Ho=n("./node_modules/react-redux/es/index.js"),Go=n("./node_modules/react-router/es/index.js"),zo=n("./js/_modules/navigation/history/index.js"),qo=n("./js/_modules/www.js"),Yo=n("./js/_modules/dzPlayer.js"),Wo=n("./js/_modules/config/index.js"),Vo=n("./js/_modules/Type.js"),Ko=n("./js/_modules/gatekeeper.js"),Qo=n("./node_modules/jquery/dist/jquery.js"),Xo=n.n(Qo),$o=n("./node_modules/prop-types/index.js"),Jo=n.n($o),Zo=n("./node_modules/lodash.size/index.js"),ei=n.n(Zo),ti=n("./js/_modules/modal.js"),ni=n("./js/_modules/Events.js"),ai=n("./js/_modules/live/live.js"),ri=n("./js/_modules/userData.js"),oi=n("./js/_modules/logger/client.js"),ii=n("./js/_modules/Labs.js"),si=n("./js/_modules/redux/stores/user.js"),li=n("./node_modules/react-smooth/es6/index.js"),ci=n("./js/_modules/redux/stores/modal.js"),pi=n("./node_modules/classnames/index.js"),ui=n.n(pi),di=n("./js/_modules/i18n.js"),fi=n("./js/_modules/api.js"),hi=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return i(t,e),t.prototype.render=function(){var e=ui()("modal-header",this.props.className);return Bo.a.createElement("div",{id:"modal_title",className:e},this.props.children)},t}(Uo.Component);hi.defaultProps={className:""};var mi=hi,yi=function(e){function t(){return l(this,t),c(this,e.apply(this,arguments))}return p(t,e),t.prototype.render=function(){var e,t=ui()("modal-body",(e={},e[this.props.className]=!0,e));return Bo.a.createElement("div",{className:t},this.props.children)},t}(Uo.Component);yi.defaultProps={className:""};var bi=yi,gi=function(e){function t(){return d(this,t),f(this,e.apply(this,arguments))}return h(t,e),t.prototype.render=function(){var e=ui()("modal-footer",this.props.className);return Bo.a.createElement("div",{className:e},this.props.children)},t}(Uo.Component);gi.defaultProps={className:""};var _i={Header:mi,Body:bi,Footer:gi},vi=n("./js/_components/Icon/index.js"),Ei=Bo.a.createElement(vi.a,{className:"checkbox-tick",name:"check"}),Oi=function(e){function t(n){y(this,t);var a=b(this,e.call(this,n));return a._actionsList={artist:["cover","duplicate_artist","explicit_content","other"],album:["wrong_artist","audio","explicit_content","other"],track:["wrong_artist","audio","explicit_content","other"]},a._onInputClick=a._onInputClick.bind(a),a._onClose=a._onClose.bind(a),a._onSubmit=a._onSubmit.bind(a),a._onClickOther=a._onClickOther.bind(a),a.state={inputOtherDisplay:!1,inputOtherError:!1,confirmMessage:!1},a}return g(t,e),t.prototype.componentWillUnmount=function(){fi.a.cancel(this._feedbackApiRef)},t.prototype.render=function(){var e=this._getData();return e?Bo.a.createElement("div",{className:"modal-feedback-catalog"},Bo.a.createElement(_i.Header,null,Object(di.a)("Signaler un problème")),Bo.a.createElement(_i.Body,{className:"feedback-catalog"},this._renderBody(e)),Bo.a.createElement(_i.Footer,null,this._renderFooter())):null},t.prototype._renderBody=function(e){var t=this,n=this.state.confirmMessage;return!1!==n?Bo.a.createElement("h4",{className:"heading-4"},n):Bo.a.createElement("div",{className:"feedback-catalog-content"},Bo.a.createElement("div",{className:"form-horizontal"},e.map(function(e){return Bo.a.createElement("div",{className:"form-group",key:e.id},Bo.a.createElement("span",{className:"checkbox",ref:"checkbox-"+e.id,onClick:t._onClick.bind(t,e.id)},Bo.a.createElement("label",{className:"checkbox-label"},Bo.a.createElement("input",{className:"checkbox-input",onChange:e.action?e.action:void 0,ref:e.id,type:"checkbox"}),e.label,Ei)),t._renderInputText(e))})))},t.prototype._renderInputText=function(e){var t=this.state,n=t.inputOtherDisplay,a=t.inputOtherError;if(!n||"other"!==e.id)return null;var r=ui()({"form-group":!0,"has-error":a});return Bo.a.createElement("div",{className:r},Bo.a.createElement("input",{ref:"comment",className:"form-control",maxLength:140,placeholder:Object(di.a)("Écrire un commentaire"),type:"text",onClick:this._onInputClick}))},t.prototype._renderFooter=function(){return!1!==this.state.confirmMessage?Bo.a.createElement("button",{className:"btn btn-default pull-right",type:"button",onClick:this._onClose},Bo.a.createElement("span",{className:"label"},Object(di.a)("Fermer"))):Bo.a.createElement("div",null,Bo.a.createElement("button",{className:"btn btn-default pull-left",type:"button",onClick:this._onClose},Bo.a.createElement("span",{className:"label"},Object(di.a)("Annuler"))),Bo.a.createElement("button",{className:"btn pull-right btn-primary",type:"button",onClick:this._onSubmit},Bo.a.createElement("span",{className:"label"},Object(di.a)("Valider"))))},t.prototype._onClick=function(e){var t=this.refs["checkbox-"+e],n=this.refs[e];t.className=ui()({checkbox:!0,checked:n.checked})},t.prototype._onInputClick=function(){this.state.inputOtherError&&this.setState({inputOtherError:!1})},t.prototype._onSubmit=function(){var e=this,t=this._getFormData();!1!==t&&(this._feedbackApiRef=fi.a.call({method:"deezer.feedbackCatalog",data:{type:this.props.type,id:this.props.id,problem:t},success:function(t){t?e.setState({confirmMessage:Object(di.a)("Merci pour votre retour !")}):e._onClose()}}))},t.prototype._onClose=function(){this.props.closeModal()},t.prototype._onClickOther=function(){this.setState({inputOtherDisplay:!this.state.inputOtherDisplay})},t.prototype._getFormData=function(){var e=this,t=[];return this._getData().map(function(n){if(e.refs[n.id].checked){var a={type:n.id};if("other"===n.id){if(""===e.refs.comment.value)return t=[],e.setState({inputOtherError:!0}),!1;a.data=e.refs.comment.value}t.push(a)}return!0}),0!==t.length&&t},t.prototype._getData=function(){var e=this,t=this.props.type,n=[];return this._actionsList[t].forEach(function(a){return n.push({id:a,label:e._getWording(t,a),action:"other"===a?e._onClickOther:void 0})}),n},t.prototype._getWording=function(e,t){return{cover:Object(di.a)("La photo n'est pas bonne."),duplicate_artist:Object(di.a)("Cet artiste existe déjà."),wrong_artist:e===Vo.a.Album?Object(di.a)("Cet album n'est pas de cet artiste."):Object(di.a)("Ce titre n'est pas de cet artiste."),audio:Object(di.a)("Il y a un problème audio."),explicit_content:Object(di.a)("Contenu indésirable."),other:Object(di.a)("Autre")}[t]||""},t}(Uo.Component),ji=Object(Ho.b)(null,{closeModal:ci.a})(Oi),Ti=function(e){function t(n){v(this,t);var a=E(this,e.call(this,n));return a.ERROR_MSG=Object(di.a)("Votre adresse email n'a pas été mise à jour."),a.ERROR_CONFIRM_EMAIL_MSG=Object(di.a)("Vos adresses email ne correspondent pas. Veuillez réessayer."),a.ERROR_ALREADY_EXIST_MSG=Object(di.a)("Cette adresse email est indisponible."),a._onSubmit=a._onSubmit.bind(a),a.state={message:""},a}return O(t,e),t.prototype.componentWillUnmount=function(){fi.a.cancel(this._apiRef)},t.prototype.render=function(){return Bo.a.createElement("div",null,Bo.a.createElement(_i.Header,null,Object(di.a)("Modification de votre email")),Bo.a.createElement(_i.Body,{className:"wrapper"},Bo.a.createElement("form",{className:"form-horizontal"},Bo.a.createElement("div",{className:"form-wrapper"},Bo.a.createElement("div",{className:"form-group"},Bo.a.createElement("input",{ref:"password",className:"form-control",type:"password",placeholder:Object(di.a)("Votre mot de passe")})),Bo.a.createElement("div",{className:"form-group"},Bo.a.createElement("input",{ref:"email",className:"form-control",type:"text",placeholder:Object(di.a)("Votre nouvel email")})),Bo.a.createElement("div",{className:"form-group"},Bo.a.createElement("input",{ref:"email_confirm",className:"form-control",type:"text",placeholder:Object(di.a)("Vérification du nouvel email")})),this.state.message?Bo.a.createElement("div",{className:"form-group alert alert-danger"},this.state.message):null,Bo.a.createElement("div",{className:"form-group"},Bo.a.createElement("button",{className:"btn btn-primary btn-block",type:"submit",onClick:this._onSubmit},Bo.a.createElement("span",{className:"label"},Object(di.a)("Enregistrer"))))))))},t.prototype._onSubmit=function(e){var t=this;e.preventDefault();var n="",a=this.refs,r=a.password,o=a.email,i=a.email_confirm;!o.value.length||!i.value.length||r.value.length<6?n=this.ERROR_MSG:o.value!==i.value&&(n=this.ERROR_CONFIRM_EMAIL_MSG),""===n?this._apiRef=fi.a.call({method:"deezer.updateEmail",data:{password:r.value,email:o.value},success:function(e){e&&(ni.a.trigger(ni.a.user.updateEmail,{email:o.value}),t.props.closeModal()),t.setState({message:t.ERROR_MSG})},error:function(e){var n=t.ERROR_MSG;"Email already exists"===e.message&&(n=t.ERROR_ALREADY_EXIST_MSG),"Invalid email domain"===e.message&&(n=Object(di.a)("Le nom de domaine '%s' n'est pas autorisé.",{sprintf:[e.payload.domain]})),t.setState({message:n})}}):this.setState({message:n})},t}(Uo.Component),wi=Object(Ho.b)(null,{closeModal:ci.a})(Ti),Ni=function(e){function t(n){T(this,t);var a=w(this,e.call(this,n));return a.ERROR_MSG=Object(di.a)("Votre mot de passe n'a pas été mis à jour."),a._onSubmit=a._onSubmit.bind(a),a.state={message:""},a}return N(t,e),t.prototype.componentWillUnmount=function(){fi.a.cancel(this._apiRef)},t.prototype.render=function(){return Bo.a.createElement("div",null,Bo.a.createElement(_i.Header,null,Object(di.a)("Modification du mot de passe")),Bo.a.createElement(_i.Body,{className:"wrapper"},Bo.a.createElement("form",{className:"form-horizontal"},Bo.a.createElement("div",{className:"form-wrapper"},Bo.a.createElement("div",{className:"form-group"},Bo.a.createElement("input",{ref:"old_password",className:"form-control",type:"password",placeholder:Object(di.a)("Votre mot de passe")})),Bo.a.createElement("div",{className:"form-group"},Bo.a.createElement("input",{ref:"password",className:"form-control",type:"password",placeholder:Object(di.a)("Votre nouveau mot de passe")})),Bo.a.createElement("div",{className:"form-group"},Bo.a.createElement("input",{ref:"password_confirm",className:"form-control",type:"password",placeholder:Object(di.a)("Vérification du mot de passe")})),this.state.message?Bo.a.createElement("div",{className:"form-group alert alert-danger"},this.state.message):null,Bo.a.createElement("div",{className:"form-group"},Bo.a.createElement("button",{className:"btn btn-primary btn-block",type:"submit",onClick:this._onSubmit},Bo.a.createElement("span",{className:"label"},Object(di.a)("Enregistrer"))))))))},t.prototype._onSubmit=function(e){var t=this;e.preventDefault();var n=this.refs,a=n.old_password,r=n.password,o=n.password_confirm;!a.value.length||r.value.length<6||r.value!==o.value?this.setState({message:this.ERROR_MSG}):this._apiRef=fi.a.call({method:"deezer.updatePassword",data:{old_password:a.value,password:r.value},success:function(e){e?t.props.closeModal():t.setState({message:t.ERROR_MSG})}})},t}(Uo.Component),Si=Object(Ho.b)(null,{closeModal:ci.a})(Ni),Ci=function(e){function t(n){C(this,t);var a=P(this,e.call(this,n));return a.state={selectedChronicle:n.selectedChronicle},a}return k(t,e),t.prototype.render=function(){var e=this.props.data[this.state.selectedChronicle];return Bo.a.createElement("div",{id:"modal_album_chronicles"},Bo.a.createElement(_i.Header,null,Object(di.a)("CHRONIQUE")),Bo.a.createElement(_i.Body,null,Bo.a.createElement("div",{className:"wrapper"},Bo.a.createElement("div",{className:"chronicle-heading"},Bo.a.createElement("div",{className:"chronicle-title heading-1"},e.ALB_TITLE),this._renderLogo()),this._renderChronicle(e.CHRONICLE),Bo.a.createElement("div",{className:"chronicle-footer heading-4"},Bo.a.createElement("p",null,e.AUTHOR_NAME),Bo.a.createElement("p",null,Object(di.a)("Source :")," ",Bo.a.createElement("a",{className:"link-primary link-animated",href:e.URL,target:"_blank"},e.PARTNER_NAME))))))},t.prototype._renderChronicle=function(e){return Bo.a.createElement("div",{className:"chronicle-text",dangerouslySetInnerHTML:{__html:e}})},t.prototype._renderLogo=function(){var e=this,t=this.props.data,n=this.state.selectedChronicle;return t.map(function(t,a){var r=t.LOGO_BIG.split("."),o=r[0],i=r[1],s=ui()("chronicle-logo",{"is-active":n===a});return Bo.a.createElement("button",{className:s,key:t.SOURCE,onClick:function(){return e._onSelect(a)},role:"button"},Bo.a.createElement("img",{src:"https://"+Wo.a.get("host_static_ssl")+"/img/review/big/"+o+"-v"+Wo.a.get("STATIC_VERSION")+"."+i}))})},t.prototype._onSelect=function(e){this.setState({selectedChronicle:e})},t}(Uo.Component);Ci.defaultProps={selectedChronicle:0};var Pi={CATALOG_FEEDBACK:ji,UPDATE_EMAIL:wi,UPDATE_PASSWORD:Si,ALBUM_CHRONICLES:Object(Ho.b)(null,{closeModal:ci.a})(Ci)},ki=function(e){function t(n){D(this,t);var a=R(this,e.call(this,n));return a._open=a._open.bind(a),a._close=a._close.bind(a),a._onKeyDown=a._onKeyDown.bind(a),a._onOutsideMouseDown=a._onOutsideMouseDown.bind(a),a}return I(t,e),t.prototype.componentDidMount=function(){document.addEventListener("keydown",this._onKeyDown),document.addEventListener("mousedown",this._onOutsideMouseDown),document.addEventListener("touchstart",this._onOutsideMouseDown)},t.prototype.componentWillUnmount=function(){document.removeEventListener("keydown",this._onKeyDown),document.removeEventListener("mousedown",this._onOutsideMouseDown),document.removeEventListener("touchstart",this._onOutsideMouseDown)},t.prototype.render=function(){var e=this.props,t=e.isOpen,n=e.disableClosingAction,a=e.data,r=e.name;if(!t)return null;var o=A(r);return o?Bo.a.createElement("div",{className:"modal",role:"dialog","aria-hidden":!1,"aria-labelledby":"modal_title"},Bo.a.createElement(li.a,{from:{opacity:0},to:{opacity:.8},duration:150},Bo.a.createElement("div",{className:"modal-backdrop",onClick:this._close})),Bo.a.createElement("div",{className:"modal-wrapper"},Bo.a.createElement(li.a,{from:{opacity:0},to:{opacity:1},duration:150},Bo.a.createElement("div",{className:"modal-dialog modal-large",ref:"content"},n?null:Bo.a.createElement("button",{className:"modal-close icon icon-cancel",id:"modal-close",type:"button",onClick:this._close}),Bo.a.createElement(o,a))))):null},t.prototype._onKeyDown=function(e){var t=this.props,n=t.isOpen,a=t.disableClosingAction;n&&!a&&27===e.keyCode&&this._close()},t.prototype._onOutsideMouseDown=function(e){var t=this.props,n=t.isOpen,a=t.disableClosingAction;n&&!a&&"HTML"!==e.target.tagName&&e.target.contains(this.refs.content)&&(e.stopPropagation(),this._close())},t.prototype._close=function(){this.props.closeModal()},t.prototype._open=function(){this.props.openModal()},t}(Uo.Component),Ai=Object(Ho.b)(function(e){var t=e.modal;return{name:t.name,data:t.props,disableClosingAction:t.disableClosingAction,isOpen:""!==t.name}},{closeModal:ci.a,openModal:ci.c})(ki),xi=n("./js/_modules/redux/stores/labs.js"),Di=function(e){function t(n){return M(this,t),F(this,e.call(this,n))}return U(t,e),t.prototype.render=function(){var e=this.props,t=e.id;if(!e.active[t])return null;var n=this._getLabComponent(t);return n?Bo.a.createElement(n,null):null},t.prototype._getLabComponent=function(e){var t=this.props.list.filter(function(t){return t.id===e});return t.length?t[0].component:null},t}(Uo.Component),Ri=Object(Ho.b)(function(e){var t=e.labs,n=e.user.USER.SETTING.site.labs||{};return{list:Object(xi.e)(t),active:Object(xi.d)(t,n)}})(Di),Ii=function(e){function t(n){G(this,t);var a=z(this,e.call(this,n));return a._onUserLoaded=a._onUserLoaded.bind(a),a._onNewInAppMessages=a._onNewInAppMessages.bind(a),a}return q(t,e),t.prototype.componentDidMount=function(){this.props.isAvailable&&ni.a.ready(ni.a.user.loaded,this._onUserLoaded)},t.prototype.componentWillReceiveProps=function(e){this._appboy&&this.props.userID!==e.userID&&this._appboy.changeUser(e.userID)},t.prototype.componentWillUnmount=function(){this._appboy&&this._appboy.destroy()},t.prototype.render=function(){return null},t.prototype._onUserLoaded=function(){var e=H(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e("node-modules-appboy-web-sdk-appboy-min").then(n.bind(null,"./node_modules/appboy-web-sdk/appboy.min.js"));case 2:this._appboy=e.sent,this._appboy.initialize(this.props.apiKey),this._appboy.changeUser(this.props.userID),this._appboy.subscribeToNewInAppMessages(this._onNewInAppMessages),this._appboy.openSession();case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.prototype._onNewInAppMessages=function(e){var t=e[0];return void 0===t.extras.OFFER_KEY?(this._appboy.display.showInAppMessage(t),e.slice(1)):(fi.a.call({method:"appboy.getOfferDataByKey",data:{OFFER_KEY:t.extras.OFFER_KEY},success:function(e){if(""!==e.name){var n=e.amount_currency,a=e.duration,r=t.header,o=t.message;n&&r&&(t.header=r.replace(/<PRICE>/g,n)),n&&o&&(t.message=o.replace(/<PRICE>/g,n)),a&&r&&(t.header=r.replace(/<DURATION>/g,a)),a&&o&&(t.message=o.replace(/<DURATION>/g,a)),this._appboy.display.showInAppMessage(t)}}}),e.slice(1))},t}(Uo.Component),Li=Object(Ho.b)(function(e){var t=e.user,n=e.appboy;return{userID:t.id,apiKey:n.apiKey,isAvailable:n.isAvailable}})(Ii),Mi=n("./js/_components/App/components/LoadingBar.js"),Fi=n("./js/_modules/EventDispatcher.js"),Ui=n("./js/_modules/user.js"),Bi=n("./js/_modules/userSetting.js"),Hi=n("./js/_modules/dom.js"),Gi=n("./js/_modules/link.js"),zi=n("./js/_components/Menu/store/menu.js"),qi=n("./js/_modules/SearchStore.js"),Yi=function(e){function t(n){W(this,t);var a=V(this,e.call(this,n));return a._focused=!1,a._request_suggest_timeout=null,a._handleBlur=a._handleBlur.bind(a),a._handleKeys=a._handleKeys.bind(a),a._handleEnterKey=a._handleEnterKey.bind(a),a._handleClick=a._handleClick.bind(a),a._triggerSearch=a._triggerSearch.bind(a),a._searchStoreChanged=a._searchStoreChanged.bind(a),a}return K(t,e),t.prototype.componentDidMount=function(){qi.a.onChange(this._searchStoreChanged)},t.prototype.componentWillUnmount=function(){clearTimeout(this._request_suggest_timeout),qi.a.offChange(this._searchStoreChanged),qi.a.cancel()},t.prototype.render=function(){var e=Object(di.a)("Rechercher"),t=ui()({search:!0,active:this.props.active});return Bo.a.createElement("div",{className:t,role:"search"},Bo.a.createElement("form",{onSubmit:this._triggerSearch,autoComplete:"off"},Bo.a.createElement("div",{className:"search-form"},Bo.a.createElement("label",{htmlFor:"menu_search",className:"sr-only"},e),Bo.a.createElement("input",{id:"menu_search",ref:"query",className:"search-control",type:"search",placeholder:e,onBlur:this._handleBlur,onChange:this._handleKeys,onKeyUp:this._handleEnterKey,onClick:this._handleClick}),Bo.a.createElement("button",{className:"search-submit",type:"submit"},Bo.a.createElement(vi.a,{name:"search",size:"16",srLabel:e})))))},t.prototype._searchStoreChanged=function(e){if("suggest"!==e)return!1;var t=Ko.a.isAllowed("business")&&!Ko.a.isAllowed("business_mod");""!==qi.a.getQuery()&&this._focused?ni.a.trigger(ni.a.menu.openPanel,{panel:"searchsuggest"}):this.props.isAuth&&ri.a.isLoaded&&this._focused&&!t?ni.a.trigger(ni.a.menu.openPanel,{panel:"searchhistory"}):ni.a.trigger(ni.a.menu.closeAllPanels)},t.prototype._handleKeys=function(){var e=this.refs.query.value;qi.a.setQuery(e),this._triggerSuggest()},t.prototype._handleEnterKey=function(e){13===e.keyCode&&(this.refs.query.blur(),this._triggerSearch())},t.prototype._handleClick=function(){var e=qi.a.getQuery(),t=Ko.a.isAllowed("business")&&!Ko.a.isAllowed("business_mod");e?ni.a.trigger(ni.a.menu.openPanel,{panel:"searchsuggest"}):this.props.isAuth&&!t&&ni.a.trigger(ni.a.menu.openPanel,{panel:"searchhistory"}),this._focused||(this.refs.query.select(),this._focused=!0)},t.prototype._handleBlur=function(){this._focused=!1},t.prototype._triggerSuggest=function(){var e=qi.a.getQuery();null!==this._request_suggest_timeout&&(clearTimeout(this._request_suggest_timeout),this._request_suggest_timeout=null),this._request_suggest_timeout=setTimeout(function(){qi.a.search(e)},this.props.request_suggest_wait_value)},t.prototype._triggerSearch=function(e){e&&e.preventDefault();var t=qi.a.getQuery();t&&(this.props.isAuth&&ri.a.addSearchHistory(t),Wo.a.set("__SEARCH_TAB","all"),ni.a.trigger(ni.a.menu.closeAllPanels),0===t.lastIndexOf("#",0)?(t=t.replace(/#/g,""),qo.c.navigate("/tags/"+encodeURIComponent(t),{force:!0})):qo.c.navigate("/search/"+encodeURIComponent(t),{force:!0}))},t}(Uo.PureComponent);Yi.defaultProps={request_suggest_wait_value:400};var Wi=Object(Ho.b)(function(e){return{isAuth:e.user.isAuth}})(Yi),Vi=n("./js/_components/Badge.js"),Ki=n("./js/_modules/notification.js"),Qi=n("./js/_modules/chromecast/index.js"),Xi=n("./js/_modules/player/PlayerMetrics.js"),$i=n("./js/_modules/navigation/index.js"),Ji=n("./js/_components/Player/store/config.js"),Zi=n("./js/_components/Player/store/control.js"),es=n("./js/_components/Player/store/music.js"),ts=n("./js/_components/Player/store/chromecast.js"),ns=n("./js/_components/Link.js"),as=Bo.a.createElement("div",{className:"player-track-title heading-2"},"???"),rs=function(e){function t(){return X(this,t),$(this,e.apply(this,arguments))}return J(t,e),t.prototype.render=function(){var e=this.props,t=e.playerType,n=e.mediaType,a=e.track,r=e.isBusinessNonMod,o=e.isBlindTestMode,i=e.title;if("ads"===t&&void 0!==window.sasAudioConfig)return this._renderAd();if(o&&n!==Yo.a.MEDIA_TYPE_TALK&&n!==Yo.a.MEDIA_TYPE_EXTERNAL&&n!==Yo.a.MEDIA_TYPE_LIVE_STREAM)return as;window.document.title=i;var s=Bo.a.createElement("span",null,i);if(!r){var l=Z(a,n);s=Bo.a.createElement(ns.a,{className:"player-track-link",to:l,onClick:function(e){return e.stopPropagation()}},i)}return Bo.a.createElement("div",{className:"player-track-title heading-2"},s)},t.prototype._renderAd=function(){var e={title:window.sasAudioConfig.text,link:decodeURIComponent(window.sasAudioConfig.url)},t=void 0;return t="http"===e.link.substr(0,4)?Bo.a.createElement("a",{className:"player-track-link",href:e.link,onClick:function(t){t.preventDefault(),Object($i.b)(e.link)}},e.title):Bo.a.createElement(ns.a,{className:"player-track-link",to:e.link,onClick:function(e){return e.stopPropagation()}},e.title),Bo.a.createElement("div",{className:"player-track-title heading-2 ads"},t)},t}(Uo.Component),os=Bo.a.createElement("div",null),is=function(e){function t(){return te(this,t),ne(this,e.apply(this,arguments))}return ae(t,e),t.prototype.render=function(){var e=this.props,t=e.track,n=e.playerType,a=e.mediaType,r=e.isFingerprinted,o=e.isBusinessNonMod,i=e.isBlindTestMode,s=e.artists;if("ads"===n)return os;if(a===Yo.a.MEDIA_TYPE_TALK)return Bo.a.createElement("div",{className:"player-track-artist heading-2-sub ellipsis"},Bo.a.createElement(ns.a,{className:"player-track-link",to:"/show/"+t.SHOW_ID,onClick:function(e){return e.stopPropagation()}},t.SHOW_NAME));if(a===Yo.a.MEDIA_TYPE_EXTERNAL||a===Yo.a.MEDIA_TYPE_LIVE_STREAM){var l=r?"/artist/"+t.ART_ID:null;return Bo.a.createElement("div",{className:"player-track-artist heading-2-sub ellipsis"},l?Bo.a.createElement(ns.a,{className:"player-track-link",to:l,onClick:function(e){return e.stopPropagation()}},t.ART_NAME):Bo.a.createElement("span",null,t.ART_NAME))}return Bo.a.createElement("div",{className:"player-track-artist heading-2-sub ellipsis"},Object(di.a)("par")," ",s.map(function(e,t){if(i)return"???";window.document.title+=" - "+e.ART_NAME+" - Deezer";var n="artist_"+e.ART_ID+t,a=Bo.a.createElement("span",{key:n},e.ART_NAME);if(!o){var r=0!==Number(e.ART_ID)?"/artist/"+e.ART_ID:null;a=Bo.a.createElement(ns.a,{className:"player-track-link",key:n,to:r,onClick:function(e){return e.stopPropagation()}},e.ART_NAME)}return[t>0?", ":"",a]}))},t}(Uo.Component),ss=n("./js/_modules/displayNotification.js"),ls=n("./js/_components/Dislike.js"),cs=n("./js/_components/Favorite.js"),ps=n("./js/_components/ContextMenu/Track.js"),us=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ds={"data-tooltip":1,"data-tooltip-delay":700,"data-tooltip-offset":2,"data-tooltip-gravity":"sw"},fs=Bo.a.createElement("span",{className:"icon icon-playlist-add"}),hs=function(e){function t(n){oe(this,t);var a=ie(this,e.call(this,n));return a._onDislikeClick=a._onDislikeClick.bind(a),a._onFavoriteClick=a._onFavoriteClick.bind(a),a._toggleLyrics=a._toggleLyrics.bind(a),a}return se(t,e),t.prototype.componentWillUnmount=function(){clearTimeout(this._nextSongTimeoutRef)},t.prototype.render=function(){var e=this.props,t=e.playerType,n=e.mediaType,a=e.isSponsored,r=e.isFingerprinted,o=e.isRadio,i=e.seek,s=[];return"ads"!==t&&(n===Yo.a.MEDIA_TYPE_SONG?(s.push(this._renderFavorite()),o&&s.unshift(this._renderDislike()),this.props.hasLyrics&&s.push(this._renderLyrics()),o||s.push(this._renderAddToPlaylist()),a&&s.push(this._renderOptions())):n===Yo.a.MEDIA_TYPE_LIVE_STREAM&&r&&s.push(this._renderFavorite(),this._renderAddToPlaylist())),Bo.a.createElement("div",{className:"player-actions clearfix",onClick:i},s.map(function(e,t){return[e,t===s.length-1]}))},t.prototype._renderFavorite=function(){var e=this.props,t=e.isSponsored,n=e.track,a=String(n.SNG_ID_ORIGIN||n.SNG_ID);return Bo.a.createElement("span",{key:"favorite",className:"action"},Bo.a.createElement(cs.a,{className:t?null:"icon-stack icon-stack-circle icon-32",type:"song",context:"player",tooltip:!0,tooltip_gravity:"sw",id:a,onClickCallback:this._onFavoriteClick}))},t.prototype._renderDislike=function(){var e=this.props,t=e.isSponsored,n=e.id;return Bo.a.createElement("span",{key:"dislike",className:"action"},Bo.a.createElement(ls.a,{className:t?null:"icon-stack icon-stack-circle icon-32",tooltip:!0,tooltip_gravity:"sw",id:n,onClickCallback:this._onDislikeClick}))},t.prototype._renderAddToPlaylist=function(){var e=this.props,t=e.track,n=e.isSponsored,a=e.id,r=e.context,o=ui()({"icon-32 icon-stack icon-stack-circle":!n}),i={position:"right",type:"track",forceShowPlaylists:!0,anchor:Bo.a.createElement("button",{className:"action-item-btn",type:"button"},Bo.a.createElement("span",{className:o},fs)),data:{SONG:t,PLAYLIST_ID:r.ID},id:Number(a),context:"player",srLabel:Object(di.a)("Ajouter à une playlist")};return Bo.a.createElement("span",us({className:"evt-out evt-over action",key:"add_playlist_"+a,"data-tooltip-fallback":Object(di.a)("Ajouter à une playlist")},ds),Bo.a.createElement(ps.a,i))},t.prototype._renderLyrics=function(){var e=this.props,t=e.id,n=e.lyricsOpened,a=e.isSponsored,r=ui()({"icon icon-lyrics":!0,disabled:Number(t)<0,active:n}),o=n?Object(di.a)("Masquer les paroles"):Object(di.a)("Afficher les paroles"),i=Object.assign({},ds,{title:o}),s=ui()({"icon-32 icon-stack icon-stack-circle":!a});return Bo.a.createElement("button",us({className:"action evt-over evt-out",type:"button",key:"lyrics_"+t,"aria-label":o},i,{onClick:this._toggleLyrics}),Bo.a.createElement("span",{className:s,id:"player-lyrics"},Bo.a.createElement("span",{className:r})))},t.prototype._renderOptions=function(){var e=this.props,t=e.track,n=e.id,a=e.isFavorite,r=e.isRadio,o=e.context,i={position:"right",type:"track",id:Number(n),data:{SONG:t,PLAYLIST_ID:o.ID},context:"player",isFavorite:a,isRadio:r};return Bo.a.createElement(ps.a,us({key:"contextMenu"},i))},t.prototype._onDislikeClick=function(){var e=this.props,t=e.skipRadioAllowed,n=e.next;if(!t){if(this._notifyAlreadyDisplayed)return;return this._notifyAlreadyDisplayed=!0,void Ki.b.display("flow_skip_push",{})}Object(ss.a)("dislike"),this._nextSongTimeoutRef=setTimeout(n,300)},t.prototype._onFavoriteClick=function(e,t,n){n&&Object(ss.a)("like")},t.prototype._toggleLyrics=function(e){e.preventDefault(),e.stopPropagation();var t=this.props,n=t.isChromecastLoading,a=t.lyricsOpened;n&&!a||ni.a.trigger(ni.a.menu.openLyricsPanel,{context:"player",toggle:!0})},t}(Uo.Component),ms=Object(Ho.b)(function(e){return{id:e.player.music.id,track:e.player.music.track,isSponsored:e.player.music.isSponsored,isFavorite:e.player.music.isFavorite,isFingerprinted:e.player.music.isFingerprinted,mediaType:e.player.music.mediaType,context:e.player.music.context,playerType:e.player.config.playerType,isRadio:e.player.config.isRadio,isFlow:e.player.config.isFlow,skipRadioAllowed:e.player.control.skipRadioAllowed,isChromecastLoading:e.player.chromecast.loading,lyricsOpened:"lyrics"===e.menu.activePanel,hasLyrics:Object(es.m)(e)}})(hs),ys=n("./js/_modules/utils.js"),bs=Bo.a.createElement("div",{className:"progress progress-background"}),gs=Bo.a.createElement("div",{className:"progress-seek-overlay"}),_s=function(e){function t(n){ce(this,t);var a=pe(this,e.call(this,n));return a._dragging=!1,a._seekOnKeyDown=a._seekOnKeyDown.bind(a),a}return ue(t,e),t.prototype.componentDidMount=function(){var e=this;Xo()(this.refs.seek).draggable({axis:"x",containment:"parent",start:function(){e._dragging=!0},stop:function(t,n){var a=e.props,r=a.playing,o=a.seek,i=a.cursorPosition;e._dragging=!1,r?o(null,n.position.left/t.target.parentNode.offsetWidth):Xo()(this).css("left",i)}})},t.prototype.componentDidUpdate=function(){Xo()(this.refs.seek).draggable(this.props.canSeek?"enable":"disable")},t.prototype.render=function(){var e=this.props,t=e.buffer,n=e.position,a=e.trackDuration,r=e.cursorPosition,o=e.seek,i=e.canSeek,s={};this._dragging||(s.left=r);var l=ui()({"player-progress":!0,"player-seek-disabled":!i});return Bo.a.createElement("div",{className:l},bs,Bo.a.createElement("div",{className:"progress progress-buffer",style:{width:t+"%"},onClick:o}),Bo.a.createElement("div",{className:"progress progress-seek",style:{width:r},onClick:o},gs),Bo.a.createElement("div",{className:"progress-handler",style:s,ref:"seek",role:"slider",tabIndex:i&&a?0:-1,"aria-live":"polite","aria-valuenow":n.toFixed(2),"aria-valuemin":"0","aria-valuemax":a,"aria-valuetext":Object(di.a)("%s sur %s",{sprintf:[Object(ys.E)(n),Object(ys.E)(a)]}),"aria-disabled":!i||!a,"aria-label":Object(di.a)("Aller à la position"),onKeyDown:this._seekOnKeyDown}),Bo.a.createElement("div",{className:"progress-time"},Object(ys.E)(n)),Bo.a.createElement("div",{className:"progress-length"},Object(ys.E)(a)))},t.prototype._seekOnKeyDown=function(e){var t=this.props,n=t.trackDuration,a=t.position;if(-1!==[33,34,35,36,37,38,39,40].indexOf(e.keyCode)){e.preventDefault();var r=a/n;37!==e.keyCode&&40!==e.keyCode||(r-=.01),34===e.keyCode&&(r-=.1),36===e.keyCode&&(r=0),39!==e.keyCode&&38!==e.keyCode||(r+=.01),33===e.keyCode&&(r+=.1),35===e.keyCode&&(r=.98),Yo.a.control.seek(Math.min(Math.max(r,0),1))}},t}(Uo.Component),vs=Object(Ho.b)(function(e){return{playing:e.player.control.playing,buffer:e.player.control.buffer,position:e.player.control.position,trackDuration:e.player.music.trackDuration,cursorPosition:Object(Zi.e)(e)}})(_s),Es=(n("./node_modules/isomorphic-fetch/fetch-npm-browserify.js"),function(e){function t(n){fe(this,t);var a=he(this,e.call(this,n));return a._onSponsoredClick=a._onSponsoredClick.bind(a),a}return me(t,e),t.prototype.render=function(){var e=this.props.sponsoredData;return e.CTA_URL?Bo.a.createElement("a",{className:"thumbnail-sponsored",href:e.CTA_URL,onClick:this._onSponsoredClick,rel:"noopener",target:"_blank"},Bo.a.createElement("span",{className:"thumbnail-sponsored-sticker","aria-live":"assertive"},Object(di.a)("SPONSORISÉ")),Bo.a.createElement("span",{className:"thumbnail-sponsored-link"},Bo.a.createElement("span",{className:"btn btn-sponsored btn-small btn-block link-animated"},Bo.a.createElement("span",{className:"label"},e.CTA_TEXT)))):Bo.a.createElement("div",{className:"thumbnail-sponsored"},Bo.a.createElement("span",{className:"thumbnail-sponsored-sticker","aria-assertive":"true"},Object(di.a)("SPONSORISÉ")))},t.prototype._onSponsoredClick=function(e){var t=this.props.sponsoredData,n=Wo.a.get("host_website_ssl");t.CTA_TRACKING_URL&&fetch(t.CTA_TRACKING_URL+Yo.a.getPosition().toFixed(0));var a=t.CTA_URL;-1!==a.indexOf(n)&&(e.preventDefault(),0===(a=a.replace(/^(https?):\/\//,"").replace(n,"")).length&&(a="/"),window.reactRouter.push(a))},t}(Uo.Component)),Os=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},js=function(e){function t(){return be(this,t),ge(this,e.apply(this,arguments))}return _e(t,e),t.prototype.render=function(){var e=this.props,t=e.cover,n=e.isBusinessNonMod,a=e.isSponsored,r=e.sponsoredData,o=e.canSeek,i=this.props,s=i.seek,l=i.next;return Bo.a.createElement("div",{className:"player-cover",id:"player-cover"},Bo.a.createElement("img",{src:t,height:"220",width:"220",alt:""}),a?null:this._renderTitle(),this._renderOptions(),a||n?null:Bo.a.createElement(ms,{seek:s,next:l}),Bo.a.createElement(vs,{seek:s,canSeek:o}),a?Bo.a.createElement(Es,{sponsoredData:r}):null,Bo.a.createElement("div",{className:"player-overlay",onClick:s}))},t.prototype._renderTitle=function(){var e=this.props,t=e.seek,n=e.trackTitle,a=e.trackArtists,r=a.map(function(e){return e.ART_NAME}).join(", ");return Bo.a.createElement("div",{className:"player-track",onClick:t},Bo.a.createElement("div",{"aria-hidden":"true"},Bo.a.createElement(rs,Os({},this.props,{title:n})),Bo.a.createElement(is,Os({},this.props,{artists:a}))),Bo.a.createElement("span",{className:"sr-only",id:"player-track-info"},Object(di.a)("Player")," - ",Bo.a.createElement("span",{"aria-live":"assertive"},n," ",Object(di.a)("par")," ",r)))},t.prototype._renderOptions=function(){if(!this._hasOptions())return null;var e=this.props,t=e.track,n=e.id,a=e.context,r=e.isFavorite,o=e.isRadio,i={className:"player-options",position:"right",type:"track",id:Number(n),data:{SONG:t,PLAYLIST_ID:a.ID},context:"player",isFavorite:r,isRadio:o};return Bo.a.createElement(ps.a,i)},t.prototype._hasOptions=function(){var e=this.props,t=e.playerType,n=e.mediaType,a=e.isFingerprinted,r=e.isSponsored;return!(e.isBusinessNonMod||"ads"===t||r||n!==Yo.a.MEDIA_TYPE_SONG&&!a)},t}(Uo.Component),Ts=Object(Ho.b)(function(e){return{id:e.player.music.id,track:e.player.music.track,isSponsored:e.player.music.isSponsored,isFavorite:e.player.music.isFavorite,isFingerprinted:e.player.music.isFingerprinted,mediaType:e.player.music.mediaType,context:e.player.music.context,sponsoredData:e.player.music.sponsoredData,playerType:e.player.config.playerType,isRadio:e.player.config.isRadio,isBusinessNonMod:e.player.config.isBusinessNonMod,isBlindTestMode:e.player.config.isBlindTestMode,playing:e.player.control.playing,cover:Object(es.e)(e),trackTitle:Object(es.l)(e),trackArtists:Object(es.j)(e)}})(js),ws=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ns=function(e){function t(){return Ee(this,t),Oe(this,e.apply(this,arguments))}return je(t,e),t.prototype.render=function(){var e=this.props,t=e.available,n=e.connecting,a=e.casting,r=ui()({"chromecast-icon":!0,hidden:!t}),o=ui()({"is-connecting":n,active:a});return Bo.a.createElement("button",{className:r,type:"button",title:"Chromecast","aria-label":"Chromecast",onClick:this._onClick},Bo.a.createElement(vi.a,{className:o,name:"chromecast",size:"20"}))},t.prototype._onClick=function(){Qi.a.requestSession()},t}(Uo.Component),Ss=Object(Ho.b)(function(e){var t=e.player;return ws({},t.chromecast)})(Ns),Cs=Bo.a.createElement(vi.a,{className:"is-volume-default",name:"volume",size:"18"}),Ps=Bo.a.createElement(vi.a,{className:"is-volume-min",name:"volume-min",size:"18"}),ks=Bo.a.createElement(vi.a,{className:"is-volume-off",name:"volume-off",size:"18"}),As=Bo.a.createElement("div",{className:"control control-volume-max disabled"},Bo.a.createElement(vi.a,{className:"is-volume-max",name:"volume",size:"18"})),xs=function(e){function t(n){we(this,t);var a=Ne(this,e.call(this,n));return a._setVolume=a._setVolume.bind(a),a._setVolumeOnKeyDown=a._setVolumeOnKeyDown.bind(a),a._onVolumeChange=a._onVolumeChange.bind(a),a}return Se(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props.isChromecastLoading;Xo()(this.refs.volume).draggable({axis:"x",containment:"parent",drag:function(n,a){t?n.preventDefault():Xo()(this).is(":visible")&&e._setVolume(a.position.left/(n.target.parentNode.offsetWidth-4))},stop:function(n,a){t?n.preventDefault():Xo()(this).is(":visible")?e._setVolume(a.position.left/(n.target.parentNode.offsetWidth-4)):Xo()(this).css("left",100*e.props.volume+"%")}})},t.prototype.componentDidUpdate=function(){Xo()(this.refs.volume).draggable("ads"!==this.props.playerType?"enable":"disable")},t.prototype.render=function(){var e=this.props,t=e.volume,n=e.isBusinessNonMod,a=e.mute,r=a?0:100*t,o=ui()({volume:!0,"volume-extended":n}),i=ui()({control:!0,"control-volume":!a,"control-volume-mute":a}),s=a?Object(di.a)("Remettre le son"):Object(di.a)("Couper le son");return Bo.a.createElement("li",{className:o},Bo.a.createElement("button",{className:i,type:"button",title:s,"aria-label":s,onClick:this._toggleMute},Cs,Ps,ks),Bo.a.createElement("span",{className:"volume-progress",onClick:this._onVolumeChange,ref:"volume_bar"},Bo.a.createElement("span",{className:"volume-progress-bar"},Bo.a.createElement("span",{className:"volume-bar",style:{width:r+"%"},onClick:this._onVolumeChange}),Bo.a.createElement("span",{className:"volume-handler",ref:"volume",role:"slider","aria-label":Object(di.a)("Volume"),"aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":r.toFixed(2),"aria-valuetext":Object(di.a)("Volume")+" - "+r.toFixed(2)+"%",onKeyDown:this._setVolumeOnKeyDown,style:{left:r+"%"}}))),As)},t.prototype._onVolumeChange=function(e){e.preventDefault(),e.stopPropagation();var t=(e.pageX-e.currentTarget.getBoundingClientRect().left)/this.refs.volume_bar.offsetWidth;this._setVolume(t)},t.prototype._setVolume=function(e){e=Math.max(Math.min(e,1),0),Yo.a.control.setVolume(e,!0)},t.prototype._setVolumeOnKeyDown=function(e){if(-1!==[33,34,35,36,37,38,39,40].indexOf(e.keyCode)){e.preventDefault();var t=this.props.volume;37!==e.keyCode&&40!==e.keyCode||(t-=.01),34===e.keyCode&&(t-=.1),36===e.keyCode&&(t=0),39!==e.keyCode&&38!==e.keyCode||(t+=.01),33===e.keyCode&&(t+=.1),35===e.keyCode&&(t=1),t=Math.max(Math.min(t,1),0),Yo.a.control.setVolume(t,!0)}},t.prototype._toggleMute=function(){Yo.a.control.mute(!Yo.a.isMuted())},t}(Uo.Component),Ds=n("./js/_components/hocs/TrackingComponent.js"),Rs=function(e){function t(n){Pe(this,t);var a=ke(this,e.call(this,n));return a._cycleRepeat=a._cycleRepeat.bind(a),a}return Ae(t,e),t.prototype.render=function(){var e=this.props.repeat,t=ui()({active:e>0}),n=Object(di.a)("Répéter");switch(e){case 0:n=Object(di.a)("Réécouter tous les titres");break;case 1:n=Object(di.a)("Réécouter ce titre");break;case 2:n=Object(di.a)("Désactiver la fonction Répéter")}return Bo.a.createElement("li",null,Bo.a.createElement("button",{className:"control control-repeat",type:"button",title:n,"aria-label":n,onClick:this._cycleRepeat},Bo.a.createElement(vi.a,{className:t,name:2===e?"repeat-one":"repeat",size:"18"})))},t.prototype._cycleRepeat=function(e){this.tracking("player_click",e.currentTarget);var t=2===this.props.repeat?0:this.props.repeat+1;this.tracking("player_click",e.currentTarget),Yo.a.control.setRepeat(t)},t}(Uo.Component),Is=Object(Ds.a)(Rs),Ls=function(e){function t(n){De(this,t);var a=Re(this,e.call(this,n));return a._toggleShuffle=a._toggleShuffle.bind(a),a}return Ie(t,e),t.prototype.render=function(){var e=this.props.shuffle,t=ui()({active:e}),n=e?Object(di.a)("Désactiver le mode aléatoire"):Object(di.a)("Activer le mode aléatoire");return Bo.a.createElement("li",null,Bo.a.createElement("button",{className:"control control-shuffle",type:"button",title:n,"aria-label":n,onClick:this._toggleShuffle},Bo.a.createElement(vi.a,{className:t,name:"shuffle",size:"18"})))},t.prototype._toggleShuffle=function(e){this.tracking("player_click",e.currentTarget),Yo.a.control.setShuffle(!this.props.shuffle)},t}(Uo.Component),Ms=Object(Ds.a)(Ls),Fs=Bo.a.createElement("li",{className:"chromecast"},Bo.a.createElement(Ss,null)),Us=Bo.a.createElement("li",{className:"invisible"}),Bs=function(e){function t(n){Me(this,t);var a=Fe(this,e.call(this,n));return a._toggleQueuelist=a._toggleQueuelist.bind(a),a}return Ue(t,e),t.prototype.render=function(){var e=this.props,t=e.isBusinessNonMod,n=e.isChromecastLoading,a=e.playerType,r=e.volume,o=e.mute,i=[];return t||(-1!==["mod","planning","campaign"].indexOf(a)?i=this._renderModControls():"radio"===a?i=this._renderRadioControls():"ads"===a&&(i=Bo.a.createElement("li",{className:"tag","aria-live":"assertive"},Bo.a.createElement("span",{className:"sticker sticker-small sticker-flow"},Object(di.a)("PUBLICITÉ"))))),Bo.a.createElement("ul",{className:"controls controls-options clearfix"},Bo.a.createElement(xs,{playerType:a,volume:r,mute:o,isBusinessNonMod:t,isChromecastLoading:n}),i,this._renderQueuelist())},t.prototype._renderModControls=function(){var e=this.props,t=e.playerType,n=e.mediaType,a=e.repeat,r=e.shuffle,o=e.isChromecastActive,i=-1!==["planning","campaign"].indexOf(t);if(!(n!==Yo.a.MEDIA_TYPE_SONG&&n!==Yo.a.MEDIA_TYPE_EXTERNAL||i)){var s=[Bo.a.createElement(Is,{key:"repeat-control",repeat:a})];return o||s.push(Bo.a.createElement(Ms,{key:"shuffle-control",shuffle:r})),s}return n!==Yo.a.MEDIA_TYPE_TALK||i?Us:Fs},t.prototype._renderRadioControls=function(){var e=this.props,t=e.mediaType,n=e.isFlow,a=e.isRadio,r=e.context,o=void 0;return t===Yo.a.MEDIA_TYPE_LIVE_STREAM?Bo.a.createElement("li",{className:"tag","aria-live":"assertive"},Bo.a.createElement("span",{className:"sticker sticker-small sticker-flow"},Object(di.a)("EN DIRECT"))):("up_next_artist"===r.TYPE?o=Object(di.a)("RECOMMANDÉ"):a&&(o=n?Object(di.a)("FLOW"):Object(di.a)("MIX")),Bo.a.createElement("li",{className:"tag","aria-live":"assertive"},Bo.a.createElement("span",{className:"sticker sticker-small sticker-flow"},o)))},t.prototype._renderQueuelist=function(){var e=this.props,t=e.mediaType,n=e.queuelistOpened,a=e.isChromecastLoading,r=Object(di.a)("File d'attente"),o=a||t===Yo.a.MEDIA_TYPE_LIVE_STREAM,i=ui()("control control-qlist",{disabled:o}),s=ui()({active:n});return Bo.a.createElement("li",null,Bo.a.createElement("button",{className:i,type:"button",disabled:o,title:r,"aria-label":r,onClick:this._toggleQueuelist},Bo.a.createElement(vi.a,{className:s,name:"qlist",size:"18"})))},t.prototype._toggleQueuelist=function(e){this.tracking("player_click",e.currentTarget),ni.a.trigger(ni.a.menu.togglePanel,{panel:"queuelist",currentTarget:e.currentTarget})},t}(Uo.Component),Hs=Object(Ho.b)(function(e){var t=e.player,n=e.menu;return{playerType:t.config.playerType,isBusinessNonMod:t.config.isBusinessNonMod,isFlow:t.config.isFlow,isRadio:t.config.isRadio,mediaType:t.music.mediaType,context:t.music.context,volume:t.control.volume,shuffle:t.control.shuffle,repeat:t.control.repeat,mute:t.control.mute,isChromecastActive:t.chromecast.active,isChromecastLoading:t.chromecast.loading,queuelistOpened:"queuelist"===n.activePanel}})(Object(Ds.a)(Bs)),Gs=n("./js/_modules/dzoffline.js"),zs=Bo.a.createElement(vi.a,{name:"play",size:"32"}),qs=function(e){function t(n){He(this,t);var a=Ge(this,e.call(this,n));return a._play=a._play.bind(a),a}return ze(t,e),t.prototype.render=function(){var e=this.props,t=e.mediaType,n=e.playing,a=e.paused,r=e.loading,o=e.canPause,i=e.isChromecastCasting,s=t===Yo.a.MEDIA_TYPE_LIVE_STREAM,l=s?Object(di.a)("Stop"):Object(di.a)("Pause"),c=n?l:Object(di.a)("Play");if(a&&!n||!a&&!n)return Bo.a.createElement("button",{className:"control control-play",type:"button",disabled:!o||r,"aria-label":c,title:c,onClick:this._play},i?Bo.a.createElement("span",{className:ui()({icon:!0,"icon-play":!r,"icon-loader":r,"icon-spin":r,"icon-32":r})}):zs);var p=s?Yo.a.control.stop:Yo.a.control.pause,u=s?"stop":"pause";return Bo.a.createElement("button",{type:"button",className:"control control-play",disabled:!o,"aria-label":c,title:l,onClick:function(){Xi.a.intent("pause"),p()}},Bo.a.createElement(vi.a,{name:u,size:"32"}))},t.prototype._play=function(){Wo.a.get("OFFLINE")?Gs.a.display():(Xi.a.intent("play"),Yo.a.control.play())},t}(Uo.Component),Ys=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ws=function(e){function t(){return Ye(this,t),We(this,e.apply(this,arguments))}return Ve(t,e),t.prototype.render=function(){var e=this.props,t=e.trackTitle,n=e.trackArtists,a=e.next;return Bo.a.createElement("div",{className:"player-sponsored-heading"},Bo.a.createElement("div",{className:"player-track"},Bo.a.createElement(rs,Ys({},this.props,{title:t})),Bo.a.createElement(is,Ys({},this.props,{artists:n}))),Bo.a.createElement(ms,{seek:function(){},next:a}))},t}(Uo.Component),Vs=Object(Ho.b)(function(e){return{track:e.player.music.track,mediaType:e.player.music.mediaType,isFingerprinted:e.player.music.isFingerprinted,isBusinessNonMod:e.player.config.isBusinessNonMod,isBlindTestMode:e.player.config.isBlindTestMode,playerType:e.player.config.playerType,trackTitle:Object(es.l)(e),trackArtists:Object(es.j)(e)}})(Ws),Ks=Bo.a.createElement(Hs,null),Qs=Bo.a.createElement(Ss,null),Xs=Bo.a.createElement(vi.a,{name:"prev",size:"20"}),$s=Bo.a.createElement(vi.a,{name:"prev-30",size:"20"}),Js=Bo.a.createElement(vi.a,{name:"next-30",size:"20"}),Zs=Bo.a.createElement(vi.a,{name:"next",size:"20"}),el=function(e){function t(n){Qe(this,t);var a=Xe(this,e.call(this,n));return a._skipForwards=a._skipForwards.bind(a),a._skipBackwards=a._skipBackwards.bind(a),a}return $e(t,e),t.prototype.render=function(){var e=this.props,t=e.isSponsored,n=e.isBusinessNonMod,a=e.mediaType,r=e.next;return Bo.a.createElement("div",{className:"player-controls"},t?Bo.a.createElement(Vs,{next:r}):null,Bo.a.createElement("ul",{className:"controls controls-main clearfix"},this._renderPrevious(),Bo.a.createElement("li",null,Bo.a.createElement(qs,this.props)),this._renderNext()),Ks,a===Yo.a.MEDIA_TYPE_SONG&&!n&&Qs)},t.prototype._renderPrevious=function(){var e=this.props,t=e.isBusinessNonMod,n=e.mediaType,a=Object(di.a)("Précédent"),r=[];return t||r.push(Bo.a.createElement("li",{key:"prev"},Bo.a.createElement("button",{className:"control control-prev",type:"button",disabled:!this.props.hasPrev,title:a,"aria-label":a,onClick:this._prev},Xs))),n===Yo.a.MEDIA_TYPE_TALK&&r.push(Bo.a.createElement("li",{key:"skip-backwards"},Bo.a.createElement("button",{className:"control control-prev-30",type:"button",title:Object(di.a)("Retour rapide de 30 secondes"),"aria-label":Object(di.a)("Retour rapide de 30 secondes"),onClick:this._skipBackwards},$s))),r},t.prototype._renderNext=function(){var e=this.props,t=e.isBusinessNonMod,n=e.mediaType,a=e.next,r=Object(di.a)("Suivant"),o=[];return n===Yo.a.MEDIA_TYPE_TALK&&o.push(Bo.a.createElement("li",{key:"skip-forwards"},Bo.a.createElement("button",{className:"control control-next-30",type:"button",title:Object(di.a)("Avance rapide de 30 secondes"),"aria-label":Object(di.a)("Avance rapide de 30 secondes"),onClick:this._skipForwards},Js))),t||o.push(Bo.a.createElement("li",{key:"next"},Bo.a.createElement("button",{className:"control control-next",type:"button",disabled:!this.props.hasNext,title:r,"aria-label":r,onClick:a},Zs))),o},t.prototype._prev=function(){Xi.a.intent("previous"),Yo.a.control.prevSong()},t.prototype._skipForwards=function(){var e=this.props,t=e.position,n=e.trackDuration,a=e.next,r=(t+30)/n;r>=1?a():Yo.a.control.seek(r)},t.prototype._skipBackwards=function(){var e=this.props,t=(e.position-30)/e.trackDuration;Yo.a.control.seek(t)},t}(Uo.Component),tl=Object(Ho.b)(function(e){return{isSponsored:e.player.music.isSponsored,mediaType:e.player.music.mediaType,trackDuration:e.player.music.trackDuration,position:e.player.control.position,playing:e.player.control.playing,paused:e.player.control.paused,loading:e.player.control.loading,isBusinessNonMod:e.player.config.isBusinessNonMod,isChromecastCasting:e.player.chromecast.casting,hasNext:Object(Zi.f)(e),hasPrev:Object(Zi.g)(e),canPause:Object(Zi.b)(e)}})(el),nl=function(e){function t(n){Ze(this,t);var a=et(this,e.call(this,n));return a.state={fading:!1},a._next=a._next.bind(a),a._seek=a._seek.bind(a),a._onFading=a._onFading.bind(a),a._onFinish=a._onFinish.bind(a),a._onTrackChange=a._onTrackChange.bind(a),a._onTrackRecognized=a._onTrackRecognized.bind(a),a._onChangePlayerType=a._onChangePlayerType.bind(a),a._onTracklistChange=a._onTracklistChange.bind(a),a._onToggleFavorite=a._onToggleFavorite.bind(a),a._onPlayingChange=a._onPlayingChange.bind(a),a._onPauseChange=a._onPauseChange.bind(a),a._onTracklistFinish=a._onTracklistFinish.bind(a),a._onPositionChange=a._onPositionChange.bind(a),a._onLoaded=a._onLoaded.bind(a),a._onTrackDurationChange=a._onTrackDurationChange.bind(a),a._onVolumeChange=a._onVolumeChange.bind(a),a._onToggleMute=a._onToggleMute.bind(a),a._onRepeatChange=a._onRepeatChange.bind(a),a._onSimultaneousAccess=a._onSimultaneousAccess.bind(a),a._onShuffleChange=a._onShuffleChange.bind(a),a._setAvailableStatus=a._setAvailableStatus.bind(a),a._setConnectingStatus=a._setConnectingStatus.bind(a),a._setCastingStatus=a._setCastingStatus.bind(a),a._setChromecastActiveState=a._setChromecastActiveState.bind(a),a}return tt(t,e),t.prototype.componentDidMount=function(){var e=this;this.props.initPlayer(),ni.a.ready(ni.a.user.userReady,this._onToggleFavorite),ni.a.subscribe(ni.a.player.displayCurrentSong,this._onTrackChange,"player"),ni.a.subscribe(ni.a.player.displayRecognizedTrack,this._onTrackRecognized,"player"),ni.a.subscribe(ni.a.player.changePlayerType,this._onChangePlayerType,"player"),ni.a.subscribe(ni.a.player.tracklist_changed,this._onTracklistChange,"player"),ni.a.subscribe(ni.a.user.addFavorite,this._onToggleFavorite,"player"),ni.a.subscribe(ni.a.user.deleteFavorite,this._onToggleFavorite,"player"),ni.a.subscribe(ni.a.player.playing,this._onPlayingChange,"player"),ni.a.subscribe(ni.a.player.paused,this._onPauseChange,"player"),ni.a.subscribe(ni.a.player.finishTrackList,this._onTracklistFinish,"player"),ni.a.subscribe(ni.a.player.position,this._onPositionChange,"player"),ni.a.subscribe(ni.a.player.pourcentLoaded,this._onLoaded,"player"),ni.a.subscribe(ni.a.player.duration,this._onTrackDurationChange,"player"),ni.a.subscribe(ni.a.player.volume_changed,this._onVolumeChange,"player"),ni.a.subscribe(ni.a.player.mute_changed,this._onToggleMute,"player"),ni.a.subscribe(ni.a.player.repeat_changed,this._onRepeatChange,"player"),ni.a.subscribe(ni.a.player.shuffle_changed,this._onShuffleChange,"player"),ni.a.subscribeOnce(ni.a.player.playerLoaded,function(){Yo.a.initRestriction(),Yo.a.restoreSetting(e.props.userSetting)}),ni.a.subscribe(ni.a.player.fading,this._onFading,"player"),ni.a.subscribe(ni.a.player.finish,this._onFinish,"player"),ni.a.subscribe(ni.a.live.simultaneousAccess,this._onSimultaneousAccess,"player"),ni.a.subscribe(ni.a.chromecast.available,this._setAvailableStatus,"player"),ni.a.subscribe(ni.a.chromecast.connecting,this._setConnectingStatus,"player"),ni.a.subscribe(ni.a.chromecast.casting,this._setCastingStatus,"player"),ni.a.subscribe(ni.a.chromecast.loading,this._setChromecastActiveState,"player"),ni.a.subscribe(ni.a.user.settingChanged,function(e,t){t.data&&t.data.site&&t.data.site.labs&&void 0!==t.data.site.labs.FirefoxHTML5&&$i.a.reload()})},t.prototype.componentWillUpdate=function(e){this.props.id!==e.id&&ni.a.trigger(ni.a.menu.contextMenuClose)},t.prototype.componentWillUnmount=function(){ni.a.unsubscribeAll("player")},t.prototype.render=function(){var e=this.props,t=e.track,n=e.showUpNextNotification,a=e.playerType;if(0===ei()(t)&&"ads"!==a)return null;var r=ui()({player:!0,"has-up-next":n});return Bo.a.createElement("article",{className:r,id:"player",role:"application","aria-labelledby":"player-track-info"},Bo.a.createElement(Ri,{id:ii.a.Notification}),Bo.a.createElement(Ts,{seek:this._seek,next:this._next,canSeek:this.props.canSeek}),Bo.a.createElement(tl,{next:this._next}))},t.prototype._onFading=function(){this.props.hasAudioAds&&null!==Yo.a.getAudioAds()||(this.setState({fading:!0}),Yo.a.control.nextSong(!0))},t.prototype._onFinish=function(){this.state.fading||Yo.a.control.nextSong(!0),this.setState({fading:!1})},t.prototype._onTrackChange=function(){this.props.updateTrack()},t.prototype._onTrackRecognized=function(e,t){t?this.props.updateRecognizedTrack({track:t}):this._onTrackChange()},t.prototype._onChangePlayerType=function(){this.props.updatePlayerType()},t.prototype._onTracklistChange=function(){this.props.updateTracklist(),ni.a.trigger(ni.a.list.deselectAll)},t.prototype._onToggleFavorite=function(e,t){(!t||"song"===t.type&&String(t.id)===this.props.id)&&this.props.updateFavorite()},t.prototype._onPlayingChange=function(e,t){this.props.setPlaying({playing:t})},t.prototype._onPauseChange=function(e,t){this.props.setPaused({paused:t})},t.prototype._onTracklistFinish=function(){this.props.setTracklistFinished()},t.prototype._onPositionChange=function(e,t){this.props.setPosition({position:t})},t.prototype._onLoaded=function(e,t){this.props.setBuffer({buffer:t})},t.prototype._onTrackDurationChange=function(e,t){this.props.setTrackDuration({trackDuration:t})},t.prototype._onVolumeChange=function(e,t){this.props.setVolume({volume:t/100})},t.prototype._onToggleMute=function(e,t){this.props.setMute({mute:t})},t.prototype._onRepeatChange=function(e,t){this.props.setRepeat({repeat:t})},t.prototype._onSimultaneousAccess=function(){var e=this.props,t=e.playing,n=e.playerType;t&&"ads"!==n&&(Yo.a.control.pause(),ti.a.open("/lightbox/limitation.php"))},t.prototype._onShuffleChange=function(e,t){this.props.setShuffle({shuffle:t}),ni.a.trigger(ni.a.list.deselectAll)},t.prototype._setChromecastActiveState=function(e,t){this.props.setLoading({loading:t}),this.props.setChromecastActiveState({loading:t,active:Qi.a.isActive(),chunksInfo:Qi.a.getChunksInfo()})},t.prototype._setAvailableStatus=function(e,t){this.props.setChromecastAvailableStatus({status:t,active:Qi.a.isActive(),chunksInfo:Qi.a.getChunksInfo()})},t.prototype._setConnectingStatus=function(e,t){this.props.setChromecastConnectingStatus({status:t,chunksInfo:Qi.a.getChunksInfo()})},t.prototype._setCastingStatus=function(e,t){this.props.setChromecastCastingStatus({status:t,active:Qi.a.isActive(),chunksInfo:Qi.a.getChunksInfo()})},t.prototype._seek=function(e,t){e&&(e.preventDefault(),e.stopPropagation()),this.props.canSeek&&("number"!=typeof t&&(t=e.pageX/e.currentTarget.parentNode.offsetWidth),Yo.a.control.seek(Math.min(Math.max(t,0),1)))},t.prototype._next=function(){Xi.a.intent("next"),this.props.skipRadioAllowed?Yo.a.control.nextSong():Ki.b.display("flow_skip_push",{})},t}(Uo.Component);nl.defaultProps={playerType:"",showUpNextNotification:!1};var al=Object(Ho.b)(function(e){return{id:e.player.music.id,track:e.player.music.track,skipRadioAllowed:e.player.control.skipRadioAllowed,playing:e.player.control.playing,playerType:e.player.config.playerType,userSetting:e.user.USER.SETTING,hasAudioAds:e.user.USER.OPTIONS.ads_audio,canSeek:Object(Zi.c)(e)}},{initPlayer:es.n,setPlaying:Zi.l,setPaused:Zi.k,setLoading:Zi.i,setTracklistFinished:Zi.p,setPosition:Zi.m,setBuffer:Zi.h,setTrackDuration:es.o,setVolume:Zi.q,setRepeat:Zi.n,setShuffle:Zi.o,setMute:Zi.j,updateFavorite:es.p,updateTrack:es.r,updateRecognizedTrack:es.q,updatePlayerType:Ji.updatePlayerType,updateTracklist:es.s,setChromecastActiveState:ts.b,setChromecastAvailableStatus:ts.c,setChromecastConnectingStatus:ts.e,setChromecastCastingStatus:ts.d})(nl),rl=n("./js/_components/Thumbnail/utils.js"),ol=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},il="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sl=Bo.a.createElement("span",{className:"sr-only"},"Deezer"),ll=Bo.a.createElement("div",{className:"nav-divider"}),cl=Bo.a.createElement("div",{className:"nav-divider"}),pl=Bo.a.createElement(vi.a,{name:"love",size:"16"}),ul=Bo.a.createElement(vi.a,{name:"playlist",size:"16"}),dl=Bo.a.createElement(vi.a,{name:"playlist",size:"16"}),fl=Bo.a.createElement(vi.a,{name:"playlist",size:"16"}),hl=Bo.a.createElement(vi.a,{name:"playlist",size:"16"}),ml=Bo.a.createElement(vi.a,{name:"album",size:"16"}),yl=Bo.a.createElement(vi.a,{name:"podcast",size:"16"}),bl=Bo.a.createElement(vi.a,{name:"audiobook",size:"16"}),gl=Bo.a.createElement(vi.a,{name:"time",size:"16"}),_l=Bo.a.createElement(vi.a,{name:"app",size:"16"}),vl=Bo.a.createElement(vi.a,{className:"animate-wobble-target",name:"chevron-right",size:"auto"}),El=Bo.a.createElement("div",{className:"nav-expand"},Bo.a.createElement(vi.a,{name:"chevron-down"})),Ol=Bo.a.createElement(vi.a,{name:"add"}),jl=function(e){function t(n){at(this,t);var a=rt(this,e.call(this,n));a._pages={home:{pattern:/^\/[a-z]{2}\/?$/i,selected:!1},businessRadioHome:{pattern:new RegExp("^/$|/planning","i"),selected:!1},plannings:{pattern:new RegExp("^/planning","i"),selected:!1},boxes:{pattern:new RegExp("^/boxes","i"),selected:!1},campaigns:{pattern:/^\/campaigns/i,selected:!1},feed:{pattern:/^\/feed?$/i,selected:!1},loved:{pattern:new RegExp("^/profile/"+a.props.userID+"/loved","i"),selected:!1},profile:{pattern:new RegExp("^/profile/"+a.props.userID+"[^0-9]*(/.*)?$","i"),pattern_not:new RegExp("^/profile/"+a.props.userID+"/loved","i"),selected:!1},explore:{pattern:/^\/explore/i,selected:!1},charts:{pattern:/^\/charts/i,selected:!1},mixes:{pattern:/^\/mixes\/?$/i,selected:!1},exclus:{pattern:/^\/exclus/i,selected:!1},pro:{pattern:/^\/pro\/?$/i,selected:!1},audiobooks:{pattern:/^\/app\/audiobooks/i,selected:!1},moods:{pattern:/^\/(moods)/i,selected:!1}},a._custo={active:!1,large:!1},a._updateNanoScroller=a._updateNanoScroller.bind(a),a._updateUnseenPlaylists=a._updateUnseenPlaylists.bind(a),a._updateUnseenNotifications=a._updateUnseenNotifications.bind(a),a._updatePicture=a._updatePicture.bind(a),a._onClosePanels=a._onClosePanels.bind(a),a._onClosePanelsByEsc=a._onClosePanelsByEsc.bind(a),a._onOpenPanel=a._onOpenPanel.bind(a),a._onTogglePanel=a._onTogglePanel.bind(a),a._onPlayerTypeChange=a._onPlayerTypeChange.bind(a),a._onBugReportClick=a._onBugReportClick.bind(a),a._openLyricsPanel=a._openLyricsPanel.bind(a),a._pageDisplayed=a._pageDisplayed.bind(a),a._onLinkClick=a._onLinkClick.bind(a),a._onOpenPanelClick=a._onOpenPanelClick.bind(a),a._onOpenModalClick=a._onOpenModalClick.bind(a);var r=Yo.a.getContext("TYPE");return a.state={pages:a._getPagesState(),panels:a._getPanelsState(),unseenPlaylistCount:0,unseenNotificationCount:0,userPicture:n.userPicture,showUpNextNotification:"up_next_artist"===r&&n.userHasUpNextTips,playerContextType:r},a}return ot(t,e),t.prototype.componentWillMount=function(){var e=this.props.userCusto;this._custo.active="object"===(void 0===e?"undefined":il(e))&&"object"===il(e.logos)&&"string"==typeof e.logos.logo_position&&""!==e.logos.header.trim(),this._custo.active&&(this._custo.position=e.logos.logo_position)},t.prototype.componentDidMount=function(){var e=this;this._onPageChanged(qo.c.getCurrentPath()),Xo()(this.refs.navigation).nanoScroller({tabIndex:-1,preventPageScrolling:!0}),Xo()(this.refs.navigation).on("transitionend",this._updateNanoScroller),document.addEventListener("keydown",this._onClosePanelsByEsc),ni.a.subscribe(ni.a.navigation.page_displayed,this._pageDisplayed,"menu"),ni.a.subscribe(ni.a.menu.closeAllPanels,this._onClosePanels,"menu"),ni.a.subscribe(ni.a.menu.openPanel,this._onOpenPanel,"menu"),ni.a.subscribe(ni.a.menu.togglePanel,this._onTogglePanel,"menu"),ni.a.subscribe(ni.a.menu.openLyricsPanel,this._openLyricsPanel,"menu"),ni.a.subscribe(ni.a.playlist.seen,this._updateUnseenPlaylists,"menu"),ni.a.subscribe(ni.a.user.updatePicture,this._updatePicture,"menu"),ni.a.subscribe(ni.a.player.changePlayerType,this._onPlayerTypeChange,"menu"),ni.a.subscribe(ni.a.live.notificationNew,this._updateUnseenNotifications,"menu"),ni.a.subscribe(ni.a.live.notificationRead,this._updateUnseenNotifications,"menu"),ni.a.subscribe(ni.a.live.messageNew,this._updateUnseenNotifications,"menu"),ni.a.subscribe(ni.a.live.messageRead,this._updateUnseenNotifications,"menu"),ni.a.ready(ni.a.user.userReady,function(){e._updateUnseenNotifications(),e._updateUnseenPlaylists()}),window.PLAYER_INIT.show_lyrics&&ni.a.trigger(ni.a.menu.openPanel,{panel:"lyrics"})},t.prototype.shouldComponentUpdate=function(e,t){var n=this;if(t.unseenPlaylistCount!==this.state.unseenPlaylistCount||t.unseenNotificationCount!==this.state.unseenNotificationCount||t.playerContextType!==this.state.playerContextType||t.userPicture!==this.state.userPicture)return!0;var a=void 0,r=void 0;return r=Object.keys(t.pages).some(function(e){return t.pages[e]!==n.state.pages[e]}),a=Object.keys(t.panels).some(function(e){return t.panels[e]!==n.state.panels[e]}),r||a},t.prototype.componentWillUnmount=function(){clearTimeout(this._updateUnseenPlaylistRef),Xo()(this.refs.navigation).off("transitionend",this._updateNanoScroller),ni.a.unsubscribeAll("menu"),document.removeEventListener("keydown",this._onClosePanelsByEsc)},t.isPanelOpen=function(e){return!!e&&(!!t._panels[e]&&t._panels[e].active)},t.prototype.render=function(){var e=Ko.a.isAllowed("employee_feature"),t=Ko.a.isAllowed("business"),n=Ko.a.isAllowed("business_mod"),a=Ko.a.isAllowed("business_box_owner"),r=Ko.a.isAllowed("business_box_manager"),o=t&&!n,i=this.state,s=i.panels,l=i.pages,c=i.unseenPlaylistCount,p=i.unseenNotificationCount,u=i.userPicture,d=i.showUpNextNotification,f=ui()({"sidebar-container":!0,"has-partner":this._custo.active&&"right"===this._custo.position,"has-partner-large":this._custo.active&&"bottom"===this._custo.position,"business-sidebar":t,"business-mod-sidebar":n}),h=this.props,m=h.userCusto,y=h.userID,b=h.userLang,g=h.userCanSubscribe,_=ui()({"nav nav-main":!0,"panel-opened":this._hasOpenPanel()}),v=ui()({nav:!0,"panel-opened":this._hasOpenPanel()}),E=ui()({logo:!0,"logo-deezer":!Ko.a.isAllowed("logo_uk"),"logo-deezer-uk":Ko.a.isAllowed("logo_uk")});return Bo.a.createElement("div",{className:f},Bo.a.createElement("header",{role:"banner",className:"brand"},Bo.a.createElement("h1",null,Bo.a.createElement(ns.a,{to:"/"+b+"/",lang:"en","data-type":"home",onClick:y>0?this._onLinkClick:function(){}},Bo.a.createElement("span",{className:E}),sl),this._custo.active?Bo.a.createElement("a",{className:"logo-partner",href:m.logos.logo_link,target:"_blank"},Bo.a.createElement("img",{className:"logo-partner-img",src:m.logos.header,alt:""})):"")),Bo.a.createElement("a",{className:"sr-only",href:"#main"},Object(di.a)("Accès direct au contenu principal")),Bo.a.createElement("a",{className:"sr-only",href:"#player"},Object(di.a)("Accès direct au player")),Bo.a.createElement(Wi,{active:"active-panel"===s.search}),Bo.a.createElement("nav",{className:"navigation nano",id:"menu_navigation",ref:"navigation",role:"navigation","aria-label":Object(di.a)("Menu principal")},Bo.a.createElement("div",{className:"nano-content"},Bo.a.createElement("ul",{className:_},o>0&&Bo.a.createElement("li",null,Bo.a.createElement(ns.a,{className:"nav-link "+l.businessRadioHome,to:"/"+b+"/","data-type":"plannings",onClick:this._onLinkClick},Object(di.a)("PLANNINGS"))),y>0&&!o&&Bo.a.createElement("li",null,Bo.a.createElement(ns.a,{className:"nav-link "+l.home,to:"/"+b+"/","data-type":"home",onClick:this._onLinkClick},Object(di.a)("ACCUEIL"))),!!n&&Bo.a.createElement("li",null,Bo.a.createElement(ns.a,{className:"nav-link "+l.plannings,to:"/plannings","data-type":"plannings",onClick:this._onLinkClick},Object(di.a)("PLANNINGS"))),!!t&&Bo.a.createElement("li",null,Bo.a.createElement(ns.a,{className:"nav-link "+l.campaigns,to:"/campaigns","data-type":"campaigns",onClick:this._onLinkClick},Object(di.a)("CAMPAGNES"))),!(!a&&!r)&&Bo.a.createElement("li",null,Bo.a.createElement(ns.a,{className:"nav-link "+l.boxes,to:"/boxes","data-type":"boxes",onClick:this._onLinkClick},Object(di.a)("BOXES"))),y>0&&!Ui.a.isKid()&&!o&&Bo.a.createElement("li",null,Bo.a.createElement(ns.a,{className:"nav-link "+l.feed,to:"/feed","data-type":"feed",onClick:this._onLinkClick},Object(di.a)("À ÉCOUTER"))),!!e&&Bo.a.createElement("li",null,Bo.a.createElement("button",{className:"nav-link ellipsis",type:"button",onClick:this._onBugReportClick},"REPORT A BUG"))),this._custo.active&&""!==m.tab_header.name?Bo.a.createElement("div",null,ll,Bo.a.createElement("ul",{className:"nav"},Bo.a.createElement("li",null,Bo.a.createElement(ns.a,{className:"nav-link "+l.exclus,to:"/"+m.tab_header.url,onClick:this._onLinkClick},m.tab_header.name)))):"",cl,y>0?Bo.a.createElement("ul",{className:v},Bo.a.createElement("li",{className:"profile"},Bo.a.createElement(ns.a,{className:"nav-link "+l.profile,"data-type":"profile",to:"/profile/"+y,onClick:this._onLinkClick},Bo.a.createElement("span",{className:"profile-picture"},Bo.a.createElement("img",{alt:"",id:"naboo_menu_collection_avatar",src:rl.a.getImageSrc("user",u,24,24)})),Ui.a.getMultiAccountOptions().ENABLED&&Ui.a.getMultiAccountOptions().PARENT?Bo.a.createElement("span",{className:"profile-username ellipsis",id:"naboo_menu_collection_user_name"},Ui.a.getDisplayName(!0)):Bo.a.createElement("span",{className:"profile-username ellipsis",id:"naboo_menu_collection_user_name"},Object(di.a)("Ma musique"))),Bo.a.createElement("button",{className:"profile-settings "+s.settings,type:"button","data-type":"settings",onClick:this._onOpenPanelClick},Bo.a.createElement(vi.a,{name:"settings",size:"16",srLabel:Object(di.a)("Paramètres")}))),g?Bo.a.createElement("li",{className:"subscribe"},this._renderABTestPushMobile()):"",o?"":Bo.a.createElement("li",null,Bo.a.createElement(ns.a,{className:"nav-link "+l.loved,"data-type":"loved",to:"/profile/"+y+"/loved",onClick:this._onLinkClick},pl,Object(di.a)("Coups de cœur"))),t?Bo.a.createElement("li",{id:"business-mixes-toggle"},Bo.a.createElement("button",{type:"button",className:"business-playlists-tips-highlight nav-link "+s.business_mixes,"data-type":"business_mixes",onClick:this._onOpenPanelClick},ul,Object(di.c)("Mix","Mix",{count:2}))):"",t?Bo.a.createElement("li",{id:"business-curated-panel-toggle"},Bo.a.createElement("button",{className:"business-playlists-tips-highlight nav-link "+s.business_curated_playlists,"data-type":"business_curated_playlists",type:"button",onClick:this._onOpenPanelClick},dl,Object(di.a)("Business Playlists"))):"",t?Bo.a.createElement("li",null,Bo.a.createElement("button",{className:"business-playlists-tips-highlight nav-link "+s.business_regular_playlists,"data-type":"business_regular_playlists",type:"button",onClick:this._onOpenPanelClick},fl,Object(di.a)("Sélection éditos"))):"",Bo.a.createElement("li",null,Bo.a.createElement("button",{className:"nav-link "+s.playlists,"data-type":"playlists",type:"button",onClick:this._onOpenPanelClick},hl,Object(di.a)("Playlists"),Bo.a.createElement(Vi.a,{counter:c}))),Bo.a.createElement("li",null,Bo.a.createElement("button",{className:"nav-link "+s.albums,"data-type":"albums",type:"button",onClick:this._onOpenPanelClick},ml,Object(di.a)("Albums"))),!o&&Ko.a.isAllowed("talk")?Bo.a.createElement("li",null,Bo.a.createElement("button",{className:"nav-link "+s.shows,"data-type":"shows",type:"button",onClick:this._onOpenPanelClick},yl,Object(di.a)("Podcasts"))):"",!o&&Ko.a.isAllowed("audiobook")?Bo.a.createElement("li",null,Bo.a.createElement("button",{className:"nav-link "+s.audiobooks,"data-type":"audiobooks",type:"button",onClick:this._onOpenPanelClick},bl,Object(di.a)("Livres audio"))):"",o?null:Bo.a.createElement("li",null,Bo.a.createElement("button",{className:"nav-link "+s.notifications,"data-type":"notifications",type:"button",onClick:this._onOpenPanelClick},gl,Object(di.a)("Activité"),Bo.a.createElement(Vi.a,{counter:p}))),t?"":Bo.a.createElement("li",null,Bo.a.createElement("button",{className:"nav-link "+s.apps,"data-type":"apps",type:"button",onClick:this._onOpenPanelClick},_l,Object(di.a)("Applications")))):Bo.a.createElement("div",{className:"unlogged"},Bo.a.createElement("button",{className:"btn btn-primary btn-block evt-click","data-register":"1",type:"button"},Bo.a.createElement("span",{className:"label"},Object(di.a)("Inscription"))),Bo.a.createElement("button",{className:"btn btn-inverse btn-block evt-click","data-login":"1",type:"button"},Bo.a.createElement("span",{className:"label"},Object(di.a)("Connexion"))),Bo.a.createElement("div",{className:"divider"},Bo.a.createElement("span",{className:"or"},Object(di.a)("ou"))),Bo.a.createElement("a",{className:"btn btn-discover btn-block animate-wobble","data-type":"discovery",href:"/company",target:"_blank",onClick:this._onLinkClick},Bo.a.createElement("span",{className:"label"},Object(di.a)("Découvrir Deezer")),vl))),El),Bo.a.createElement(al,{showUpNextNotification:d}),d?this._renderUpNextNotification():null)},t.prototype._renderUpNextNotification=function(){return Bo.a.createElement("div",{className:"popover player-upnext-notification"},Object(di.a)("Recommandations activées"))},t.prototype._renderABTestPushMobile=function(){var e=this.props,t=e.userUpgrade,n=e.userSentToMobile,a=void 0!==t.offer?t.offer.duration:0,r=void 0!==n.option?n.option:"default";return a>0&&"A"===r?Bo.a.createElement("button",{className:"btn btn-primary btn-block","data-modal":"/lightbox/push_mobile?context=button_menu",type:"button",onClick:this._onOpenModalClick},Bo.a.createElement("span",{className:"label"},Object(di.c)("%s JOUR OFFERT","%s JOURS OFFERTS",{count:a,sprintf:[a]}))):Bo.a.createElement(ns.a,{className:"btn btn-primary btn-block","data-type":"offers_subscribe",to:"/offers",target:"_blank",onClick:this._onLinkClick},Ol,Bo.a.createElement("span",{className:"label"},Object(di.a)("S'ABONNER")))},t.prototype._onLinkClick=function(e){this.tracking("menu_click",e.currentTarget),ni.a.trigger(ni.a.menu.closeAllPanels)},t.prototype._onOpenPanelClick=function(e){e.preventDefault(),e.stopPropagation(),this.tracking("menu_click",e.currentTarget);var t=Hi.a.dataset(e.currentTarget,"type");void 0!==t&&ni.a.trigger(ni.a.menu.togglePanel,{panel:t,currentTarget:e.currentTarget})},t.prototype._onOpenModalClick=function(e){e.preventDefault(),e.stopPropagation(),this.tracking("menu_click",e.currentTarget);var t=Hi.a.dataset(e.currentTarget,"modal");void 0!==t&&ti.a.open(t)},t.prototype._onBugReportClick=function(e){e.preventDefault();var t=Wo.a.get("ATL_JQ_SHOW_DIALOG");"function"==typeof t&&t()},t.prototype._onClosePanelsByEsc=function(e){void 0!==e.keyCode&&27!==e.keyCode||ni.a.trigger(ni.a.menu.closeAllPanels,!0)},t.prototype._onClosePanels=function(){for(var e in t._panels)t._panels.hasOwnProperty(e)&&(t._panels[e].active=!1);var n=this.state.showUpNextNotification;n&&(Bi.a.set({tips:{up_next:!1}}),n=!1),this.props.setActivePanel({panel:null}),this.setState({panels:this._getPanelsState(),showUpNextNotification:n})},t.prototype._onOpenPanel=function(e,n){var a=n.panel;if(!t.isPanelOpen(a)){for(var r in t._panels)t._panels.hasOwnProperty(r)&&(t._panels[r].active=a===r);var o=this.state.showUpNextNotification;o&&(Bi.a.set({tips:{up_next:!1}}),o=!1),this.props.setActivePanel({panel:a}),this.setState({panels:this._getPanelsState(),showUpNextNotification:o})}},t.prototype._onTogglePanel=function(e,n){t.isPanelOpen(n.panel)?ni.a.trigger(ni.a.menu.closeAllPanels):ni.a.trigger(ni.a.menu.openPanel,n)},t.prototype._onPageChanged=function(e){var t=void 0;for(var n in this._pages)this._pages.hasOwnProperty(n)&&(t=(t=!0)&&this._pages[n].pattern.test(e),void 0!==this._pages[n].pattern_not&&(t=t&&!this._pages[n].pattern_not.test(e)),this._pages[n].selected=t);this.setState({pages:this._getPagesState()})},t.prototype._onPlayerTypeChange=function(){var e=Yo.a.getContext("TYPE");this.setState({playerContextType:e,showUpNextNotification:"up_next_artist"===e&&this.props.userHasUpNextTips})},t.prototype._openLyricsPanel=function(e,t){if("ads"!==Yo.a.getPlayerType()){var n=t;if(t.data&&!t.data.SONG&&(n=ol({},t,{data:{SONG:t.data}})),"player"===t.context)t.toggle?ni.a.trigger(ni.a.menu.togglePanel,{panel:"lyrics",currentTarget:e.currentTarget}):ni.a.trigger(ni.a.menu.openPanel,{panel:"lyrics",currentTarget:e.currentTarget});else if(Yo.a.isRadio())Go.f.push(Object(Gi.a)("/track/"+n.data.SONG.SNG_ID)),ni.a.trigger(ni.a.menu.closeAllPanels);else{var a=Yo.a.getTrackList().findIndex(function(e){return e.SNG_ID_ORIGIN?e.SNG_ID_ORIGIN===n.data.SONG.SNG_ID_ORIGIN:e.SNG_ID===n.data.SONG.SNG_ID});a>-1?Yo.a.getIndexSong()===a?ni.a.trigger(ni.a.menu.openPanel,{panel:"lyrics",currentTarget:e.currentTarget}):(ni.a.subscribeOnce(ni.a.player.displayCurrentSong,function(){ni.a.trigger(ni.a.menu.openPanel,{panel:"lyrics",currentTarget:e.currentTarget})}),Yo.a.playTrackAtIndex(a)):(ni.a.subscribeOnce(ni.a.player.tracklist_changed,function(){Yo.a.control.nextSong(),ni.a.trigger(ni.a.menu.openPanel,{panel:"lyrics",currentTarget:e.currentTarget})}),Yo.a.play({id:n.id,context:n.listenContext,type:"track",radio:!1,addNext:!0}))}ni.a.trigger(ni.a.menu.contextMenuClose)}},t.prototype._updateUnseenPlaylists=function(){var e=this;this._updateUnseenPlaylistRef=setTimeout(function(){e.setState({unseenPlaylistCount:ri.a.getUnseenPlaylistCount()})},0)},t.prototype._updateUnseenNotifications=function(){this.setState({unseenNotificationCount:ri.a.getNotificationCount()+ri.a.getMessageCount()})},t.prototype._updateNanoScroller=function(){Xo()(this.refs.navigation).nanoScroller()},t.prototype._updatePicture=function(e,t){this.setState({userPicture:t.md5})},t.prototype._hasOpenPanel=function(){for(var e in t._panels)if(t._panels.hasOwnProperty(e)&&!0===t._panels[e].active)return!0;return!1},t.prototype._getPagesState=function(){var e={};for(var t in this._pages)this._pages.hasOwnProperty(t)&&(e[t]=!0===this._pages[t].selected?"active-link":"");return e},t.prototype._getPanelsState=function(){var e={};for(var n in t._panels)t._panels.hasOwnProperty(n)&&(e[n]=!0===t._panels[n].active?"active-panel":"");return e},t.prototype._pageDisplayed=function(e,t){this._onPageChanged(t?t.path:qo.c.getCurrentPath()),this._hasOpenPanel()&&ni.a.trigger(ni.a.menu.closeAllPanels)},t}(Uo.Component);jl.defaultProps={userHasUpNextTips:!1,userUpgrade:{},userSentToMobile:{}},jl._panels={searchhistory:{active:!1},searchsuggest:{active:!1},playlists:{active:!1},business_regular_playlists:{active:!1},business_curated_playlists:{active:!1},business_mixes:{active:!1},albums:{active:!1},shows:{active:!1},audiobooks:{active:!1},loved:{active:!1},apps:{active:!1},queuelist:{active:!1},settings:{active:!1},lyrics:{active:!1},notifications:{active:!1}};var Tl=Object(Ho.b)(function(e){var t=e.user;return{userID:t.id,userPicture:t.USER.USER_PICTURE,userHasUpNextTips:t.USER.SETTING.tips&&t.USER.SETTING.tips.up_next,userCusto:t.CUSTO,userLang:t.SETTING_LANG,userCanSubscribe:t.USER.OPTIONS.can_subscribe,userUpgrade:t.USER.OPTIONS.upgrade,userSentToMobile:t.USER.ABTEST.abtest_senttomobile_oldreg}},{setActivePanel:zi.b})(Object(Ds.a)(jl)),wl=n("./js/_components/TagList.js"),Nl=n("./js/_components/List/index.js"),Sl=Bo.a.createElement("span",{className:"icon icon-arrow-top-left pull-left"}),Cl=function(e){function t(n){st(this,t);var a=lt(this,e.call(this,n));return a._onViewAll=a._onViewAll.bind(a),a.state={history:n.history},a}return ct(t,e),t.prototype.render=function(){var e=this;if(this._isHistoryEmpty())return null;var t=[];return this.state.history.map(function(n,a){var r=[],o=null,i="query_"+n.query+"_"+a;null!==n.result&&(n.result.type&&n.result.type===Vo.a.Channel&&(n.result.type="channelCard"),r.push(n.result),o=Bo.a.createElement(Nl.a,{data:r,displayAdd:!0,context:"history_"+r[0].__TYPE__})),t.push(Bo.a.createElement("li",{key:i},Bo.a.createElement("a",{className:"nano-card-link heading-4 ellipsis",onClick:e._onViewAll,"data-type":"query","data-query":n.query,"data-index":a},Sl,e._getQueryTitle(n.query)),o))}),Bo.a.createElement("ul",{className:"nano-card-list search-history"},t)},t.prototype._onViewAll=function(e){this.tracking("panel_click",e.currentTarget);var t=e.currentTarget.getAttribute("data-query");ni.a.trigger(ni.a.menu.closeAllPanels),qo.c.navigate("/search/"+encodeURIComponent(t))},t.prototype._isHistoryEmpty=function(){return!(this.state.history&&this.state.history.length)},t.prototype._getQueryTitle=function(e){return e?0===e.indexOf("+")&&e.length>1?e.substr(1,e.length):e:null},t}(Uo.Component),Pl=Object(Ds.a)(Cl),kl=n("./js/_components/hocs/PanelComponent.js"),Al=n("./js/_components/hocs/PanelScrollComponent.js"),xl=Bo.a.createElement("span",{className:"icon icon-arrow-top-left pull-left"}),Dl=function(e){function t(n){ut(this,t);var a=dt(this,e.call(this,n));return a._onViewAll=a._onViewAll.bind(a),a}return ft(t,e),t.prototype.render=function(){var e=this;if(this._isSuggestionEmpty())return null;var t=this.props.suggestion.map(function(t,n){var a=t.REVISED_QUERY;return Bo.a.createElement("li",{key:"query_"+a},Bo.a.createElement(ns.a,{className:"nano-card-link heading-4 ellipsis",to:"/search/"+encodeURIComponent(a),onClick:e._onViewAll,"data-type":"query","data-query":a,"data-index":n},xl,a))});return Bo.a.createElement("ul",{className:"nano-card-list search-suggestion"},t)},t.prototype._onViewAll=function(e){this.tracking("panel_click",e.currentTarget);var t=e.currentTarget.getAttribute("data-query");ni.a.trigger(ni.a.menu.closeAllPanels),0!==this.props.userID&&ri.a.addSearchHistory(t)},t.prototype._isSuggestionEmpty=function(){return!(this.props.suggestion&&this.props.suggestion.length)},t}(Uo.Component);Dl.defaultProps={suggestion:[]};var Rl=Object(Ho.b)(function(e){return{userID:e.user.id}})(Object(Ds.a)(Dl)),Il=Bo.a.createElement("div",{className:"placeholders-img nocontent"}),Ll=function(e){function t(n){mt(this,t);var a=yt(this,e.call(this,n));return a.panel_name="searchsuggest",a.scrollbar={ref:"nano",shouldUpdate:function(e,t){return t.suggest!==a.state.suggest}},a._onSearchStoreChange=a._onSearchStoreChange.bind(a),a._onHistoryChange=a._onHistoryChange.bind(a),a._onSuggestionClick=a._onSuggestionClick.bind(a),a._onSearchWithoutRevision=a._onSearchWithoutRevision.bind(a),a.state={suggest:qi.a.getResults(),history:ri.a.data.SEARCH_HISTORY?ri.a.data.SEARCH_HISTORY.data:[]},a}return bt(t,e),t.prototype.componentDidMount=function(){qi.a.onChange(this._onSearchStoreChange),ni.a.subscribe(ni.a.user.updateSearchHistory,this._onHistoryChange)},t.prototype.componentWillUnmount=function(){qi.a.offChange(this._onSearchStoreChange),qi.a.cancel(),ni.a.unsubscribe(ni.a.user.updateSearchHistory,this._onHistoryChange)},t.prototype.render=function(){var e=Ko.a.isAllowed("business")&&!Ko.a.isAllowed("business_mod"),t=ui()({"heading-2":!0,"link-animated icon-right":!this._isSuggestEmpty()&&!e}),n=ui()({"panel-header":!0,"panel-header-link":!e});return this.renderPanel(Bo.a.createElement("div",{className:"panel-search-suggest"},Bo.a.createElement("div",{className:n,onClick:this._onViewAllClick.bind(this,"all")},Bo.a.createElement("div",{className:"panel-headings"},Bo.a.createElement("h2",{className:t},Object(di.a)("Résultats")))),this.renderScrollbar({"panel-body":!0},Bo.a.createElement("div",null,this._renderContent()))))},t.prototype._renderPlaceholder=function(){return Bo.a.createElement("div",{key:"no-result-placeholder"},Il,Bo.a.createElement("div",{className:"placeholders-title"},Object(di.a)("Aucun résultat.")))},t.prototype._renderContent=function(){var e=[],t=this.state,n=t.history,a=t.suggest,r=Ko.a.isAllowed("business")&&!Ko.a.isAllowed("business_mod");if(this._isSuggestEmpty()){e.push(this._renderPlaceholder());var o=a&&a.ALTERNATIVE_QUERIES&&a.ALTERNATIVE_QUERIES.length,i=a&&a.RELATED_CONTENT&&a.RELATED_CONTENT.length;if(o||i){if(e.push(Bo.a.createElement("h2",{key:"suggestion-title",className:"panel-heading-sub heading-4 heading-bordered"},Object(di.a)("Recommandé"))),o&&e.push(Bo.a.createElement(Rl,{key:"suggestion-list",suggestion:a.ALTERNATIVE_QUERIES})),i){var s=a.RELATED_CONTENT[0].__TYPE__,l=Ko.a.isAllowed("business")&&("playlist"===s||"album"===s||"radio"===s);e.push(Bo.a.createElement(Nl.a,{key:"suggest_list_RELATED_CONTENT",data:a.RELATED_CONTENT,displayAdd:!0,displayFavorite:!0,displayType:this._getDisplayType(s),draggable:l,thumbnailRounded:"artist"===s||"user"===s,onClick:this._onSuggestionClick.bind(this,a.QUERY,"","alternative"),type:s,context:"suggest_"+s}))}}else{var c=ri.a.data.USER_TAGS?ri.a.data.USER_TAGS.data:null;c&&c.length&&!r&&(e.push(Bo.a.createElement("h2",{key:"user-tag-title",className:"panel-heading-sub heading-4 heading-bordered"},Object(di.a)("Tags"))),e.push(Bo.a.createElement(wl.a,{key:"user-tag-list",tags:c,overflowHidden:!1}))),n.length&&(e.push(Bo.a.createElement("h2",{key:"history-title",className:"panel-heading-sub heading-4 heading-bordered"},Object(di.a)("Dernières recherches"))),e.push(Bo.a.createElement(Pl,{key:"history-list",history:n})))}return e}if(r||e.push(Bo.a.createElement(wl.a,{key:"tag-list",max:5,tags:a.TAG,overflowHidden:!1})),a.REVISED_QUERY&&a.QUERY!==a.REVISED_QUERY){var p="true"===a.AUTOCORRECT?a.REVISED_QUERY:a.QUERY,u="true"===a.AUTOCORRECT?a.QUERY:a.REVISED_QUERY,d="true"===a.AUTOCORRECT?Object(di.a)("Essayez quand même avec"):Object(di.a)("Afficher les résultats pour :");e.push(Bo.a.createElement("div",{key:"panel-search-revised-query"},Bo.a.createElement("h2",{className:"panel-heading heading-3-sub"},Bo.a.createElement("p",null,Object(di.a)("Résultats de recherche pour %s",{sprintf:[p]})),Bo.a.createElement("p",{className:"heading-sub-search"},d+" ",Bo.a.createElement("a",{className:"link-primary",onClick:this._onSearchWithoutRevision.bind(this,p,u)},u)))))}var f=a.TOP_RESULT,h=r?{}:{TOP_RESULT:f&&f.length>0?{title:Object(di.a)("Meilleur résultat"),context:"best_result",data:f,type:f[0].__TYPE__}:null};h=Object.assign(h,{ARTIST:{title:Object(di.a)("Artistes"),view_more_wording:Object(di.a)("Afficher tous les artistes"),data:a.ARTIST,type:"artist"},ALBUM:{title:Object(di.a)("Albums"),view_more_wording:Object(di.a)("Afficher tous les albums"),data:a.ALBUM,type:"album"},TRACK:{title:Object(di.a)("Titres"),view_more_wording:Object(di.a)("Afficher tous les titres"),data:a.TRACK,type:"track"},PLAYLIST:{title:Object(di.a)("Playlists"),view_more_wording:Object(di.a)("Afficher toutes les playlists"),data:a.PLAYLIST,type:"playlist"},RADIO:{title:Object(di.a)("Mix"),view_more_wording:Object(di.a)("Afficher tous les mix"),data:a.RADIO,type:"radio"},CHANNEL:Ko.a.isAllowed("search_channel")?{title:Object(di.a)("Univers"),view_more_wording:Object(di.a)("Afficher tous les Univers"),data:a.CHANNEL,type:"channelCard"}:null,SHOW:{title:Object(di.a)("Podcasts"),view_more_wording:Object(di.a)("Afficher tous les podcasts"),data:a.SHOW,type:"show"},LIVESTREAM:Ko.a.isAllowed("search_livestream")?{title:Object(di.a)("Radios"),view_more_wording:Object(di.a)("Afficher toutes les radios"),data:a.LIVESTREAM,type:"livestream"}:null,USER:Ko.a.isAllowed("search_users")?{title:Object(di.a)("Profils"),view_more_wording:Object(di.a)("Afficher tous les profils"),data:a.USER,type:"user"}:null});for(var m in h)if(h.hasOwnProperty(m)&&null!==h[m]){var y=h[m].data;if(y&&y.length){e.push(Bo.a.createElement("h2",{className:"panel-heading-sub heading-4",key:"suggest_title_"+m},h[m].title));var b=y.length>2&&!r?y.slice(0,2):y,g="TOP_RESULT"===m?this._getDisplayType(h[m].type):"",_=Ko.a.isAllowed("business")&&("PLAYLIST"===m||"ALBUM"===m||"RADIO"===m),v=h[m].context||"default",E=a.AUTOCORRECT?a.REVISED_QUERY:a.QUERY,O=a.AUTOCORRECT?a.QUERY:a.REVISED_QUERY;e.push(Bo.a.createElement(Nl.a,{key:"suggest_list_"+m,data:b,displayAdd:!0,displayFavorite:!0,displayType:g,draggable:_,options:["label","name"],thumbnailRounded:"artist"===h[m].type||"user"===h[m].type,onClick:this._onSuggestionClick.bind(this,E,O,v),type:h[m].type,context:"suggest_"+h[m].type})),y.length>2&&!r&&e.push(Bo.a.createElement("button",{key:"viewmore_"+m,onClick:this._onViewAllClick.bind(this,m),className:"btn btn-block btn-view-more",type:"button","data-type":"view_all"},Bo.a.createElement("span",{className:"label"},h[m].view_more_wording)))}}return e},t.prototype._onSearchStoreChange=function(e){if("suggest"===e){var t=qi.a.getResults();t&&this.setState({suggest:t})}},t.prototype._onSuggestionClick=function(e,t,n,a,r,o){this.props.isAuth&&ri.a.addSearchHistory(e,t,n,r,o)},t.prototype._onViewAllClick=function(e,t){if(Ko.a.isAllowed("business")&&!Ko.a.isAllowed("business_mod"))return!1;this.tracking("panel_click",t.currentTarget);var n=qi.a.getQuery(),a=window.reactRouter;if(this.props.isAuth&&ri.a.addSearchHistory(n),ni.a.trigger(ni.a.menu.closeAllPanels),Wo.a.set("__SEARCH_TAB",e&&"TRACK"!==e?e.toLowerCase():"all"),0===n.lastIndexOf("#",0))return a.push("/tags/"+encodeURIComponent(n.replace(/#/g,"")));var r="/search/"+encodeURIComponent(n),o=Wo.a.get("__SEARCH_TAB");return"all"!==o&&(r+="/"+o),a.push(r)},t.prototype._onHistoryChange=function(){this.setState({history:ri.a.data.SEARCH_HISTORY})},t.prototype._onSearchWithoutRevision=function(e,t){var n="+"+t;this.props.isAuth&&ri.a.addSearchHistory(e,t,"force_no_correction"),qo.c.navigate("/search/"+encodeURIComponent(n),{force:!0})},t.prototype._isSuggestEmpty=function(){var e=this.state.suggest;return!(null!==e&&(e.TOP_RESULT&&0!==e.TOP_RESULT.length||e.ARTIST&&0!==e.ARTIST.length||e.ALBUM&&0!==e.ALBUM.length||e.TRACK&&0!==e.TRACK.length||e.PLAYLIST&&0!==e.PLAYLIST.length||e.CHANNEL&&0!==e.CHANNEL.length||e.RADIO&&0!==e.RADIO.length||e.SHOW&&0!==e.SHOW.length||e.LIVESTREAM&&0!==e.LIVESTREAM.length||e.USER&&0!==e.USER.length))},t.prototype._getDisplayType=function(e){return{album:Object(di.a)("Album"),artist:Object(di.a)("Artiste"),playlist:Object(di.a)("Playlist"),show:Object(di.a)("Podcast"),livestream:Object(di.a)("Radio"),radio:Object(di.a)("Mix"),channel:Object(di.a)("Univers"),song:Object(di.a)("Titre"),track:Object(di.a)("Titre"),user:Object(di.a)("Profil")}[e]},t}(Uo.Component),Ml=Object(Ho.b)(function(e){return{isAuth:e.user.isAuth}},null,null,{withRef:!0})(Object(Ds.a)(Object(kl.a)(Object(Al.a)(Ll)))),Fl=Bo.a.createElement("span",{className:"icon icon-top-playlist pull-left"}),Ul=function(e){function t(n){_t(this,t);var a=vt(this,e.call(this,n));return a._onViewAll=a._onViewAll.bind(a),a}return Et(t,e),t.prototype.render=function(){var e=this;if(!this.props.queries.length)return null;var t=this.props.queries.map(function(t,n){return Bo.a.createElement("li",{key:"query_"+t.QUERY},Bo.a.createElement(ns.a,{className:"nano-card-link heading-4 ellipsis",to:"/search/"+encodeURIComponent(t.QUERY),onClick:e._onViewAll.bind(e,t.QUERY),"data-type":"query","data-index":n},Fl,t.QUERY))});return Bo.a.createElement("ul",{className:"nano-card-list"},t)},t.prototype._onViewAll=function(e,t){this.props.isAuth&&ri.a.addSearchHistory(e,"trending"),this.tracking("panel_click",t.currentTarget),ni.a.trigger(ni.a.menu.closeAllPanels)},t}(Uo.Component);Ul.defaultProps={queries:[]};var Bl=Object(Ho.b)(function(e){return{isAuth:e.user.isAuth}})(Object(Ds.a)(Ul)),Hl=function(e){function t(n){jt(this,t);var a=Tt(this,e.call(this,n));return a.panel_name="searchhistory",a.scrollbar={ref:"nano",shouldUpdate:function(e,t){return t.historyLength!==a.state.historyLength}},a._onHistoryChange=a._onHistoryChange.bind(a),a._clearSearchHistory=a._clearSearchHistory.bind(a),a.state={userTags:ri.a.data.USER_TAGS?ri.a.data.USER_TAGS.data:[],history:ri.a.data.SEARCH_HISTORY?ri.a.data.SEARCH_HISTORY.data:[],historyLength:ri.a.data.SEARCH_HISTORY?ri.a.data.SEARCH_HISTORY.total:0,trendingQueries:ri.a.data.TRENDING_QUERIES?ri.a.data.TRENDING_QUERIES.data:[]},a}return wt(t,e),t.prototype.componentDidMount=function(){ni.a.subscribe(ni.a.user.updateSearchHistory,this._onHistoryChange)},t.prototype.componentWillUnmount=function(){ni.a.unsubscribe(ni.a.user.updateSearchHistory,this._onHistoryChange)},t.prototype.render=function(){var e=[],t=this.state,n=t.userTags,a=t.history,r=t.trendingQueries;return Ko.a.isAllowed("trending_queries")&&r.length?(e.push(Bo.a.createElement("h2",{key:"trending-queries-list-title",className:"panel-heading-sub heading-4 heading-bordered"},Object(di.a)("Les plus recherchés"))),e.push(Bo.a.createElement(Bl,{key:"trending-queries-list",queries:r}))):n.length&&(e.push(Bo.a.createElement("h2",{key:"user-tag-list-title",className:"panel-heading-sub heading-4 heading-bordered"},Object(di.a)("Tags"))),e.push(Bo.a.createElement(wl.a,{key:"user-tag-list",tags:n,overflowHidden:!1}))),a.length&&(e.push(Bo.a.createElement("h2",{key:"history-list-title",className:"panel-heading-sub heading-4 heading-bordered"},Object(di.a)("Dernières recherches"))),e.push(Bo.a.createElement(Pl,{key:"history-list",history:a})),e.push(Bo.a.createElement("button",{key:"history-clear-button",className:"btn btn-block btn-view-more btn-clear",type:"button",onClick:this._clearSearchHistory},Bo.a.createElement("span",{className:"label"},Object(di.a)("Effacer"))))),this.renderPanel(Bo.a.createElement("div",{className:"panel-search-history"},this.renderScrollbar({"panel-body":!0},Bo.a.createElement("div",null,e))))},t.prototype._onHistoryChange=function(){this.setState({historyLength:ri.a.data.SEARCH_HISTORY.total})},t.prototype._clearSearchHistory=function(){ri.a.clearSearchHistory(),ni.a.trigger(ni.a.menu.closeAllPanels)},t}(Uo.Component),Gl=Object(kl.a)(Object(Al.a)(Hl)),zl=n("./node_modules/lodash.debounce/index.js"),ql=n.n(zl),Yl=n("./js/_components/Selectbox.js"),Wl=n("./js/_components/Sort.js"),Vl=function(e){function t(n){St(this,t);var a=Ct(this,e.call(this,n));return a.panel_name="playlists",a.scrollbar={ref:"nano",shouldUpdate:function(e,t){return a.state.list.length!==t.list.length}},a._current_list=[],a._displayMoreEnabled=!0,a._onToggleFavorite=ql()(a._onToggleFavorite.bind(a),0),a._updatePlaylists=a._updatePlaylists.bind(a),a._onSortTypeChange=a._onSortTypeChange.bind(a),a._onFilterChange=a._onFilterChange.bind(a),a._onOpenPlaylistAssistant=a._onOpenPlaylistAssistant.bind(a),a._displayMore=a._displayMore.bind(a),a.state={list:[],playlistOnTop:[],sortType:n.sortType,filter:"",nbDisplay:50},a}return Pt(t,e),t.prototype.componentDidMount=function(){var e=this;ni.a.subscribe(ni.a.user.addFavorite,this._onToggleFavorite,"panel_playlist"),ni.a.subscribe(ni.a.user.deleteFavorite,this._onToggleFavorite,"panel_playlist"),ni.a.subscribe(ni.a.playlist.created,this._updatePlaylists,"panel_playlist"),ni.a.subscribe(ni.a.playlist.removed,this._updatePlaylists,"panel_playlist"),ni.a.subscribe(ni.a.playlist.updated,this._updatePlaylists,"panel_playlist"),ni.a.subscribe(ni.a.playlist.addSong,this._updatePlaylists,"panel_playlist"),ni.a.subscribe(ni.a.playlist.removeSong,this._updatePlaylists,"panel_playlist"),this.scrollbar_onEnd(this._displayMore),this.subscribeOnOpen(function(){e.setState({list:e._getPlaylistList(),playlistOnTop:[],filter:""},function(){var e=document.getElementById("panel-playlists");Object(ys.j)(e)})})},t.prototype.componentWillUnmount=function(){ni.a.unsubscribeAll("panel_playlist")},t.prototype.render=function(){return this._refreshCurrentList(),this.renderPanel(Bo.a.createElement("div",{className:"panel-playlists"},Bo.a.createElement("div",{className:"panel-header",id:"panel-playlists",tabIndex:"0","aria-label":Object(di.a)("Playlists")},this.state.list.length?this._renderActions():null,this._renderTitle()),this.renderScrollbar({"panel-body":!0},[this._renderContent()])))},t.prototype._renderTitle=function(){var e=this.state.list.length,t=Bo.a.createElement("span",{dangerouslySetInnerHTML:{__html:Object(di.c)("%s playlist","%s playlists",{sprintf:['<span class="color-primary">'+Object(ys.f)(e)+"</span>"],count:e})}});return 0===e?Bo.a.createElement("div",{className:"panel-headings"},Bo.a.createElement("h2",{className:"heading-2"},t)):Bo.a.createElement("div",{className:"panel-headings"},Bo.a.createElement("h2",{className:"heading-2"},Bo.a.createElement(ns.a,{className:"link-animated",to:"/profile/"+this.props.userID+"/playlists"},t)))},t.prototype._renderActions=function(){var e=this.state,t=e.filter,n=e.list;return Bo.a.createElement("div",{className:"panel-actions form-inline"},Bo.a.createElement("div",{className:"form-group"},Bo.a.createElement("input",{className:"form-control input-small empty-filter",type:"text",onChange:this._onFilterChange,placeholder:Object(di.a)("Filtrer"),value:t})),n.length>0?Bo.a.createElement("div",{className:"form-group"},Bo.a.createElement(Yl.a,{type:"playlist",onChange:this._onSortTypeChange,saveKey:"panel"})):"")},t.prototype._renderContent=function(){var e=Ko.a.isAllowed("business"),t=e&&!Ko.a.isAllowed("business_mod");return Bo.a.createElement(Nl.a,{key:"playlist-list",data:this._current_list,type:"playlist",displayFavorite:Ko.a.isAllowed("business"),displayAdd:!0,draggable:e,helper:t?null:this._onOpenPlaylistAssistant,context:"menu_panel_playlist"})},t.prototype._onSortTypeChange=function(e){this.setState({sortType:e,playlistOnTop:[]})},t.prototype._onOpenPlaylistAssistant=function(e){this.tracking("panel_click",e.currentTarget),ti.a.open("/lightbox/playlist_assistant?type=create"),ni.a.trigger(ni.a.menu.closeAllPanels)},t.prototype._onFilterChange=function(e){this.setState({filter:e.target.value},this.refreshScrollbar)},t.prototype._onToggleFavorite=function(e,t){"playlist"===t.type&&this._updatePlaylists()},t.prototype._updatePlaylists=function(){this.setState({list:this._getPlaylistList()})},t.prototype._refreshCurrentList=function(){var e=this.state,t=e.list,n=e.sortType,a=e.filter,r=e.playlistOnTop,o=e.nbDisplay,i=[],s=Wl.a.data(t,n),l=a.toLowerCase().trim();""!==l&&(s=s.filter(function(e){return e.TITLE.toLowerCase().indexOf(l)>-1||void 0!==e.PARENT_USERNAME&&e.PARENT_USERNAME.toLowerCase().indexOf(l)>-1}));for(var c=0;c<r.length;c++)for(var p=0;p<s.length;p++)if(Number(s[p].PLAYLIST_ID)===Number(r[c])){i.push(s[p]),s.splice(p,1);break}s=(s=i.concat(s)).slice(0,o),this._current_list=s},t.prototype._displayMore=function(){var e=this,t=this.state.nbDisplay;return!(!1===this._displayMoreEnabled||t>this._current_list.length)&&(this._displayMoreEnabled=!1,this.setState({nbDisplay:t+50},function(){e._displayMoreEnabled=!0}),!0)},t.prototype._getPlaylistList=function(){return Xo.a.merge(Xo.a.merge([],ri.a.data.PLAYLISTS.data),ri.a.data.FAVORITES_PLAYLISTS.data)},t}(Uo.Component);Vl.defaultProps={sortType:"PLAYLIST_TITLE"};var Kl=Object(Ho.b)(function(e){var t=e.user;return{userID:t.id,sortType:t.USER.SETTING.site.sort_panel_playlist}},null,null,{withRef:!0})(Object(Ds.a)(Object(kl.a)(Object(Al.a)(Vl)))),Ql=n("./js/_modules/business/stores/ContentsStore.js"),Xl=function(e){function t(n){At(this,t);var a=xt(this,e.call(this,n));return a.panel_name="business_regular_playlists",a.scrollbar={ref:"nano",shouldUpdate:function(e,t){return a.state.list.length!==t.list.length}},a._current_list=[],a._displayMoreEnabled=!0,a._updatePlaylists=a._updatePlaylists.bind(a),a._onSortTypeChange=a._onSortTypeChange.bind(a),a._onFilterChange=a._onFilterChange.bind(a),a._displayMore=a._displayMore.bind(a),a.state={list:a._getPlaylistList(),playlistOnTop:[],sortType:n.sortType,filter:"",nbDisplay:50},a}return Dt(t,e),t.prototype.componentDidMount=function(){var e=this;this.scrollbar_onEnd(this._displayMore),ni.a.subscribe(ni.a.business_content.loaded,this._updatePlaylists,"panel_business_regular_playlist"),this.subscribeOnOpen(function(){e.setState({playlistOnTop:[],filter:""},function(){var e=document.getElementById("panel-regular-playlists");Object(ys.j)(e)})})},t.prototype.componentWillUnmount=function(){ni.a.unsubscribeAll("panel_business_regular_playlist")},t.prototype.render=function(){return this._refreshCurrentList(),this.renderPanel(Bo.a.createElement("div",{className:"panel-playlists"},Bo.a.createElement("div",{className:"panel-header",id:"panel-regular-playlists","aria-label":Object(di.a)("Sélection éditos"),tabIndex:"0"},this.state.list.length?this._renderActions():null,this._renderTitle()),this.renderScrollbar({"panel-body":!0},[this._renderContent()])))},t.prototype._renderTitle=function(){var e=this.state.list.length,t=Bo.a.createElement("span",{dangerouslySetInnerHTML:{__html:Object(di.c)("%s playlist","%s playlists",{sprintf:['<span class="color-primary">'+Object(ys.f)(e)+"</span>"],count:e})}});return Bo.a.createElement("div",{className:"panel-headings"},Bo.a.createElement("h2",{className:"heading-2"},t))},t.prototype._renderActions=function(){var e=this.state,t=e.filter,n=e.list;return Bo.a.createElement("div",{className:"panel-actions form-inline"},Bo.a.createElement("div",{className:"form-group"},Bo.a.createElement("input",{className:"form-control input-small empty-filter",type:"text",onChange:this._onFilterChange,placeholder:Object(di.a)("Filtrer"),value:t})),n.length>0?Bo.a.createElement("div",{className:"form-group"},Bo.a.createElement(Yl.a,{type:"playlist",onChange:this._onSortTypeChange,saveKey:"panel"})):"")},t.prototype._renderContent=function(){return Bo.a.createElement(Nl.a,{key:"playlist-list",data:this._current_list,type:"playlist",displayFavorite:!0,draggable:Ko.a.isAllowed("business"),context:"menu_panel_business_regular_playlist"})},t.prototype._onSortTypeChange=function(e){this.setState({sortType:e,playlistOnTop:[]})},t.prototype._onFilterChange=function(e){this.setState({filter:e.target.value},this.refreshScrollbar)},t.prototype._updatePlaylists=function(){this.setState({list:this._getPlaylistList()})},t.prototype._refreshCurrentList=function(){var e=this.state,t=e.list,n=e.filter,a=e.sortType,r=e.playlistOnTop,o=e.nbDisplay,i=[],s=Wl.a.data(t,a),l=n.toLowerCase().trim();""!==l&&(s=s.filter(function(e){return e.TITLE.toLowerCase().indexOf(l)>-1||void 0!==e.PARENT_USERNAME&&e.PARENT_USERNAME.toLowerCase().indexOf(l)>-1}));for(var c=0;c<r.length;c++)for(var p=0;p<s.length;p++)if(Number(s[p].PLAYLIST_ID)===Number(r[c])){i.push(s[p]),s.splice(p,1);break}s=(s=i.concat(s)).slice(0,o),this._current_list=s},t.prototype._displayMore=function(){var e=this,t=this.state.nbDisplay;return!(!1===this._displayMoreEnabled||t>this._current_list.length)&&(this._displayMoreEnabled=!1,this.setState({nbDisplay:t+50},function(){e._displayMoreEnabled=!0}),!0)},t.prototype._getPlaylistList=function(){var e=Ql.a.getRegularPlaylists();return e&&void 0!==e.data?e.data:[]},t}(Uo.Component);Xl.defaultProps={sortType:"PLAYLIST_TITLE"};var $l=Object(Ho.b)(function(e){return{sortType:e.user.USER.SETTING.site.sort_panel_playlist}},null,null,{withRef:!0})(Object(kl.a)(Object(Al.a)(Xl))),Jl=function(e){function t(n){It(this,t);var a=Lt(this,e.call(this,n));return a.panel_name="business_curated_playlists",a.scrollbar={ref:"nano",shouldUpdate:function(e,t){return a.state.list.length!==t.list.length}},a._current_list=[],a._displayMoreEnabled=!0,a._updatePlaylists=a._updatePlaylists.bind(a),a._onSortTypeChange=a._onSortTypeChange.bind(a),a._onFilterChange=a._onFilterChange.bind(a),a._displayMore=a._displayMore.bind(a),a.state={list:a._getPlaylistList(),playlistOnTop:[],sortType:n.sortType,filter:"",nbDisplay:50},a}return Mt(t,e),t.prototype.componentDidMount=function(){var e=this;this.scrollbar_onEnd(this._displayMore),ni.a.subscribe(ni.a.business_content.loaded,this._updatePlaylists,"panel_business_curated_playlist"),this.subscribeOnOpen(function(){e.setState({playlistOnTop:[],filter:""},function(){var e=document.getElementById("panel-curated-playlists");Object(ys.j)(e)})})},t.prototype.componentWillUnmount=function(){ni.a.unsubscribeAll("panel_business_curated_playlist")},t.prototype.render=function(){return this._refreshCurrentList(),this.renderPanel(Bo.a.createElement("div",{className:"panel-playlists"},Bo.a.createElement("div",{className:"panel-header",id:"panel-curated-playlists","aria-label":Object(di.a)("Business Playlists"),tabIndex:"0"},this.state.list.length?this._renderActions():null,this._renderTitle()),this.renderScrollbar({"panel-body":!0},[this._renderContent()])))},t.prototype._renderTitle=function(){var e=this.state.list.length,t=Bo.a.createElement("span",{dangerouslySetInnerHTML:{__html:Object(di.c)("%s playlist","%s playlists",{sprintf:['<span class="color-primary">'+Object(ys.f)(e)+"</span>"],count:e})}});return Bo.a.createElement("div",{className:"panel-headings"},Bo.a.createElement("h2",{className:"heading-2"},t))},t.prototype._renderActions=function(){var e=this.state,t=e.filter,n=e.list;return Bo.a.createElement("div",{className:"panel-actions form-inline"},Bo.a.createElement("div",{className:"form-group"},Bo.a.createElement("input",{className:"form-control input-small empty-filter",type:"text",onChange:this._onFilterChange,placeholder:Object(di.a)("Filtrer"),value:t})),n.length>0?Bo.a.createElement("div",{className:"form-group"},Bo.a.createElement(Yl.a,{type:"playlist",onChange:this._onSortTypeChange,saveKey:"panel"})):"")},t.prototype._renderContent=function(){return Bo.a.createElement(Nl.a,{key:"playlist-list",data:this._current_list,type:"playlist",displayFavorite:!0,draggable:Ko.a.isAllowed("business"),context:"menu_panel_business_curated_playlist"})},t.prototype._onSortTypeChange=function(e){this.setState({sortType:e,playlistOnTop:[]})},t.prototype._onFilterChange=function(e){this.setState({filter:e.target.value},this.refreshScrollbar)},t.prototype._updatePlaylists=function(){this.setState({list:this._getPlaylistList()})},t.prototype._refreshCurrentList=function(){var e=this.state,t=e.list,n=e.sortType,a=e.filter,r=e.playlistOnTop,o=e.nbDisplay,i=[],s=Wl.a.data(t,n),l=a.toLowerCase().trim();""!==l&&(s=s.filter(function(e){return e.TITLE.toLowerCase().indexOf(l)>-1||void 0!==e.PARENT_USERNAME&&e.PARENT_USERNAME.toLowerCase().indexOf(l)>-1}));for(var c=0;c<r.length;c++)for(var p=0;p<s.length;p++)if(Number(s[p].PLAYLIST_ID)===Number(r[c])){i.push(s[p]),s.splice(p,1);break}s=(s=i.concat(s)).slice(0,o),this._current_list=s},t.prototype._displayMore=function(){var e=this,t=this.state.nbDisplay;return!(!1===this._displayMoreEnabled||t>this._current_list.length)&&(this._displayMoreEnabled=!1,this.setState({nbDisplay:t+50},function(){e._displayMoreEnabled=!0}),!0)},t.prototype._getPlaylistList=function(){var e=Ql.a.getCuratedPlaylists();return e&&void 0!==e.data?e.data:[]},t}(Uo.Component);Jl.defaultProps={sortType:"PLAYLIST_TITLE"};var Zl=Object(Ho.b)(function(e){return{sortType:e.user.USER.SETTING.site.sort_panel_playlist}},null,null,{withRef:!0})(Object(kl.a)(Object(Al.a)(Jl))),ec=function(e){function t(n){Ut(this,t);var a=Bt(this,e.call(this,n));return a.panel_name="business_mixes",a.scrollbar={ref:"nano",shouldUpdate:function(e,t){return a.state.list.length!==t.list.length}},a._current_list=[],a._displayMoreEnabled=!0,a._updatePlaylists=a._updatePlaylists.bind(a),a._onSortTypeChange=a._onSortTypeChange.bind(a),a._onFilterChange=a._onFilterChange.bind(a),a._displayMore=a._displayMore.bind(a),a.state={list:a._getPlaylistList(),playlistOnTop:[],sortType:n.sortType,filter:"",nbDisplay:50},a}return Ht(t,e),t.prototype.componentDidMount=function(){var e=this;this.scrollbar_onEnd(this._displayMore),ni.a.subscribe(ni.a.business_content.loaded,this._updatePlaylists,"panel_business_mixes"),this.subscribeOnOpen(function(){e.setState({playlistOnTop:[],filter:""},function(){var e=document.getElementById("panel-business-mixes");Object(ys.j)(e)})})},t.prototype.componentWillUnmount=function(){ni.a.unsubscribeAll("panel_business_mixes")},t.prototype.render=function(){return this._refreshCurrentList(),this.renderPanel(Bo.a.createElement("div",{className:"panel-playlists"},Bo.a.createElement("div",{className:"panel-header",id:"panel-business-mixes","aria-label":Object(di.c)("Mix","Mix",{count:2}),tabIndex:"0"},this.state.list.length?this._renderActions():null,this._renderTitle()),this.renderScrollbar({"panel-body":!0},[this._renderContent()])))},t.prototype._renderTitle=function(){var e=this.state.list.length,t=Bo.a.createElement("span",{dangerouslySetInnerHTML:{__html:Object(di.c)("%s mix","%s mix",{sprintf:['<span class="color-primary">'+Object(ys.f)(e)+"</span>"],count:e})}});return Bo.a.createElement("div",{className:"panel-headings"},Bo.a.createElement("h2",{className:"heading-2"},t))},t.prototype._renderActions=function(){var e=this.state,t=e.filter,n=e.list;return Bo.a.createElement("div",{className:"panel-actions form-inline"},Bo.a.createElement("div",{className:"form-group"},Bo.a.createElement("input",{className:"form-control input-small empty-filter",type:"text",onChange:this._onFilterChange,placeholder:Object(di.a)("Filtrer"),value:t})),n.length>0?Bo.a.createElement("div",{className:"form-group"},Bo.a.createElement(Yl.a,{type:"playlist",onChange:this._onSortTypeChange,saveKey:"panel"})):"")},t.prototype._renderContent=function(){return Bo.a.createElement(Nl.a,{key:"playlist-list",data:this._current_list,type:"radio",displayFavorite:!0,draggable:Ko.a.isAllowed("business"),context:"menu_panel_business_mixes"})},t.prototype._onSortTypeChange=function(e){this.setState({sortType:e,playlistOnTop:[]})},t.prototype._onFilterChange=function(e){this.setState({filter:e.target.value},this.refreshScrollbar)},t.prototype._updatePlaylists=function(){this.setState({list:this._getPlaylistList()})},t.prototype._refreshCurrentList=function(){var e=this.state,t=e.list,n=e.sortType,a=e.filter,r=e.playlistOnTop,o=e.nbDisplay,i=[],s=Wl.a.data(t,n),l=a.toLowerCase().trim();""!==l&&(s=s.filter(function(e){return e.TITLE.toLowerCase().indexOf(l)>-1||void 0!==e.PARENT_USERNAME&&e.PARENT_USERNAME.toLowerCase().indexOf(l)>-1}));for(var c=0;c<r.length;c++)for(var p=0;p<s.length;p++)if(Number(s[p].PLAYLIST_ID)===Number(r[c])){i.push(s[p]),s.splice(p,1);break}s=(s=i.concat(s)).slice(0,o),this._current_list=s},t.prototype._displayMore=function(){var e=this,t=this.state.nbDisplay;return!(!1===this._displayMoreEnabled||t>this._current_list.length)&&(this._displayMoreEnabled=!1,this.setState({nbDisplay:t+50},function(){e._displayMoreEnabled=!0}),!0)},t.prototype._getPlaylistList=function(){var e=Ql.a.getAllRadios();return e&&void 0!==e.data?e.data:[]},t}(Uo.Component);ec.defaultProps={sortType:"PLAYLIST_TITLE"};var tc=Object(Ho.b)(function(e){return{sortType:e.user.USER.SETTING.site.sort_panel_playlist}},null,null,{withRef:!0})(Object(kl.a)(Object(Al.a)(ec))),nc=function(e){function t(n){zt(this,t);var a=qt(this,e.call(this,n));return a.panel_name="albums",a.scrollbar={ref:"nano",shouldUpdate:function(e,t){return a.state.list.length!==t.list.length}},a._currentList=[],a._displayMoreEnabled=!0,a._onToggleFavorite=ql()(a._onToggleFavorite.bind(a),0),a._onSortTypeChange=a._onSortTypeChange.bind(a),a._onFilterChange=a._onFilterChange.bind(a),a._displayMore=a._displayMore.bind(a),a._openPageAllAlbums=a._openPageAllAlbums.bind(a),a.state={list:ri.a.data.FAVORITES_ALBUMS.data.slice(0),sortType:n.sortType,nbDisplay:50,filter:""},a}return Yt(t,e),t.prototype.componentDidMount=function(){var e=this;ni.a.subscribe(ni.a.user.addFavorite,this._onToggleFavorite,"panel_album"),ni.a.subscribe(ni.a.user.deleteFavorite,this._onToggleFavorite,"panel_album"),this.scrollbar_onEnd(this._displayMore),this.subscribeOnOpen(function(){e.setState({filter:""},function(){var e=document.getElementById("panel-albums");Object(ys.j)(e)})})},t.prototype.shouldComponentUpdate=function(e,t){return e.selected!==this.props.selected||t.filter!==this.state.filter||t.nbDisplay!==this.state.nbDisplay||t.sortType!==this.state.sortType||t.list.length!==this.state.list.length},t.prototype.componentWillUnmount=function(){ni.a.unsubscribeAll("panel_album")},t.prototype.render=function(){return this._refreshCurrentList(),this.renderPanel(Bo.a.createElement("div",{className:"panel-albums"},Bo.a.createElement("div",{className:"panel-header",id:"panel-albums","aria-label":Object(di.a)("Albums"),tabIndex:"0"},this.state.list.length?this._renderActions():null,this._renderTitle()),this.renderScrollbar({"panel-body":!0},[this._renderContent()])))},t.prototype._renderTitle=function(){var e=this.state.list.length,t=Bo.a.createElement("span",{dangerouslySetInnerHTML:{__html:Object(di.c)("%s album","%s albums",{sprintf:['<span class="color-primary">'+Object(ys.f)(e)+"</span>"],count:e})}});return 0===e?Bo.a.createElement("div",{className:"panel-headings"},Bo.a.createElement("h2",{className:"heading-2"},t)):Bo.a.createElement("div",{className:"panel-headings"},Bo.a.createElement("h2",{className:"heading-2"},Bo.a.createElement(ns.a,{className:"link-animated",to:"/profile/"+this.props.userID+"/albums"},t)))},t.prototype._renderActions=function(){var e=this.state,t=e.filter,n=e.list;return Bo.a.createElement("div",{className:"panel-actions form-inline",key:"actions"},Bo.a.createElement("div",{className:"form-group"},Bo.a.createElement("input",{className:"form-control input-small empty-filter",type:"text",onChange:this._onFilterChange,placeholder:Object(di.a)("Filtrer"),value:t})),n.length?Bo.a.createElement("div",{className:"form-group"},Bo.a.createElement(Yl.a,{type:"album",onChange:this._onSortTypeChange,saveKey:"panel"})):"")},t.prototype._renderContent=function(){var e=Ko.a.isAllowed("business");return Bo.a.createElement(Nl.a,{key:"album-list",data:this._currentList,type:Vo.a.Album,displayFavorite:e,displayAdd:!0,helper:e?null:this._openPageAllAlbums,draggable:Ko.a.isAllowed("business"),context:"menu_panel_album"})},t.prototype._onToggleFavorite=function(e,t){"album"===t.type&&this.setState({list:ri.a.data.FAVORITES_ALBUMS.data.slice(0)})},t.prototype._onFilterChange=function(e){var t=this;this.setState({filter:e.target.value},function(){t.refreshScrollbar()})},t.prototype._onSortTypeChange=function(e){this.setState({sortType:e})},t.prototype._openPageAllAlbums=function(e){e.preventDefault(),this.context.router.push(Object(Gi.a)("/profile/"+this.props.userID+"/albums"))},t.prototype._refreshCurrentList=function(){var e=this.state,t=e.sortType,n=e.list,a=e.filter,r=e.nbDisplay,o=Wl.a.data(n,t);(a=a.toLowerCase().trim())&&(o=o.filter(function(e){return e.ALB_TITLE.toLowerCase().indexOf(a.toLowerCase())>-1||e.ART_NAME.toLowerCase().indexOf(a.toLowerCase())>-1})),o=o.slice(0,r),this._currentList=o},t.prototype._displayMore=function(){var e=this,t=this.state.nbDisplay;return!(!1===this._displayMoreEnabled||t>this._currentList.length)&&(this._displayMoreEnabled=!1,this.setState({nbDisplay:t+50},function(){e._displayMoreEnabled=!0}),!0)},t}(Uo.Component);nc.contextTypes={router:Jo.a.object},nc.defaultProps={selected:void 0,sortType:"ART_NAME"};var ac=Object(Ho.b)(function(e){var t=e.user;return{userID:t.id,sortType:t.USER.SETTING.site.sort_panel_album}},null,null,{withRef:!0})(Object(kl.a)(Object(Al.a)(nc))),rc=function(e){function t(n){Vt(this,t);var a=Kt(this,e.call(this,n));return a.panel_name="shows",a.scrollbar={ref:"nano",shouldUpdate:function(e,t){return a.state.list.length!==t.list.length}},a._currentList=[],a._displayMoreEnabled=!0,a._onToggleFavorite=a._onToggleFavorite.bind(a),a._onSortTypeChange=a._onSortTypeChange.bind(a),a._onFilterChange=a._onFilterChange.bind(a),a._displayMore=a._displayMore.bind(a),a._openPagePodcasts=a._openPagePodcasts.bind(a),a.state={list:ri.a.data.FAVORITES_SHOWS.data.slice(0),sortType:n.sortType,nbDisplay:50,filter:""},a}return Qt(t,e),t.prototype.componentDidMount=function(){var e=this;ni.a.subscribe(ni.a.user.addFavorite,this._onToggleFavorite,"panel_show"),ni.a.subscribe(ni.a.user.deleteFavorite,this._onToggleFavorite,"panel_show"),this.scrollbar_onEnd(this._displayMore),this.subscribeOnOpen(function(){e.setState({filter:""},function(){var e=document.getElementById("panel-shows");Object(ys.j)(e)})})},t.prototype.shouldComponentUpdate=function(e,t){return e.selected!==this.props.selected||t.filter!==this.state.filter||t.nbDisplay!==this.state.nbDisplay||t.sortType!==this.state.sortType||t.list.length!==this.state.list.length},t.prototype.componentWillUnmount=function(){ni.a.unsubscribeAll("panel_show")},t.prototype.render=function(){return this._refreshCurrentList(),this.renderPanel(Bo.a.createElement("div",{className:"panel-shows"},Bo.a.createElement("div",{className:"panel-header",id:"panel-shows","aria-label":Object(di.a)("Podcasts"),tabIndex:"0"},this.state.list.length?this._renderActions():null,this._renderTitle()),this.renderScrollbar({"panel-body":!0},[this._renderContent()])))},t.prototype._renderTitle=function(){var e=this.state.list.length,t=Bo.a.createElement("span",{dangerouslySetInnerHTML:{__html:Object(di.c)("%s podcast","%s podcasts",{sprintf:['<span class="color-primary">'+Object(ys.f)(e)+"</span>"],count:e})}});return 0===e?Bo.a.createElement("div",{className:"panel-headings"},Bo.a.createElement("h2",{className:"heading-2"},t)):Bo.a.createElement("div",{className:"panel-headings"},Bo.a.createElement("h2",{className:"heading-2"},Bo.a.createElement(ns.a,{className:"link-animated",to:"/profile/"+this.props.userID+"/shows"},t)))},t.prototype._renderActions=function(){var e=this.state,t=e.filter,n=e.list;return Bo.a.createElement("div",{className:"panel-actions form-inline",key:"actions"},Bo.a.createElement("div",{className:"form-group"},Bo.a.createElement("input",{className:"form-control input-small empty-filter",type:"text",onChange:this._onFilterChange,placeholder:Object(di.a)("Filtrer"),value:t})),n.length?Bo.a.createElement("div",{className:"form-group"},Bo.a.createElement(Yl.a,{type:"show",onChange:this._onSortTypeChange,saveKey:"panel"})):"")},t.prototype._renderContent=function(){var e=Ko.a.isAllowed("business"),t=e&&!Ko.a.isAllowed("business_mod");return Bo.a.createElement(Nl.a,{key:"show-list",data:this._currentList,type:Vo.a.Show,displayFavorite:e,displayAdd:!0,draggable:e,helper:t?null:this._openPagePodcasts,context:"menu_panel_show"})},t.prototype._onToggleFavorite=function(e,t){"show"===t.type&&this.setState({list:ri.a.data.FAVORITES_SHOWS.data.slice(0)})},t.prototype._onFilterChange=function(e){var t=this;this.setState({filter:e.target.value},function(){t.refreshScrollbar()})},t.prototype._onSortTypeChange=function(e){this.setState({sortType:e})},t.prototype._openPagePodcasts=function(e){e.preventDefault(),qo.c.navigate(Object(Gi.a)("/channels/podcasts"))},t.prototype._refreshCurrentList=function(){var e=this.state,t=e.sortType,n=e.list,a=e.filter,r=e.nbDisplay,o=Wl.a.data(n,t);(a=a.toLowerCase().trim())&&(o=o.filter(function(e){return e.SHOW_NAME.toLowerCase().indexOf(a.toLowerCase())>-1})),o=o.slice(0,r),this._currentList=o},t.prototype._displayMore=function(){var e=this,t=this.state.nbDisplay;return!(!1===this._displayMoreEnabled||t>this._currentList.length)&&(this._displayMoreEnabled=!1,this.setState({nbDisplay:t+50},function(){e._displayMoreEnabled=!0}),!0)},t}(Uo.Component);rc.defaultProps={selected:!1,sortType:"SHOW_NAME"};var oc=Object(Ho.b)(function(e){var t=e.user;return{userID:t.id,sortType:t.USER.SETTING.site.sort_panel_show}},null,null,{withRef:!0})(Object(kl.a)(Object(Al.a)(rc))),ic=function(e){function t(n){$t(this,t);var a=Jt(this,e.call(this,n));return a.panel_name="audiobooks",a.scrollbar={ref:"nano",shouldUpdate:function(e,t){return a.state.list.length!==t.list.length}},a._currentList=[],a._displayMoreEnabled=!0,a._onToggleFavorite=a._onToggleFavorite.bind(a),a._onSortTypeChange=a._onSortTypeChange.bind(a),a._onFilterChange=a._onFilterChange.bind(a),a._displayMore=a._displayMore.bind(a),a._openPageAudiobooks=a._openPageAudiobooks.bind(a),a.state={list:ri.a.data.FAVORITES_AUDIOBOOKS.data.slice(0),sortType:n.sortType,nbDisplay:50,filter:""},a}return Zt(t,e),t.prototype.componentDidMount=function(){var e=this;ni.a.subscribe(ni.a.user.addFavorite,this._onToggleFavorite,"panel_audiobook"),ni.a.subscribe(ni.a.user.deleteFavorite,this._onToggleFavorite,"panel_audiobook"),this.scrollbar_onEnd(this._displayMore),this.subscribeOnOpen(function(){e.setState({filter:""},function(){var e=document.getElementById("panel-audiobooks");Object(ys.j)(e)})})},t.prototype.shouldComponentUpdate=function(e,t){return e.selected!==this.props.selected||t.filter!==this.state.filter||t.nbDisplay!==this.state.nbDisplay||t.sortType!==this.state.sortType||t.list.length!==this.state.list.length},t.prototype.componentWillUnmount=function(){ni.a.unsubscribeAll("panel_audiobook")},t.prototype.render=function(){return this._refreshCurrentList(),this.renderPanel(Bo.a.createElement("div",{className:"panel-audiobooks"},Bo.a.createElement("div",{className:"panel-header",id:"panel-audiobooks","aria-label":Object(di.a)("Livres audio"),tabIndex:"0"},this.state.list.length?this._renderActions():null,this._renderTitle()),this.renderScrollbar({"panel-body":!0},[this._renderContent()])))},t.prototype._renderTitle=function(){var e=this.state.list.length,t=Bo.a.createElement("span",{dangerouslySetInnerHTML:{__html:Object(di.c)("%s livre audio","%s livres audio",{sprintf:['<span class="color-primary">'+Object(ys.f)(e)+"</span>"],count:e})}});return 0===e?Bo.a.createElement("div",{className:"panel-headings"},Bo.a.createElement("h2",{className:"heading-2"},t)):Bo.a.createElement("div",{className:"panel-headings"},Bo.a.createElement("h2",{className:"heading-2"},Bo.a.createElement(ns.a,{className:"link-animated",to:"/profile/"+this.props.userID+"/audiobooks"},t)))},t.prototype._renderActions=function(){var e=this.state,t=e.filter,n=e.list;return Bo.a.createElement("div",{className:"panel-actions form-inline",key:"actions"},Bo.a.createElement("div",{className:"form-group"},Bo.a.createElement("input",{className:"form-control input-small empty-filter",type:"text",onChange:this._onFilterChange,placeholder:Object(di.a)("Filtrer"),value:t})),n.length?Bo.a.createElement("div",{className:"form-group"},Bo.a.createElement(Yl.a,{type:Vo.a.Audiobook,onChange:this._onSortTypeChange,saveKey:"panel"})):"")},t.prototype._renderContent=function(){var e=Ko.a.isAllowed("business"),t=e&&!Ko.a.isAllowed("business_mod");return Bo.a.createElement(Nl.a,{key:"audiobook-list",data:this._currentList,type:Vo.a.Audiobook,displayFavorite:e,displayAdd:!0,draggable:e,helper:t?null:this._openPageAudiobooks,context:"menu_panel_audiobook"})},t.prototype._onToggleFavorite=function(e,t){t.type===Vo.a.Audiobook&&this.setState({list:ri.a.data.FAVORITES_AUDIOBOOKS.data.slice(0)})},t.prototype._onFilterChange=function(e){var t=this;this.setState({filter:e.target.value},function(){t.refreshScrollbar()})},t.prototype._onSortTypeChange=function(e){this.setState({sortType:e})},t.prototype._openPageAudiobooks=function(e){e.preventDefault(),qo.c.navigate(Object(Gi.a)("/channels/audiobooks"))},t.prototype._refreshCurrentList=function(){var e=this.state,t=e.sortType,n=e.list,a=e.filter,r=e.nbDisplay,o=Wl.a.data(n,t);(a=a.toLowerCase().trim())&&(o=o.filter(function(e){return e.title.toLowerCase().indexOf(a)>-1})),o=o.slice(0,r),this._currentList=o},t.prototype._displayMore=function(){var e=this,t=this.state.nbDisplay;return!(!1===this._displayMoreEnabled||t>this._currentList.length)&&(this._displayMoreEnabled=!1,this.setState({nbDisplay:t+50},function(){e._displayMoreEnabled=!0}),!0)},t}(Uo.Component);ic.defaultProps={selected:!1,sortType:"AUDIOBOOK_TITLE"};var sc=Object(Ho.b)(function(e){var t=e.user;return{userID:t.id,sortType:t.USER.SETTING.site.sort_panel_audiobook}},null,null,{withRef:!0})(Object(kl.a)(Object(Al.a)(ic))),lc=n("./js/_components/Thumbnail/index.js"),cc=function(e){function t(n){tn(this,t);var a=nn(this,e.call(this,n));return a.panel_name="apps",a.scrollbar={ref:"nano",shouldUpdate:function(e,t){return a.state.list.length!==t.list.length}},a._onToggleFavorite=a._onToggleFavorite.bind(a),a._onAppClick=a._onAppClick.bind(a),a._onHelperClick=a._onHelperClick.bind(a),a.state={list:ri.a.data.FAVORITES_APPLICATIONS?ri.a.data.FAVORITES_APPLICATIONS.data.slice(0):[],suggest:ri.a.data.DEFAULT_APPLICATIONS?ri.a.data.DEFAULT_APPLICATIONS.data.slice(0):[]},a}return an(t,e),t.prototype.componentDidMount=function(){ni.a.subscribe(ni.a.user.addFavorite,this._onToggleFavorite,"panel_application"),ni.a.subscribe(ni.a.user.deleteFavorite,this._onToggleFavorite,"panel_application"),this.subscribeOnOpen(function(){var e=document.getElementById("panel-apps");Object(ys.j)(e)})},t.prototype.shouldComponentUpdate=function(e,t){return e.selected!==this.props.selected||t.suggest!==this.state.suggest||t.list.length!==this.state.list.length},t.prototype.componentWillUnmount=function(){ni.a.unsubscribeAll("panel_application")},t.prototype.render=function(){var e=this.state,t=e.list,n=e.suggest,a=Wl.a.data(t,"APP_NAME"),r=Object(di.c)("%s application","%s applications",{sprintf:['<span class="color-primary">'+Object(ys.f)(a.length)+"</span>"],count:a.length});return this.renderPanel(Bo.a.createElement("div",{className:"panel-apps"},Bo.a.createElement("div",{className:"panel-header",id:"panel-apps","aria-label":Object(di.a)("Applications"),tabIndex:"0"},Bo.a.createElement("div",{className:"panel-headings"},Bo.a.createElement("h2",{className:"heading-2",dangerouslySetInnerHTML:{__html:r}}))),this.renderScrollbar({"panel-body":!0},[this._renderSuggest(n),this._renderContent(a)])))},t.prototype._renderContent=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Bo.a.createElement(Nl.a,{key:"apps-list",data:e,type:"app",helper:this._onHelperClick})},t.prototype._renderSuggest=function(e){return 0===e.length?null:(e=e[0],Bo.a.createElement("aside",{role:"complementary",key:"suggest",className:"app-suggest",onClick:this._onAppClick,"data-type":"suggested_apps","data-url":this._getSuggestUrl(),"data-id":e.APP_ID},Bo.a.createElement("div",{className:"panel-heading-sub heading-4"},Object(di.a)("Deezer vous recommande :")),Bo.a.createElement(lc.a,{type:"app",data:e,alt:e.NAME,height:120,width:320}),Bo.a.createElement("ul",{className:"nano-card-list"},Bo.a.createElement("li",{className:"nano-card-item"},Bo.a.createElement("div",{className:"nano-card-options"},Bo.a.createElement("span",{className:"option"},Bo.a.createElement(cs.a,{type:"application",context:"appsuggest",id:e.APP_ID}))),Bo.a.createElement("div",{className:"nano-card-infos"},Bo.a.createElement("div",{className:"heading-4 ellipsis"},Bo.a.createElement("a",{href:this._getSuggestUrl()},e.NAME)),Bo.a.createElement("div",{className:"heading-4-sub ellipsis"},Bo.a.createElement("a",{href:this._getSuggestUrl()},e.DESCRIPTION)))))))},t.prototype._onToggleFavorite=function(e,t){"application"===t.type&&this.setState({list:ri.a.data.FAVORITES_APPLICATIONS.data.slice(0)})},t.prototype._onAppClick=function(e){e.preventDefault(),e.stopPropagation(),qo.c.navigate(this._getSuggestUrl()),this.tracking("panel_click",e.currentTarget)},t.prototype._onHelperClick=function(e){e.preventDefault(),e.stopPropagation(),qo.c.navigate("/appstudio"),this.tracking("panel_click",e.currentTarget)},t.prototype._getSuggestUrl=function(){var e=this.state.suggest[0];return"/app/"+(""!==e.INAPP_ALIAS?e.INAPP_ALIAS:e.APP_ID)},t}(Uo.Component),pc=Object(Ds.a)(Object(kl.a)(Object(Al.a)(cc))),uc=n("./node_modules/react-dom/index.js"),dc=n.n(uc),fc=n("./js/_components/Menu/store/queuelist.js"),hc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},mc=50,yc=Bo.a.createElement("span",{className:"icon icon-trash"}),bc=Bo.a.createElement(vi.a,{className:"checkbox-tick",name:"check"}),gc=Bo.a.createElement("button",{className:"action-item-btn",id:"naboo_queuelist_add",type:"button"},Bo.a.createElement("span",{className:"icon icon-add"})),_c=function(e){function t(n){on(this,t);var a=sn(this,e.call(this,n));return a.panel_name="queuelist",a.scrollbar={ref:"nano",shouldUpdate:function(e){return a.props.list.length!==e.list.length}},a._displayMoreEnabled=!0,a.state={nbDisplay:mc},a._onSelect=a._onSelect.bind(a),a._checkTrackList=a._checkTrackList.bind(a),a._onAdd=a._onAdd.bind(a),a._onRemove=a._onRemove.bind(a),a._onQueueListChange=a._onQueueListChange.bind(a),a._onUpNextToggle=a._onUpNextToggle.bind(a),a._onFavoriteToggle=a._onFavoriteToggle.bind(a),a._activateScroll=a._activateScroll.bind(a),a}return ln(t,e),t.prototype.componentDidMount=function(){var e=this;ni.a.subscribe(ni.a.list.select,this._onSelect,"panel_queue"),ni.a.subscribe(ni.a.user.addFavorite,this._onFavoriteToggle,"panel_queue"),ni.a.subscribe(ni.a.user.deleteFavorite,this._onFavoriteToggle,"panel_queue"),ni.a.subscribe(ni.a.player.tracklist_changed,this._onQueueListChange,"panel_queue"),this.scrollbar_onEnd(this._activateScroll),this.subscribeOnOpen(function(){e._checkTrackList();var t=document.getElementById("panel-queuelist");Object(ys.j)(t)}),Xo()(this.refs.nano_content).scrollTop(this._getScrollPosition())},t.prototype.componentDidUpdate=function(e){this.props.selected===this.panel_name&&e.selected!==this.panel_name&&Xo()(this.refs.nano_content).scrollTop(this._getScrollPosition())},t.prototype.componentWillUnmount=function(){ni.a.unsubscribeAll("panel_queue")},t.prototype.render=function(){var e=this.props,t=e.isRadio,n=e.isAuth,a=e.isFlow,r=e.isMyFlow,o=e.context,i=e.mediaType;if(!e.list.length)return null;var s=n&&!a&&!r&&(!t||"up_next_artist"===o.TYPE)&&"artist_smartradio"!==o.TYPE&&i!==Yo.a.MEDIA_TYPE_LIVE_STREAM&&i!==Yo.a.MEDIA_TYPE_TALK,l=ui()({"panel-qlist":!0,"has-up-next":s}),c=ui()({"panel-header":!0,"is-radio":i!==Yo.a.MEDIA_TYPE_LIVE_STREAM&&t&&"up_next_artist"!==o.TYPE});return this.renderPanel(Bo.a.createElement("div",{className:l},Bo.a.createElement("div",{className:c,id:"panel-queuelist","aria-label":Object(di.a)("File d'attente"),tabIndex:"0"},this._renderActionBar(),this._renderTitle(),s?this._renderUpNextToggle():null),this.renderScrollbar({"panel-body":!0},this._renderContent())))},t.prototype._renderContent=function(){var e=this,t=this.props,n=t.list,a=t.recommendations,r=t.context,o=t.mediaType,i=t.isRadio,s=t.isFlow,l=t.isMyFlow,c=t.isAuth,p=t.index,u=t.hasUpNext,d=o!==Yo.a.MEDIA_TYPE_TALK,f=c&&u&&!s&&!l&&"up_next_artist"===r.TYPE&&a.length,h=n.slice(0,this.state.nbDisplay),m={isRadio:i,shareContext:s?"flow":"",playIndex:p,playData:i?[]:h,data:h,context:"queue_list",displayPlay:i&&"up_next_artist"!==r.TYPE?"off":"on"};return Bo.a.createElement("div",{ref:function(t){return e.listNode=t}},Bo.a.createElement(Nl.a,hc({},m,{displayAdd:d,selectable:!0})),f?this._renderRecommendations():null)},t.prototype._renderRecommendations=function(){var e=this.props,t=e.list,n={data:e.recommendations,isRadio:!0,shareContext:"up_next_artist",playIndex:e.index-t.length,playData:[],context:"up_next_artist",displayPlay:"off"};return Bo.a.createElement("div",null,Bo.a.createElement("h2",{className:"panel-heading-sub heading-4"},Object(di.a)("Recommandé")),Bo.a.createElement(Nl.a,hc({},n,{displayAdd:!1,selectable:!1})))},t.prototype._renderTitle=function(){var e=this.props,t=e.nbSelected,n=e.list,a=e.tracklistDuration,r=e.context,o=e.mediaType,i=e.isRadio,s=e.isFlow,l=n.length,c=Object(di.c)("%s titre","%s titres",{count:l,sprintf:[Object(ys.f)(l)]}),p=Object(di.a)("File d'attente");return o!==Yo.a.MEDIA_TYPE_LIVE_STREAM&&(i&&"up_next_artist"!==r.TYPE?i&&(c="",p=s?Object(di.a)("Derniers titres écoutés sur Flow"):Object(di.a)("Derniers titres écoutés dans le mix")):0===t?c+=" "+String.fromCharCode(183)+" "+Object(ys.l)(a,!0):c=Object(di.c)("%s titre sélectionné","%s titres sélectionnés",{count:t,sprintf:[Object(ys.f)(t)]})),Bo.a.createElement("div",{className:"panel-headings"},Bo.a.createElement("h2",{className:"heading-2 ellipsis"},p),Bo.a.createElement("h3",{className:"heading-3-sub ellipsis"},c))},t.prototype._renderActionBar=function(){var e=this.props,t=e.nbSelected,n=e.list,a=e.mediaType;return 0!==t&&Bo.a.createElement("div",{className:"panel-actions"},a!==Yo.a.MEDIA_TYPE_TALK?Bo.a.createElement("a",{className:"btn btn-default btn-mini",role:"button",onClick:this._onAdd},this._renderAdd()):"",n.length>1&&!Qi.a.isActive()?Bo.a.createElement("button",{className:"btn btn-default btn-mini",type:"button",onClick:this._onRemove,"data-type":"edit_delete"},yc):"")},t.prototype._renderUpNextToggle=function(){var e=this.props.hasUpNext,t=ui()({checkbox:!0,checked:e}),n=e?Object(di.a)("Désactiver les recommandations automatiques"):Object(di.a)("Activer les recommandations automatiques");return Bo.a.createElement("button",{type:"button","aria-label":n,onClick:this._onUpNextToggle},Bo.a.createElement("span",{className:t},bc,Bo.a.createElement("span",{className:"checkbox-label heading-3-sub","aria-hidden":"true"},Object(di.a)("Recommandations automatiques"))))},t.prototype._renderAdd=function(){var e=gc,t=this.props,n=t.nbSelected,a=t.selectedItemIds,r=t.selectedItemIndexes,o=t.selectedItemData,i=t.hasSelectedFavorite,s=t.isRadio,l={type:"track",id:a,context:this.panel_name,data:{SONG:1===n?o[0]:{},INDEX:r},position:"bottom",anchor:e,isRadio:s,isFavorite:i};return Bo.a.createElement(ps.a,l)},t.prototype._onSelect=function(e,t){var n=this.props,a=n.onItemSelect,r=n.mediaType,o=n.nbSelected,i=n.onFavoriteToggle;if(a(t),"song"===r&&0===o){var s=Yo.a.getMediaId(t.data),l=t.data[s];i({hasSelectedFavorite:ri.a.isFavorite("song",l)})}},t.prototype._onAdd=function(e){this.tracking("panel_click",e.currentTarget)},t.prototype._onRemove=function(e){var t=this.props.selectedItemIndexes;if(this.tracking("panel_click",e.currentTarget),t.length)for(var n=0,a=t.length;n<a;n++)Yo.a.removeTracks(t[n])},t.prototype._onQueueListChange=function(){ni.a.trigger(ni.a.list.deselectAll)},t.prototype._onUpNextToggle=function(e){e.preventDefault(),e.stopPropagation();var t=this.props,n=t.toggleUpNext,a=t.updateTracklist,r=t.hasUpNext,o=t.context,i=t.list,s=t.recommendations,l=t.index;if(r=!r,n({hasUpNext:r}),!r&&"up_next_artist"===o.TYPE){var c=i.length+s.length,p=l+1;c-p>0&&(Yo.a.removeTracks(p,c-p),a())}},t.prototype._onFavoriteToggle=function(e,t){var n=this.props.selectedItemIds[0];(!t||"song"===t.type&&String(t.id)===n)&&this.props.onFavoriteToggle({hasSelectedFavorite:ri.a.isFavorite("song",n)})},t.prototype._activateScroll=function(){this.state.nbDisplay>this.props.list.length||(this._displayMoreEnabled=!0,this._displayMore())},t.prototype._displayMore=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mc,n=this.state.nbDisplay;this.setState({nbDisplay:n+t},function(){!1===e._displayMoreEnabled||n>e.props.list.length||(e._displayMoreEnabled=!0,e._checkTrackList())})},t.prototype._checkTrackList=function(){var e=this.props.index;return e>this.state.nbDisplay?(this._displayMoreEnabled=!0,this._displayMore(Math.ceil(e/mc)*mc-mc),!1):(this._displayMoreEnabled=!1,!0)},t.prototype._getScrollPosition=function(){var e=this.refs.nano_content;if(this.listNode.offsetHeight<e.offsetHeight)return 0;var t=this.props,n=t.list,a=t.index,r=Math.min(this.state.nbDisplay,n.length);return Math.ceil(this.listNode.offsetHeight/r)*a},t}(Uo.Component),vc=Object(Ds.a)(Object(kl.a)(Object(Al.a)(_c))),Ec=Object(Ho.b)(function(e){return{list:e.player.music.list,recommendations:e.player.music.recommendations,index:e.player.music.index,tracklistDuration:e.player.music.tracklistDuration,context:e.player.music.context,mediaType:e.player.music.mediaType,isRadio:e.player.config.isRadio,isFlow:e.player.config.isFlow,isMyFlow:e.player.config.isMyFlow,selectedItems:e.queuelist.selectedItems,hasSelectedFavorite:e.queuelist.hasSelectedFavorite,isAuth:e.user.isAuth,hasUpNext:e.user.hasUpNext,nbSelected:Object(fc.b)(e),selectedItemIndexes:Object(fc.e)(e),selectedItemData:Object(fc.c)(e),selectedItemIds:Object(fc.d)(e)}},{onItemSelect:fc.f,onFavoriteToggle:fc.g,updateTracklist:es.s,toggleUpNext:si.f},null,{withRef:!0})(vc),Oc=n("./js/_modules/BrowserDetect.js"),jc=Bo.a.createElement(vi.a,{className:"animate-wobble-target",name:"chevron-right"}),Tc=Bo.a.createElement("span",{className:"rounded-icon rounded-icon-user"},Bo.a.createElement(vi.a,{name:"user",size:"16"})),wc=Bo.a.createElement(vi.a,{className:"animate-wobble-target",name:"chevron-right"}),Nc=Bo.a.createElement("span",{className:"rounded-icon rounded-icon-family"},Bo.a.createElement(vi.a,{name:"family",size:"16"})),Sc=Bo.a.createElement(vi.a,{className:"animate-wobble-target",name:"chevron-right"}),Cc=Bo.a.createElement("span",{className:"rounded-icon rounded-icon-help"},Bo.a.createElement(vi.a,{name:"help",size:"16"})),Pc=Bo.a.createElement(vi.a,{className:"animate-wobble-target",name:"chevron-right"}),kc=Bo.a.createElement("span",{className:"rounded-icon rounded-icon-code"},Bo.a.createElement(vi.a,{name:"barcode",size:"16"})),Ac=Bo.a.createElement("input",{className:"checkbox-input",type:"checkbox"}),xc=Bo.a.createElement(vi.a,{className:"checkbox-tick",name:"check"}),Dc=Bo.a.createElement(vi.a,{className:"animate-wobble-target",name:"chevron-right"}),Rc=Bo.a.createElement("span",{className:"rounded-icon rounded-icon-labs"},Bo.a.createElement(vi.a,{name:"labs",size:"16"})),Ic=Bo.a.createElement(vi.a,{className:"checkbox-tick",name:"check"}),Lc=Bo.a.createElement(vi.a,{className:"checkbox-tick",name:"check"}),Mc=Bo.a.createElement(vi.a,{className:"checkbox-tick",name:"check"}),Fc=Bo.a.createElement(vi.a,{className:"checkbox-tick",name:"check"}),Uc=Bo.a.createElement("span",{className:"heading-4","aria-hidden":"true"},"Electron UI"),Bc=Bo.a.createElement("span",{className:"slider-label"},"10"),Hc=Bo.a.createElement(vi.a,{className:"animate-wobble-target",name:"chevron-right"}),Gc=Bo.a.createElement(vi.a,{className:"animate-wobble-target",name:"chevron-right"}),zc=Bo.a.createElement(vi.a,{className:"animate-wobble-target",name:"chevron-right"}),qc=Bo.a.createElement(vi.a,{className:"animate-wobble-target",name:"chevron-right"}),Yc=function(e){function t(n){pn(this,t);var a=un(this,e.call(this,n));return a.panel_name="settings",a.scrollbar={ref:"nano",shouldUpdate:function(){}},a._onHqChange=a._onHqChange.bind(a),a._onFadeChange=a._onFadeChange.bind(a),a._onModalOpenClick=a._onModalOpenClick.bind(a),a._onSetHq=a._onSetHq.bind(a),a._onSetHTML5Player=a._onSetHTML5Player.bind(a),a._setFade=a._setFade.bind(a),a._toggleNormalize=a._toggleNormalize.bind(a),a._toggleUi=a._toggleUi.bind(a),a._onLinkClick=a._onLinkClick.bind(a),a._setFadeOnKeyDown=a._setFadeOnKeyDown.bind(a),a.state={hq:Yo.a.isHq(),fade:Yo.a.fade,normalize:Yo.a.normalize,electronUI:a.props.UI.current===a.props.UI.electron},a}return dn(t,e),t.prototype.componentDidMount=function(){var e=this;ni.a.subscribe(ni.a.player.hq,this._onHqChange,"player"),ni.a.subscribe(ni.a.user.settingChanged,this._onSettingChange,"player"),ni.a.subscribe(ni.a.player.fade,this._onFadeChange,"player"),Xo()(this.refs.fade).draggable({axis:"x",containment:"parent",drag:function(t,n){e.setState({fade:e._getCursorFade(t,n)})},stop:function(t,n){Yo.a.control.changeFadeValue(e._getCursorFade(t,n))}}),this.subscribeOnOpen(function(){var e=document.getElementById("panel-settings");Object(ys.j)(e)})},t.prototype.componentWillUnmount=function(){ni.a.unsubscribe(ni.a.player.hq,this._onHqChange),ni.a.unsubscribe(ni.a.user.settingChanged,this._onSettingChange),ni.a.unsubscribe(ni.a.player.fade,this._onFadeChange)},t.prototype.render=function(){return this.renderPanel(Bo.a.createElement("div",{className:"panel-settings",id:"panel-settings",tabIndex:"0","aria-label":Object(di.a)("Paramètres")},this.renderScrollbar({"panel-body":!0},Bo.a.createElement("div",null,Bo.a.createElement("h2",{className:"panel-heading-sub heading-4 heading-bordered"},Object(di.a)("Compte")),this._renderAccountSettings(),Bo.a.createElement("h2",{className:"panel-heading-sub heading-4 heading-bordered"},Object(di.a)("Audio")),this._renderAudioSettings(),Bo.a.createElement("h2",{className:"panel-heading-sub heading-4 heading-bordered"},Object(di.a)("Découvrir Deezer")),this._renderDiscoveryLinks(),Bo.a.createElement("div",{className:"btn-logout"},Bo.a.createElement("button",{className:"btn btn-danger btn-block","data-type":"log_out",type:"button",onClick:function(){return Ui.a.logout()}},Bo.a.createElement("span",{className:"label"},Object(di.a)("Déconnexion"))))))))},t.prototype._renderAccountSettings=function(){var e=Ui.a.getMultiAccountOptions(),t=ui()({"checkbox checkbox-settings":!0,checked:e.IS_KID});return Bo.a.createElement("ul",{className:"nano-card-list"},Bo.a.createElement("li",null,Bo.a.createElement(ns.a,{className:"nano-card-link heading-4 animate-wobble","data-type":"account",to:"/account",onClick:this._onLinkClick},jc,Tc,Object(di.a)("Paramètres du compte"))),e.ENABLED||e.CHILD_COUNT?Bo.a.createElement("li",null,Bo.a.createElement("a",{className:"nano-card-link heading-4 animate-wobble","data-type":"family_switch","data-modal":"/lightbox/multi_account/switch",href:"/lightbox/multi_account/switch",onClick:this._onModalOpenClick},wc,Nc,e.CHILD_COUNT?Object(di.a)("Changer de profil"):Object(di.a)("Nouveau profil"))):null,Bo.a.createElement("li",null,Bo.a.createElement(ns.a,{className:"nano-card-link heading-4 animate-wobble","data-type":"support",to:"/support",target:"_blank",onClick:this._onLinkClick},Sc,Cc,Object(di.a)("Assistance"))),e.PARENT?null:Bo.a.createElement("li",null,Bo.a.createElement("a",{className:"nano-card-link heading-4 animate-wobble","data-type":"gift_code",href:"/gift",target:"_blank",onClick:this._onLinkClick},Pc,kc,Object(di.a)("Activer un code"))),e.PARENT?Bo.a.createElement("li",null,Bo.a.createElement("button",{className:"nano-card-link","data-type":"is_kid",type:"button",onClick:function(e){return Ui.a.setKidStatus(e)}},Bo.a.createElement("span",{className:t},Ac,xc),Bo.a.createElement("span",{className:"heading-4"},Object(di.a)("Activer Deezer Kids")))):null,Ko.a.isAllowed("web_labs")?Bo.a.createElement("li",null,Bo.a.createElement(ns.a,{className:"nano-card-link heading-4 animate-wobble","data-type":"account",to:"/account/labs",onClick:this._onLinkClick},Dc,Rc,"Deezer Labs")):null)},t.prototype._renderAudioSettings=function(){var e=this.state,t=e.hq,n=e.fade,a=e.normalize,r=e.electronUI,o=ui()({"checkbox checkbox-settings":!0,checked:this.props.hasHTML5Player}),i=ui()({"checkbox checkbox-settings":!0,checked:t}),s=ui()({"checkbox checkbox-settings":!0,checked:a}),l=ui()({"checkbox checkbox-settings":!0,checked:r}),c=Math.round(10*n),p=100*n+"%";return Bo.a.createElement("ul",{className:"nano-card-list"},Yo.a.html5.supported&&"Firefox"!==Oc.a.browser?Bo.a.createElement("li",null,Bo.a.createElement("button",{className:"nano-card-link",type:"button",onClick:this._onSetHTML5Player},Bo.a.createElement("span",{className:o},Ic),Bo.a.createElement("span",{className:"heading-4"},Object(di.a)("Player HTML5")))):null,Bo.a.createElement("li",{"data-type":"audio_hq"},Bo.a.createElement("button",{className:"nano-card-link",type:"button","aria-label":t?Object(di.a)("Désactiver le son Haute Qualité"):Object(di.a)("Activer le son Haute Qualité"),onClick:this._onSetHq},Bo.a.createElement("span",{className:i},Lc),Bo.a.createElement("span",{className:"heading-4","aria-hidden":"true"},Object(di.a)("Haute Qualité")))),Yo.a.html5.active&&(Ko.a.isAllowed("employee_feature")||Ko.a.isAllowed("business"))?Bo.a.createElement("li",null,Bo.a.createElement("button",{className:"nano-card-link",type:"button","aria-label":Object(di.a)("Normaliser le volume"),onClick:this._toggleNormalize},Bo.a.createElement("span",{className:s},Mc),Bo.a.createElement("span",{className:"heading-4","aria-hidden":"true"},Object(di.a)("Normaliser le volume")))):null,Ko.a.isAllowed("electron_ui")?Bo.a.createElement("li",null,Bo.a.createElement("button",{className:"nano-card-link",type:"button",onClick:this._toggleUi},Bo.a.createElement("span",{className:l},Fc),Uc)):null,Yo.a.html5.active?null:Bo.a.createElement("li",{className:"nano-card-link"},Bo.a.createElement("span",{className:"heading-4"},Bo.a.createElement("span",{className:"slider-container pull-right"},Bo.a.createElement("span",{className:"slider-label","aria-live":"assertive"},c),Bo.a.createElement("span",{className:"slider-bar",ref:"fade_bar",onClick:this._setFade},Bo.a.createElement("span",{className:"slider-bar-active",style:{width:p}}),Bo.a.createElement("span",{className:"slider-bar-handler",ref:"fade",tabIndex:"0",role:"slider","aria-label":Object(di.a)("Fondu sonore"),"aria-valuemin":"0","aria-valuemax":"10","aria-valuetext":Object(di.a)("Fondu sonore - Niveau %s",{sprintf:[c]}),"aria-valuenow":c,onKeyDown:this._setFadeOnKeyDown,style:{left:p}})),Bc),Object(di.a)("Fondu sonore"))))},t.prototype._renderDiscoveryLinks=function(){return Bo.a.createElement("ul",{className:"nano-card-list"},Bo.a.createElement("li",null,Bo.a.createElement(ns.a,{className:"nano-card-link heading-4 animate-wobble","data-type":"offers",to:"/offers",target:"_blank",onClick:this._onLinkClick},Hc,Object(di.a)("Offres"))),Bo.a.createElement("li",null,Bo.a.createElement(ns.a,{className:"nano-card-link heading-4 animate-wobble","data-type":"company",to:"/company",target:"_blank",onClick:this._onLinkClick},Gc,Object(di.a)("À propos"))),Bo.a.createElement("li",null,Bo.a.createElement(ns.a,{className:"nano-card-link heading-4 animate-wobble","data-type":"features",to:"/features",target:"_blank",onClick:this._onLinkClick},zc,Object(di.a)("Fonctionnalités"))),Bo.a.createElement("li",null,Bo.a.createElement(ns.a,{className:"nano-card-link heading-4 animate-wobble","data-type":"jobs",to:"/jobs",target:"_blank",onClick:this._onLinkClick},qc,Object(di.a)("Jobs"))))},t.prototype._onHqChange=function(e,t){this.setState({hq:t}),this.props.onHqAudioToggle({hasHqAudio:t})},t.prototype._onSettingChange=function(e,t){t.data&&t.data.site&&(void 0!==t.data.site.player_html5||void 0!==t.data.site.version)&&$i.a.reload()},t.prototype._onFadeChange=function(e,t){this.setState({fade:t})},t.prototype._onLinkClick=function(e){this.tracking("panel_click",e.currentTarget),ni.a.trigger(ni.a.menu.closeAllPanels)},t.prototype._onModalOpenClick=function(e){if(void 0===e.keyCode||13===e.keyCode){e.preventDefault(),e.stopPropagation();var t=Hi.a.dataset(e.currentTarget,"modal");"string"==typeof t&&(this.tracking("panel_click",e.currentTarget),ni.a.trigger(ni.a.menu.closeAllPanels),ti.a.open(t))}},t.prototype._onSetHq=function(e){e.preventDefault(),this.props.hasHqAudio?Yo.a.control.setHq(!this.state.hq):(Object($i.b)("/offers"),ni.a.trigger(ni.a.menu.closeAllPanels))},t.prototype._onSetHTML5Player=function(e){e.preventDefault(),Bi.a.set({site:{player_html5:!this.props.hasHTML5Player}})},t.prototype._getCursorFade=function(e,t){var n=t.position.left/(e.target.parentNode.offsetWidth-5);return n=Math.min(n,1),n=Math.max(n,0)},t.prototype._setFade=function(e){var t=(e.pageX-Xo()(e.target).offset().left)/this.refs.fade_bar.offsetWidth;Yo.a.control.changeFadeValue(Math.min(Math.max(t,0),1))},t.prototype._toggleNormalize=function(){var e=!this.state.normalize;Bi.a.set({site:{player_normalize:e}}),this.setState({normalize:e}),Yo.a.control.setNormalize(e)},t.prototype._toggleUi=function(){var e=!this.state.electronUI;Bi.a.set({site:{version:e?this.props.UI.electron:this.props.UI.web}}),this.setState({electronUI:e})},t.prototype._setFadeOnKeyDown=function(e){if(-1!==[33,34,35,36,37,38,39,40].indexOf(e.keyCode)){e.preventDefault();var t=this.state.fade;37!==e.keyCode&&40!==e.keyCode||(t-=.01),34===e.keyCode&&(t-=.1),36===e.keyCode&&(t=0),39!==e.keyCode&&38!==e.keyCode||(t+=.01),33===e.keyCode&&(t+=.1),35===e.keyCode&&(t=10),Yo.a.control.changeFadeValue(Math.min(Math.max(t,0),1))}},t}(Uo.PureComponent);Yc.defaultProps={hasHTML5Player:Yo.a.html5.supported};var Wc=Object(Ds.a)(Object(kl.a)(Object(Al.a)(Yc))),Vc=Object(Ho.b)(function(e){var t=e.user;return{userLang:t.SETTING_LANG,hasHqAudio:t.USER.OPTIONS.web_hq,hasHTML5Player:t.USER.SETTING.site.player_html5,UI:Object(si.c)(t)}},{onHqAudioToggle:si.e},null,{withRef:!0})(Wc),Kc=n("./js/core/Blurred.js"),Qc=n.n(Kc),Xc=n("./js/_modules/lyrics.js"),$c=Bo.a.createElement("g",{fill:"none",stroke:"rgba(255,255,255,0.3)"},Bo.a.createElement("circle",{cx:"50",cy:"50",r:"45"})),Jc=Bo.a.createElement("circle",{cx:"50",cy:"50",r:"45"}),Zc=Bo.a.createElement("span",{className:"icon icon-32 icon-lyrics"}),ep=function(e){function t(n){hn(this,t);var a=mn(this,e.call(this,n));return a.state=a._getState(),a}return yn(t,e),t.prototype.componentWillReceiveProps=function(e){var t=this;this._animTimeoutRef=setTimeout(function(){t.setState(t._getState(e))},0)},t.prototype.shouldComponentUpdate=function(e,t){return-1===e.max||t.strokeDashoffset>=0&&0!==this.state.strokeDashoffset},t.prototype.componentWillUnmount=function(){clearTimeout(this._animTimeoutRef)},t.prototype.render=function(){var e=this.props,t=e.show,n=e.max,a=e.now,r=e.strokeDasharray,o=this.state,i=o.strokeDashoffset,s=o.transition;if(!t)return null;var l={strokeDashoffset:i},c=ui()({"starter-svg":!0,"svg-animate":s}),p=void 0,u=void 0,d=void 0,f=void 0,h=void 0;return n>0&&(p=0,d=a<(u=n)?a:u,f=Math.floor(u-d),h=Object(di.c)("%s seconde","%s secondes",{sprintf:[f],count:f})),Bo.a.createElement("div",{className:"lyrics-starter"},Bo.a.createElement("div",{className:"starter-anim"},Bo.a.createElement("svg",{className:c,height:"100",width:"100",x:"0px",y:"0px"},$c,Bo.a.createElement("g",{className:"spinner",fill:"none",stroke:"#FFFFFF",role:"timer","aria-describedby":"starter-message",strokeDasharray:r,style:l,"aria-valuemin":p,"aria-valuemax":u,"aria-valuenow":d,"aria-valuetext":h},Jc)),Zc))},t.prototype._getState=function(e){var t=(e=e||this.props).max>=0?e.strokeDasharray:0,n=this.state?this.state.strokeDashoffset:null,a=void 0,r=void 0;return e.max>0&&e.now<=e.max&&(t=e.now>0?e.strokeDasharray/(e.max/e.now):0),r=e.strokeDasharray-t,a=!(0===r||r===e.strokeDasharray||null!==n&&r>=n),{strokeDashoffset:e.strokeDasharray-t,transition:a}},t}(Uo.Component);ep.defaultProps={now:0,max:-1,strokeDasharray:300,show:!1};var tp=ep,np=n("./js/_components/Image/index.js"),ap=function(e){function t(n){gn(this,t);var a=_n(this,e.call(this,n));return a.state=a._getState(n.track,n.show),a}return vn(t,e),t.prototype.componentWillReceiveProps=function(e){var t=this;this.setState(this._getState(e.track,e.show),function(){t._fadeTimeoutRef=setTimeout(function(){t.setState({fadeIn:e.show})},0)})},t.prototype.componentWillUnmount=function(){clearTimeout(this._fadeTimeoutRef)},t.prototype.render=function(){var e=this.props,t=e.show,n=e.placeholders,a=e.explanations,r=this.state,o=r.placeholderIndex,i=r.explanationIndex,s=r.fadeIn;if(!t)return null;var l=n[o],c=a[i],p=Object(di.a)("(Mal) entendu dans %1$s <em>de %2$s</em>",{sprintf:[l.title,l.artist]}),u=ui()({"lyrics-placeholder":!0,"lyrics-placeholder-active":s});return Bo.a.createElement("div",{className:u,role:"alert"},Bo.a.createElement("div",{className:"lyrics-placeholder-image"},Bo.a.createElement(np.a,{src:"naboo/layouts/panels/lyrics/placeholder_"+(o+1)+".png",width:"64",height:"64"})),Bo.a.createElement("div",{className:"lyrics-placeholder-quote"},l.quote),Bo.a.createElement("div",{className:"lyrics-placeholder-track",dangerouslySetInnerHTML:{__html:p}}),Bo.a.createElement("div",{className:"lyrics-placeholder-message"},c))},t.prototype._getState=function(e,t){if(!t)return{};var n=this.props,a=n.placeholders,r=n.explanations,o=a.length,i=this.state?this.state.placeholderIndex:null,s=this.state?this.state.explanationIndex:null,l="fr"===Wo.a.get("SETTING_LANG")?o:o-1;return{placeholderIndex:this._getRandom(0,l,i),explanationIndex:this._getRandom(0,r.length,s),fadeIn:!1}},t.prototype._getRandom=function(e,t,n){if(t<=1)return 0;var a=Math.floor(Math.random()*(t-e))+e;return void 0!==n&&a===n?a===t-1?--a:++a:a},t}(Uo.PureComponent);ap.defaultProps={placeholders:[{title:"You Oughta Know",artist:"Alanis Morissette",quote:"It's not fair, to deny me of the cross-eyed bear that you gave to me"},{title:"Rock the Casbah",artist:"The Clash",quote:"Shareef don't like it. Rock the cat box, rock the cat box"},{title:"Sweet Dreams",artist:"Eurythmics",quote:"Sweet dreams are made of cheese"},{title:"Bad Moon Rising",artist:"Creedence Clearwater Revival",quote:"Don't go around tonight, it's bound to take your life, there's a bathroom on the right"},{title:"Smells Like Teen Spirit",artist:"Nirvana",quote:"Here we are now, in containers"},{title:"Message in a Bottle",artist:"The Police",quote:"Mon opinel a dû mal couper !"}],explanations:[Object(di.a)("OK... Nous n'avons pas les paroles de cette chanson."),Object(di.a)("Pas tout à fait... On donne tout pour trouver les paroles de cette chanson."),Object(di.a)("Presque... On se dépêche de vous trouver les paroles de cette chanson.")]};var rp=ap,op=function(e){function t(n){On(this,t);var a=jn(this,e.call(this,n));return a._onClick=a._onClick.bind(a),a}return Tn(t,e),t.prototype.render=function(){var e=this.props,t=e.milliseconds,n=e.line,a=e.active,r=e.oneLine,o=void 0!==t;n=n?n.trim():"";var i=ui()({"lyrics-line":!0,"lyrics-line-empty":!n,"lyrics-line-active":o&&a,ellipsis:r});return o?Bo.a.createElement("a",{ref:this.props.lyricRef,className:i,onClick:this._onClick},n):Bo.a.createElement("p",{ref:this.props.lyricRef,className:i},n)},t.prototype._onClick=function(){var e=this.props,t=e.milliseconds,n=e.index,a=e.seek;ni.a.trigger(ni.a.lyrics.seek,{milliseconds:t,index:n,seek:a})},t}(Uo.PureComponent);op.defaultProps={seek:!0,oneLine:!1,lyricRef:void 0};var ip=op,sp=Bo.a.createElement("span",{className:"icon icon-cancel"}),lp=function(e){function t(){return Nn(this,t),Sn(this,e.apply(this,arguments))}return Cn(t,e),t.prototype.shouldComponentUpdate=function(e){var t=this.props,n=t.track,a=t.lyric;return e.track.SNG_ID!==n.SNG_ID||void 0!==e.lyric&&void 0===a||void 0===e.lyric&&void 0!==a||void 0!==e.lyric&&void 0!==a&&(e.lyric.milliseconds!==a.milliseconds||e.lyric.line!==a.line)},t.prototype.render=function(){var e=this.props,t=e.lyric,n=e.track,a=void 0!==t,r="https://"+Wo.a.get("host_img_url_ssl")+"/cover/"+n.ALB_PICTURE+"/65x65-000000-80-0-0.jpg",o=ui()({"lyrics-track-infos":!0,hide:a}),i=ui()({"lyrics-active":!0,hide:!a});return Bo.a.createElement("div",{className:"panel-header"},Bo.a.createElement("div",{className:"panel-header-container clearfix"},Bo.a.createElement(ns.a,{to:"/album/"+n.ALB_ID,className:"evt-click"},Bo.a.createElement("figure",{className:"lyrics-thumbnail"},Bo.a.createElement("img",{width:"65",height:"65",src:r,alt:n.ALB_TITLE,title:n.ALB_TITLE}))),Bo.a.createElement("div",{className:"lyrics-infos"},Bo.a.createElement("p",{className:"sticker sticker-small sticker-flow"},Object(di.a)("PAROLES")),Bo.a.createElement("div",{className:o,"aria-hidden":a},Bo.a.createElement("h2",{className:"heading-4 heading-inverse",itemProp:"name"},n.SNG_TITLE),Bo.a.createElement("h3",{className:"heading-4-sub heading-inverse"},Object(di.a)("par")+" "," ",Bo.a.createElement(ns.a,{to:"/artist/"+n.ART_ID,className:"lyrics-artist-link evt-click"},n.ART_NAME))),Bo.a.createElement("p",{className:i,"aria-hidden":!a},a?Bo.a.createElement(ip,{line:t.line,milliseconds:t.milliseconds,active:!0,seek:!1,oneLine:!0}):""))),Bo.a.createElement("button",{className:"btn btn-link panel-close",type:"button","aria-label":Object(di.a)("Masquer les paroles"),onClick:this._closePanels},sp))},t.prototype._closePanels=function(){ni.a.trigger(ni.a.menu.closeAllPanels)},t}(Uo.Component),cp=function(e){function t(){return kn(this,t),An(this,e.apply(this,arguments))}return xn(t,e),t.prototype.shouldComponentUpdate=function(e){var t=this.props,n=t.activeIndex,a=t.synchro,r=t.lyrics;return e.activeIndex!==n||e.synchro!==a||e.lyrics.length!==r.length},t.prototype.getLyric=function(e){return this["lyric"+e+"Node"]},t.prototype.render=function(){var e=this,t=this.props,n=t.lyrics,a=t.activeIndex,r=t.synchro,o=void 0,i=void 0,s=void 0,l=void 0;return"snippet"===this.props.lyricsBehaviour&&n.splice(0,n.length-5),Bo.a.createElement("ol",{className:"lyrics-content",itemProp:"text"},n.map(function(t,n){return o=n===a,i="lyric_"+n,s=t,r&&(s=t.line,l=t.milliseconds),Bo.a.createElement("li",{key:i},Bo.a.createElement(ip,{lyricRef:function(t){return e["lyric"+n+"Node"]=t},index:n,line:s,milliseconds:l,active:o}))}))},t}(Uo.Component);cp.defaultProps={lyrics:[],activeIndex:void 0,synchro:!1,lyricsBehaviour:void 0};var pp=Object(Ho.b)(function(e){return{lyricsBehaviour:(e.user.USER.ABTEST.lyrics||{}).behaviour}},null,null,{withRef:!0})(cp),up=Bo.a.createElement("div",{className:"panel-lyrics-overlay"}),dp=Bo.a.createElement("div",{className:"lyrics-blurred"}),fp=Bo.a.createElement("div",{className:"ads ads-bottom"},Bo.a.createElement("div",{id:"lyrics_ads_banner_bottom"})),hp=function(e){function t(n){Rn(this,t);var a=In(this,e.call(this,n));a.panel_name="lyrics",a.scrollbar={ref:"nano",disableScrollTopOnUpdate:!0,shouldUpdate:function(e,t){return a.state.lyrics.length!==t.lyrics.length}},a._onFocus=a._onFocus.bind(a),a._onBlur=a._onBlur.bind(a),a._onTrackChange=a._onTrackChange.bind(a),a._onPlayerTypeChange=a._onPlayerTypeChange.bind(a),a._onPositionChange=a._onPositionChange.bind(a),a._onPlayerSeek=a._onPlayerSeek.bind(a),a._onLyricsLoad=a._onLyricsLoad.bind(a),a._onLyricsSeek=a._onLyricsSeek.bind(a),a._onPanelScroll=a._onPanelScroll.bind(a),a._scrollToTop=a._scrollToTop.bind(a),a.getTrackingParams=a.getTrackingParams.bind(a);var r=a._getStateFromStore();return r.position=Yo.a.getPosition(),r.isActivePanel=!0,r.firstOpen=!0,a.state=r,a}return Ln(t,e),t.prototype.componentDidMount=function(){var e=this;ni.a.subscribe(ni.a.player.displayCurrentSong,this._onTrackChange,"lyrics_panel"),ni.a.subscribe(ni.a.player.changePlayerType,this._onPlayerTypeChange,"lyrics_panel"),ni.a.subscribe(ni.a.player.position,this._onPositionChange,"lyrics_panel"),ni.a.subscribe(ni.a.player.seek,this._onPlayerSeek,"lyrics_panel"),ni.a.subscribe(ni.a.lyrics.load,this._onLyricsLoad,"lyrics_panel"),ni.a.subscribe(ni.a.lyrics.seek,this._onLyricsSeek,"lyrics_panel"),window.addEventListener("focus",this._onFocus),window.addEventListener("blur",this._onBlur),this.subscribeOnOpen(function(){var t=e.state,n=t.track,a=t.activeLyricIndex;if(n.SNG_ID===Yo.a.getCurrentSong("SNG_ID")&&e._scrollToActiveLyric(a,!0),!e.state.autoScroll){var r=document.getElementById("panel-lyrics");Object(ys.j)(r)}}),Xo()(this.refs.nano_content).on("scroll",this._onPanelScroll),this._setCoverBackground(this.state.track.ALB_PICTURE),Yo.a.control.loadLyrics()},t.prototype.componentWillReceiveProps=function(e){this.setState({isActivePanel:"lyrics"===e.selected&&!0===e.displayed})},t.prototype.shouldComponentUpdate=function(){return!0===this.state.isActivePanel},t.prototype.componentWillUpdate=function(e,t){t.isActivePanel&&(this._scrollTopWhenActive?(this._scrollTopWhenActive=!1,this._scrollTopTimeoutRef=setTimeout(this._scrollToTop,0)):t.autoScroll&&t.hasLyrics&&this._scrollToActiveLyric(t.activeLyricIndex))},t.prototype.componentWillUnmount=function(){clearTimeout(this._scrollTopTimeoutRef),clearTimeout(this._scrollLyricTimeoutRef),clearTimeout(this._scrollTopAnimateRef),clearTimeout(this._coverTimeoutRef),clearTimeout(this._animTimeoutRef),ni.a.unsubscribeAll("lyrics_panel"),Xo()(this.refs.nano_content).off("scroll",this._onPanelScroll)},t.prototype.getTrackingParams=function(){return{action:{type:"display"},container:"panel",sng:this.state.track.SNG_ID,type:Yo.a.hasSyncLyrics()?"synchro":"full_text"}},t.prototype.render=function(){var e=this.state,t=e.hasLyrics,n=e.synchro,a=e.ready,r=e.autoScroll,o=e.activeLyricIndex,i=e.lyrics,s=e.track,l=e.timeToFirstLyric,c=e.position,p=ui()("panel-lyrics",{"has-lyrics":t,"has-synchro":n}),u=ui()({"lyrics-container":!0,"lyrics-container-active":a}),d=void 0;n&&!r&&-1!==o&&(d=i[o]);var f=a&&t,h=f&&n?"marquee":null,m=void 0;f&&n&&(m=r?"assertive":"polite");var y=this.props.lyricsBehaviour;return this.renderPanel(Bo.a.createElement("div",{className:p,ref:"panel_lyrics",itemScope:!0,itemType:"http://data-vocabulary.org/MusicRecording",id:"panel-lyrics","aria-label":Object(di.a)("PAROLES"),tabIndex:"0"},up,Bo.a.createElement(lp,{track:s,lyric:d}),this.renderScrollbar({"panel-body lyrics-panel-body":!0},Bo.a.createElement("article",{className:u,role:h,"aria-live":m},"static"===y&&t?this._renderSubscription():"",Bo.a.createElement(rp,{show:a&&!t,track:s}),Bo.a.createElement(tp,{show:f,max:l,now:c}),"noLyrics"===y&&t?dp:Bo.a.createElement(pp,{ref:"lyriclist",synchro:n,lyrics:i,activeIndex:o}),this._renderFooter())),this.props.hasAds?fp:"",Bo.a.createElement("div",{className:"panel-footer"},t&&"full"===this.props.lyricsBehaviour?Bo.a.createElement("a",{className:"evt-click btn btn-link link-animated",onClick:this._closePanels,href:"/track/"+s.SNG_ID},Bo.a.createElement("span",{className:"label"},Object(di.a)("TOUTES LES PAROLES"))):"")))},t.prototype._renderFooter=function(){var e=this.state,t=e.hasLyrics,n=e.metadata;if(!t)return null;var a=this.props.lyricsBehaviour;return"noLyrics"===a||"snippet"===a?this._renderSubscription():Bo.a.createElement("div",{className:"lyrics-legal",role:"complementary"},Bo.a.createElement("p",null,Object(di.a)("Licence et autorisation données par LyricFind")),Bo.a.createElement("p",null,"© ",n.copyrights),Bo.a.createElement("p",null,n.writers))},t.prototype._renderSubscription=function(){var e=this.props.lyricsBehaviour,t=ui()("lyrics-subscription",{"is-top":"static"===e,"is-bottom":"noLyrics"===e||"snippet"===e});return Bo.a.createElement("div",{className:t},Bo.a.createElement("h2",{className:"heading-2 heading-inverse"},Object(Xc.a)()),Bo.a.createElement("button",{className:"btn btn-primary btn-xlarge",type:"button",onClick:this._onSubscribe},Bo.a.createElement("span",{className:"label"},Object(di.a)("S'ABONNER"))))},t.prototype._onTrackChange=function(e,t){var n=this,a=this.state.track;this._scrollTopWhenActive=!0,a.ALB_ID!==t.ALB_ID&&(this._coverTimeoutRef=setTimeout(function(){n._setCoverBackground(t.ALB_PICTURE)},0)),this.setState(this._getStateFromStore(),Yo.a.control.loadLyrics)},t.prototype._onSubscribe=function(){Object($i.b)("https://"+Wo.a.get("host_website_ssl")+"/payment/go.php?origin=lyrics_"+this.props.lyricsOption.toLocaleLowerCase())},t.prototype._onBlur=function(){this._hidden=!0},t.prototype._onFocus=function(){this._hidden=!1},t.prototype._onLyricsLoad=function(){var e=this,t=Yo.a.hasSyncLyrics(),n=Yo.a.getLyrics(),a={lyrics:n,metadata:Yo.a.getLyricsMetadata(),hasLyrics:n&&0!==n.length,ready:!0,synchro:!1,autoScroll:!1,autoSeek:!1},r=void 0;if(this.tracking("lyrics"),t){r=[];for(var o=0,i=n.length;o<i;o++){var s=n[o];s&&s.line&&s.milliseconds&&(s.originalIndex=o,r.push(s))}a=r.length>0?Object.assign({},a,{lyricIndex:r,synchro:!0,autoScroll:!0,autoSeek:!0,timeToFirstLyric:parseInt(r[0].milliseconds,10)/1e3}):Object.assign({},a,{hasLyrics:!1,lyrics:[]})}this._animTimeoutRef=setTimeout(function(){e.setState(a)},0)},t.prototype._onPositionChange=function(e,t){var n=this.state,a=n.isActivePanel,r=n.hasLyrics,o=n.synchro,i=n.canSeek,s=n.autoSeek,l=n.activeLyricIndex,c=this.props,p=c.isAuth,u=c.unloggedClipLength;if(!this._hidden&&a&&r&&o){!p&&i&&(t+=u);var d=this._findLyric(t);s?(-1===d&&-1!==l&&(this._scrollTopWhenActive=!0),this.setState({position:t,activeLyricIndex:d})):this.setState({position:t,autoSeek:d===l})}},t.prototype._onLyricsSeek=function(e,t){var n=this.state,a=n.activeLyricIndex,r=n.canSeek,o=n.track,i=this.props,s=i.isAuth,l=i.unloggedClipLength,c=void 0,p=void 0,u=void 0;if(!t.seek||r){if(void 0!==t.index){if(t.index===a&&Yo.a.playing)return;a=t.index}if(t.seek){if(u=parseInt(t.milliseconds,10)/1e3,p=parseInt(o.DURATION,10),s||(p=l,u-=l),(c=u/p)>1||!s&&u<0)return;Yo.a.control.seek(c)}else this._scrollToActiveLyric(a),Yo.a.isPaused()&&Yo.a.control.togglePause();this.setState({activeLyricIndex:a,autoSeek:!t.seek,autoScroll:!0})}},t.prototype._onPlayerSeek=function(e,t){var n=this.state,a=n.synchro,r=n.autoScroll;a&&!r&&this.setState({activeLyricIndex:this._findLyric(t),autoScroll:!0})},t.prototype._onPanelScroll=function(){this.state.synchro&&!this._blockUserScroll&&this.setState({autoScroll:!1})},t.prototype._onPlayerTypeChange=function(){this.state.isActivePanel&&"ads"===Yo.a.getPlayerType()&&ni.a.trigger(ni.a.menu.togglePanel,{panel:"lyrics"})},t.prototype._getStateFromStore=function(){var e=Yo.a.hasLyrics();return{track:Yo.a.getCurrentSong(),hasLyrics:e,lyrics:[],metadata:{},position:0,synchro:!1,autoScroll:!1,autoSeek:!1,timeToFirstLyric:-1,activeLyricIndex:-1,ready:!e,canSeek:Yo.a.control.canSeek(),firstOpen:!1}},t.prototype._closePanels=function(){ni.a.trigger(ni.a.menu.closeAllPanels)},t.prototype._scrollToActiveLyric=function(e,t){var n=this,a=this.state,r=a.autoScroll,o=a.activeLyricIndex;if(!r||t||o!==e){var i=this.refs.lyriclist.getWrappedInstance().getLyric(e);if(i){this._blockUserScroll=!0;var s=this.refs.nano_content,l=Xo()(s).scrollTop(),c=s.offsetHeight||0,p=Xo()(i).position().top,u=this.props,d=u.autoScrollDuration,f=u.autoScrollEasing,h=u.scrollWaitTimeout,m=i.getBoundingClientRect();(t||m.bottom<=0||m.bottom>c)&&(d/=3),Xo()(s).animate({scrollTop:l+p-c/2},d,f,function(){n._scrollLyricTimeoutRef=setTimeout(function(){n._blockUserScroll=0!==Xo()(s).queue("fx").length},h)})}}},t.prototype._scrollToTop=function(){var e=this;this._blockUserScroll=!0,this.refs.nano_content.scrollTop=0,this._scrollTopAnimateRef=setTimeout(function(){e._blockUserScroll=!1},this.props.scrollWaitTimeout)},t.prototype._setCoverBackground=function(e){var t=this.refs.panel_lyrics,n="http://cdn-images.deezer.com/images/cover/"+e+"/500x500-000000-80-0-0.jpg";new Qc.a(t).setUrl(n).setBlurStrength(3).render()},t.prototype._findLyric=function(e){var t=this.state,n=t.lyricIndex,a=t.timeToFirstLyric,r=Math.round(1e3*e),o=1e3*a,i=0,s=n.length,l=void 0,c=void 0,p=void 0;if(r<o)return-1;var u=n[s-1];if(r>parseInt(u.milliseconds,10))return n[s-1].originalIndex;for(;i!==s&&(l=Math.floor((i+s)/2),(c=parseInt(n[l].milliseconds,10))!==r);)c<r?i=l+1:s=l;return p=0===i?i:i-1,n[p].originalIndex},t}(Uo.Component);hp.defaultProps={tolerance:0,autoScrollDuration:500,scrollWaitTimeout:900,unloggedClipLength:30,autoScrollEasing:"swing",lyricsBehaviour:void 0,lyricsOption:void 0};var mp=Object(Ho.b)(function(e){var t=e.user;return{isAuth:t.isAuth,hasAds:t.USER.OPTIONS.ads_display,lyricsBehaviour:(t.USER.ABTEST.lyrics||{}).behaviour,lyricsOption:(t.USER.ABTEST.lyrics||{}).option}},null,null,{withRef:!0})(Object(Ds.a)(Object(kl.a)(Object(Al.a)(hp)))),yp=n("./js/_modules/facebook/index.js"),bp=n("./js/_modules/googleplus/index.js"),gp=n("./js/_modules/twitter.js"),_p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},vp=function(e){function t(n){Fn(this,t);var a=Un(this,e.call(this,n));return a.getTrackingParams=a.getTrackingParams.bind(a),a._markAsRead=a._markAsRead.bind(a),a._onItemClick=a._onItemClick.bind(a),a.state={data:n.data},a}return Bn(t,e),t.prototype.shouldComponentUpdate=function(e,t){return t.data.NOTIFICATION_ID!==this.state.data.NOTIFICATION_ID||t.data.READ!==this.state.data.READ},t.prototype.getTrackingParams=function(){return{type:"notification",id:this.state.data.NOTIFICATION_ID,index:this.props.index}},t.prototype.render=function(){var e=!this.state.data.READ,t={className:ui()({"notifications-item":!0,"is-unread":e}),onClick:this._onItemClick};return e&&(t.onMouseOver=this._markAsRead),Bo.a.createElement("li",t,Bo.a.createElement("div",{className:"notifications-item-container"},Bo.a.createElement("div",{className:"notifications-item-heading"},this._renderPicture(),this._renderMessage()),this._renderContent()))},t.prototype._renderPicture=function(){var e=this.state.data;return Bo.a.createElement("div",{className:"notifications-item-picture"},Bo.a.createElement(lc.a,{type:"user",height:32,width:32,rounded:!0,data:e.DATA}))},t.prototype._renderMessage=function(){var e=this.state.data,t=this._getMessage("SHARE"===e.TYPE?"SHARE_"+e.DATA.TYPE:e.TYPE);return Bo.a.createElement("div",{className:"notifications-item-message"},Bo.a.createElement("div",{className:"heading-4-sub"},Bo.a.createElement(ns.a,{className:"link-username",to:"/profile/"+e.DATA.USER_ID},e.DATA.USER_NAME)," ",Bo.a.createElement("span",null,t)))},t.prototype._renderContent=function(){var e=this.state.data;if("FRIEND_FOLLOW"===e.TYPE)return Bo.a.createElement("div",{className:"notifications-item-content"},this._renderDate());var t=this._getMediaType(e);return Bo.a.createElement("div",{className:"notifications-item-content"},Bo.a.createElement("div",{className:"notifications-item-media"},Bo.a.createElement("div",{className:"notifications-item-media-picture"},Bo.a.createElement(lc.a,{type:t,height:56,width:56,play:"on",context:"menu_panel_notification_"+t,data:e.DATA})),this._renderMediaTitle(t)),this._renderComment(),this._renderDate())},t.prototype._renderMediaTitle=function(e){var t=this.state.data.DATA;switch(e){case"album":return Bo.a.createElement("div",{className:"notifications-item-media-title"},Bo.a.createElement("div",{className:"heading-4"},Bo.a.createElement(ns.a,{to:"/album/"+t.ALB_ID,title:t.ALB_TITLE},t.ALB_TITLE)),Bo.a.createElement("div",{className:"heading-4-sub"},Bo.a.createElement("span",null,Object(di.a)("par"))," ",Bo.a.createElement(ns.a,{to:"/artist/"+t.ART_ID,title:t.ART_NAME},t.ART_NAME)));case"artist":return Bo.a.createElement("div",{className:"notifications-item-media-title"},Bo.a.createElement("div",{className:"heading-4"},Bo.a.createElement(ns.a,{to:"/artist/"+t.ART_ID,title:t.ART_NAME},t.ART_NAME)));case"episode":return Bo.a.createElement("div",{className:"notifications-item-media-title"},Bo.a.createElement("div",{className:"heading-4"},Bo.a.createElement(ns.a,{to:"/episode/"+t.EPISODE_ID,title:t.EPISODE_TITLE},t.EPISODE_TITLE)),Bo.a.createElement("div",{className:"heading-4-sub"},Bo.a.createElement("span",null,Object(di.a)("par"))," ",Bo.a.createElement(ns.a,{to:"/show/"+t.SHOW_ID,title:t.SHOW_NAME},t.SHOW_NAME)));case"playlist":return Bo.a.createElement("div",{className:"notifications-item-media-title"},Bo.a.createElement("div",{className:"heading-4"},Bo.a.createElement(ns.a,{to:"/playlist/"+t.PLAYLIST_ID,title:t.PLAYLIST_TITLE},t.PLAYLIST_TITLE)));case"radio":return Bo.a.createElement("div",{className:"notifications-item-media-title"},Bo.a.createElement("div",{className:"heading-4"},Bo.a.createElement(ns.a,{to:"/mixes/genre/"+t.RADIO_ID,title:t.RADIO_TITLE},t.RADIO_TITLE)));case"show":return Bo.a.createElement("div",{className:"notifications-item-media-title"},Bo.a.createElement("div",{className:"heading-4"},Bo.a.createElement(ns.a,{to:"/show/"+t.SHOW_ID,title:t.SHOW_NAME},t.SHOW_NAME)));case"track":return Bo.a.createElement("div",{className:"notifications-item-media-title"},Bo.a.createElement("div",{className:"heading-4"},Bo.a.createElement(ns.a,{to:"/track/"+t.SNG_ID,title:t.SNG_TITLE},t.SNG_TITLE)),Bo.a.createElement("div",{className:"heading-4-sub"},Bo.a.createElement("span",null,Object(di.a)("par"))," ",Bo.a.createElement(ns.a,{to:"/artist/"+t.ART_ID,title:t.ART_NAME},t.ART_NAME)));default:return null}},t.prototype._renderComment=function(){var e=this.state.data;return e.DATA.hasOwnProperty("COMMENT")&&""!==e.DATA.COMMENT?Bo.a.createElement("div",{className:"notifications-item-comment"},e.DATA.COMMENT):null},t.prototype._renderDate=function(){var e=this.state.data;return e.hasOwnProperty("DATE")?Bo.a.createElement("div",{className:"notifications-item-date"},Object(ys.m)(this.props.currentTimestamp-e.DATE)):null},t.prototype._onItemClick=function(e){this.tracking("panel_click",e.currentTarget)},t.prototype._markAsRead=function(){var e=_p({},this.state.data);e.READ||(e.READ=1,this.setState({data:e},function(){ri.a.markNotificationAsRead(e.NOTIFICATION_ID)}))},t.prototype._getMediaType=function(e){if("SHARE"===e.TYPE)return"SONG"===e.DATA.TYPE?"track":e.DATA.TYPE.toLowerCase();switch(e.TYPE){case"ALBUM_COMMENT":case"ALBUM_FAN":return"album";case"ARTIST_COMMENT":case"ARTIST_FAN":return"artist";case"PLAYLIST_COMMENT":case"PLAYLIST_CREATION":case"PLAYLIST_FAN":return"playlist";case"RADIO_COMMENT":case"RADIO_FAN":return"radio";default:return""}},t.prototype._getMessage=function(e){var t={ALBUM_COMMENT:Object(di.a)("a commenté cet album."),ALBUM_FAN:Object(di.a)("a ajouté cet album à sa musique préférée."),ARTIST_COMMENT:Object(di.a)("a commenté cet artiste."),ARTIST_FAN:Object(di.a)("a ajouté cet artiste à sa musique préférée."),FRIEND_FOLLOW:Object(di.a)("suit désormais votre activité musicale."),PLAYLIST_COMMENT:Object(di.a)("a commenté votre playlist."),PLAYLIST_CREATION:Object(di.a)("vient de créer cette playlist."),PLAYLIST_FAN:Object(di.a)("a ajouté cette playlist à sa musique préférée."),RADIO_COMMENT:Object(di.a)("a commenté ce mix."),RADIO_FAN:Object(di.a)("a ajouté ce mix à sa musique préférée."),SHARE_ALBUM:Object(di.a)("vous recommande cet album."),SHARE_ARTIST:Object(di.a)("vous recommande cet artiste."),SHARE_EPISODE:Object(di.a)("vous recommande cet épisode."),SHARE_PLAYLIST:Object(di.a)("vous recommande cette playlist."),SHARE_RADIO:Object(di.a)("vous recommande ce mix."),SHARE_SHOW:Object(di.a)("vous recommande ce podcast."),SHARE_SONG:Object(di.a)("vous recommande ce titre.")};return t.hasOwnProperty(e)?t[e]:""},t}(Uo.Component),Ep=Object(Ho.b)(function(e){var t=e.user;return{currentTimestamp:Object(si.b)(t.SERVER_TIMESTAMP)}})(Object(Ds.a)(vp)),Op=n("./js/_components/Tooltip/index.js"),jp=Bo.a.createElement(vi.a,{name:"mail",size:"18"}),Tp=function(e){function t(n){Gn(this,t);var a=zn(this,e.call(this,n));return a.getTrackingParams=a.getTrackingParams.bind(a),a._onItemClick=a._onItemClick.bind(a),a._onMessageClick=a._onMessageClick.bind(a),a._onMessageNew=a._onMessageNew.bind(a),a.state={messageCount:a._getMessageCount()},a}return qn(t,e),t.prototype.componentDidMount=function(){ni.a.subscribe(ni.a.live.messageNew,this._onMessageNew)},t.prototype.shouldComponentUpdate=function(e,t){return e.data.USER_ID!==this.props.data.USER_ID||t.messageCount!==this.state.messageCount},t.prototype.componentWillUnmount=function(){ni.a.unsubscribe(ni.a.live.messageNew,this._onMessageNew)},t.prototype.getTrackingParams=function(){return{type:"user",id:Number(this.props.data.USER_ID),index:this.props.index}},t.prototype.render=function(){var e=this.props.data,t={className:ui()({"notifications-item":!0,"is-friend":!0}),onClick:this._onItemClick};return Bo.a.createElement("li",t,Bo.a.createElement("div",{className:"notifications-item-container"},Bo.a.createElement("div",{className:"notifications-item-heading"},Bo.a.createElement("div",{className:"notifications-item-picture"},Bo.a.createElement(lc.a,{type:"user",height:32,width:32,rounded:!0,data:e})),Bo.a.createElement("div",{className:"notifications-item-message"},Bo.a.createElement("div",{className:"heading-4"},Bo.a.createElement(ns.a,{to:"/profile/"+e.USER_ID},e.DISPLAY_NAME))),this._renderIcon())))},t.prototype._renderIcon=function(){var e=this.state.messageCount;return 0===e?null:Bo.a.createElement("a",{className:"notifications-item-icon active",tabIndex:"0",onClick:this._onMessageClick,onKeyDown:this._onMessageClick},Bo.a.createElement(Op.a,{text:Object(di.c)("Vous avez reçu %s nouveau message.","Vous avez reçu %s nouveaux messages.",{sprintf:[e],count:e})},jp))},t.prototype._onItemClick=function(e){this.tracking("panel_click",e.currentTarget)},t.prototype._onMessageClick=function(e){void 0!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),e.stopPropagation(),ti.a.open("/lightbox/instant_messenger.php?friend_id="+this.props.data.USER_ID),this.state.messageCount>0&&this.setState({messageCount:0}))},t.prototype._onMessageNew=function(e,t){if(Number(t.USER_ID)===Number(this.props.data.USER_ID)){var n=this.state.messageCount;this.setState({messageCount:n+1})}},t.prototype._getMessageCount=function(){var e=this.props.data,t=ri.a.data.MESSAGE_UNREAD;if(!ri.a.data.MESSAGE_UNREAD_HASH.hasOwnProperty(e.USER_ID))return 0;for(var n in t.data)if(Number(t.data[n].AUTHOR)===Number(e.USER_ID))return Number(t.data[n].TOTAL);return 0},t}(Uo.Component);Tp.contextTypes={router:Jo.a.object.isRequired};var wp=Object(Ds.a)(Tp),Np=Bo.a.createElement("div",{className:"notifications-placeholder-image"},Bo.a.createElement(np.a,{className:"animate-spin",src:"common/placeholders/loader.png",width:"56",height:"56",retina:!0})),Sp=Bo.a.createElement("div",{className:"notifications-placeholder-image"},Bo.a.createElement(np.a,{src:"common/placeholders/friends.png",width:"56",height:"56",retina:!0})),Cp=Bo.a.createElement("span",{className:"label"},"Facebook"),Pp=Bo.a.createElement("span",{className:"label"},"Twitter"),kp=Bo.a.createElement("button",{className:"btn btn-googleplus",id:"btn_notification_googleplus",type:"button"},Bo.a.createElement("span",{className:"label"},"Google")),Ap=function(e){function t(){return Wn(this,t),Vn(this,e.apply(this,arguments))}return Kn(t,e),t.prototype.componentDidMount=function(){ni.a.ready(ni.a.googleplus.ready,function(){bp.a.renderGGPlus("btn_notification_googleplus")})},t.prototype.render=function(){var e=this.props,t=e.data;return e.isLoading?this._renderLoading():t.length>0?this._renderList():this._renderPlaceholder()},t.prototype._renderList=function(){var e=this.props,t=e.data,n=e.type;return Bo.a.createElement("ul",{className:"notifications-list"},t.map(function(e,t){switch(n){case"notification":return Bo.a.createElement(Ep,{key:"notification_"+e.NOTIFICATION_ID,data:e,index:t});case"following":return Bo.a.createElement(wp,{key:"following_"+e.USER_ID,data:e,index:t});default:return null}}))},t.prototype._renderLoading=function(){return Bo.a.createElement("div",{className:"notifications-placeholder"},Np,Bo.a.createElement("div",{className:"notifications-placeholder-title"},Object(di.a)("Chargement en cours")))},t.prototype._renderPlaceholder=function(){return Bo.a.createElement("div",{className:"notifications-placeholder"},Sp,Bo.a.createElement("div",{className:"notifications-placeholder-title"},Object(di.a)("Ne restez pas dans votre coin.")),Bo.a.createElement("div",{className:"notifications-placeholder-social"},Bo.a.createElement("div",{className:"notifications-placeholder-text"},Object(di.a)("Connectez-vous sur les réseaux sociaux pour retrouver vos amis.")),Bo.a.createElement("div",{className:"notifications-placeholder-buttons"},Bo.a.createElement("button",{className:"btn btn-facebook",onClick:this._onSocialClick.bind(this,"facebook"),type:"button"},Cp),Bo.a.createElement("button",{className:"btn btn-twitter",onClick:this._onSocialClick.bind(this,"twitter"),type:"button"},Pp),kp)))},t.prototype._onSocialClick=function(e,t){void 0!==t.keyCode&&13!==t.keyCode||("twitter"===e?gp.a.link():"facebook"===e&&yp.a.login({scopes_mandatory:!0}))},t}(Uo.Component);Ap.defaultProps={isLoading:!1};var xp=Ap,Dp=Bo.a.createElement(vi.a,{name:"cancel"}),Rp=function(e){function t(n){Xn(this,t);var a=$n(this,e.call(this,n));return a.panel_name="notifications",a.scrollbar={ref:"nano",shouldUpdate:function(e,t){return a.state.data.length!==t.data.length||a.state.nbDisplay!==t.nbDisplay}},a._fetchFeedApiRef=null,a._displayMoreEnabled=!0,a._currentList=[],a._nbDisplay=20,a._defaultTab="feed",a._displayMore=a._displayMore.bind(a),a._updateNotifications=a._updateNotifications.bind(a),a._updateFeed=a._updateFeed.bind(a),a._updateFollowing=a._updateFollowing.bind(a),a._updateMessageCount=a._updateMessageCount.bind(a),a._filterFollowing=a._filterFollowing.bind(a),a._onFilterEmpty=a._onFilterEmpty.bind(a),a.state={tab:a._defaultTab,data:a._getTabData(a._defaultTab),notificationCount:ri.a.getNotificationCount(),messageCount:ri.a.getMessageCount(),nbDisplay:a._nbDisplay,feedLoaded:!1,filter:""},a}return Jn(t,e),t.prototype.componentDidMount=function(){this.scrollbar_onEnd(this._displayMore),ni.a.subscribe(ni.a.live.notificationNew,this._updateNotifications,"panel_notifications"),ni.a.subscribe(ni.a.live.notificationRead,this._updateNotifications,"panel_notifications"),ni.a.subscribe(ni.a.live.tickerNew,this._updateFeed,"panel_notifications"),ni.a.subscribe(ni.a.live.messageNew,this._updateMessageCount,"panel_notifications"),ni.a.subscribe(ni.a.live.messageRead,this._updateMessageCount,"panel_notifications"),ni.a.subscribe(ni.a.user.addFavorite,this._updateFollowing,"panel_notifications"),ni.a.subscribe(ni.a.user.deleteFavorite,this._updateFollowing,"panel_notifications"),this.subscribeOnOpen(function(){var e=document.getElementById("panel-notifications");Object(ys.j)(e)})},t.prototype.shouldComponentUpdate=function(e,t){return e.selected!==this.props.selected||t.tab!==this.state.tab||t.notificationCount!==this.state.notificationCount||t.messageCount!==this.state.messageCount||t.data.length!==this.state.data.length||t.feedLoaded!==this.state.feedLoaded||t.nbDisplay!==this.state.nbDisplay||t.filter!==this.state.filter},t.prototype.componentWillUnmount=function(){fi.a.cancel(this._fetchFeedApiRef),ni.a.unsubscribeAll("panel_notifications")},t.prototype.render=function(){return this.renderPanel(Bo.a.createElement("div",{className:"panel-notifications"},Bo.a.createElement("div",{className:"panel-header",id:"panel-notifications","aria-label":Object(di.a)("Activité"),tabIndex:"0"},this._renderNavbar(),this._renderTitle()),this.renderScrollbar({"panel-body":!0},[this._renderContent()])))},t.prototype._renderNavbar=function(){var e=this,t=this.state.tab,n=this._getTabList();return Bo.a.createElement("ul",{className:"panel-navbar",role:"tablist"},n.map(function(n){var a=ui()({"panel-navbar-link":!0,active:t===n.id});return Bo.a.createElement("li",{className:"panel-navbar-item",key:n.id},Bo.a.createElement(Op.a,{position:"bottom",text:n.label},Bo.a.createElement("a",{className:a,onClick:function(t){return e._onTabClick(t,n.id)},onKeyDown:function(t){return e._onTabClick(t,n.id)},role:"tab",tabIndex:"0","aria-label":n.label,"aria-selected":t===n.id,"aria-controls":"activity-"+n.id},Bo.a.createElement(vi.a,{name:n.icon,size:"18"}),Bo.a.createElement("span",{className:"sr-only"},n.label),e._renderCounter(n.counter))))}))},t.prototype._renderTitle=function(){var e=this.state,t=e.tab,n=e.filter,a=this._getTabList().find(function(e){return e.id===t}),r=null,o=null;return""!==n&&(o=Bo.a.createElement("button",{className:"filter-empty",onClick:this._onFilterEmpty,type:"button"},Dp)),a.filter&&(r=Bo.a.createElement("span",{className:"filter"},Bo.a.createElement("input",{className:"filter-control form-control input-small",onChange:this._onFilterChange.bind(this,a.filter),placeholder:Object(di.a)("Rechercher"),ref:"filter",type:"text",value:n}),o)),Bo.a.createElement("div",{className:"panel-headings"},r,Bo.a.createElement("h2",{className:"heading-2"},a.label))},t.prototype._renderCounter=function(e){return 0===e?null:Bo.a.createElement("span",{className:"panel-navbar-counter"},e)},t.prototype._renderContent=function(){var e=this.state,t=e.tab,n=e.nbDisplay,a=e.feedLoaded,r=this.state.data.slice(0,n);switch(t){case"notifications":return Bo.a.createElement(xp,{data:r,type:"notification",key:"notifications-list"});case"feed":return Bo.a.createElement(xp,{data:r,isLoading:!a,type:"notification",key:"feed-list"});case"following":return Bo.a.createElement(xp,{data:r,type:"following",key:"following-list"});default:return null}},t.prototype._onTabClick=function(e,t){var n=this;if((void 0===e.keyCode||13===e.keyCode)&&(e.preventDefault(),t!==this.state.tab)){var a=this.state.feedLoaded,r=this._nbDisplay,o=this._getTabData(t,a);this.setState({tab:t,data:o,nbDisplay:r,filter:""},function(){n.refreshScrollbar({scroll:"top"})})}},t.prototype._onFilterChange=function(){var e=this.state.tab,t=this._getTabList().find(function(t){return t.id===e});if("function"==typeof t.filter){var n=this.refs.filter.value.toLowerCase().trim();this.setState({data:t.filter(n),filter:n})}},t.prototype._onFilterEmpty=function(){var e=this.refs.filter;e.value="",e.focus(),this._onFilterChange()},t.prototype._filterFollowing=function(e){var t=ri.a.data.FRIENDS.data.filter(function(t){var n=t.DISPLAY_NAME.toLowerCase(),a=ri.a.data.MESSAGE_UNREAD_HASH.hasOwnProperty(t.USER_ID);return-1!==n.indexOf(e)||a});return t.length>0&&(t=this._sortFollowing(t)),t},t.prototype._sortFollowing=function(e){if(0===e.length)return e;var t=function(e,t){var n=e.DISPLAY_NAME.toLowerCase().trim(),a=t.DISPLAY_NAME.toLowerCase().trim();return n>a?1:n<a?-1:0},n=[],a=[];return e.forEach(function(e){ri.a.data.MESSAGE_UNREAD_HASH.hasOwnProperty(e.USER_ID)?n.push(e):a.push(e)}),n.sort(t),a.sort(t),n.concat(a)},t.prototype._updateNotifications=function(){var e=this.state.tab,t={notificationCount:ri.a.getNotificationCount()};"notifications"===e&&(t.data=this._getTabData(e)),this.setState(t)},t.prototype._updateFeed=function(){var e=this.state,t=e.tab,n=e.feedLoaded;"feed"===t&&n&&this.setState({data:this._getTabData(t,n)})},t.prototype._updateFollowing=function(e,t){var n=this.state.tab;"user"===t.type&&"following"===n&&this.setState({data:this._getTabData(n)})},t.prototype._updateMessageCount=function(){var e=this.state.tab,t={messageCount:ri.a.getMessageCount()};"following"===e&&(t.data=this._getTabData(e)),this.setState(t)},t.prototype._getTabList=function(){var e=this.state,t=e.notificationCount,n=e.messageCount;return[{id:"feed",label:Object(di.a)("Activité"),icon:"time",filter:!1,counter:0},{id:"notifications",label:Object(di.a)("Notifications"),icon:"notification",filter:!1,counter:t},{id:"following",label:Object(di.a)("Following"),icon:"friends",filter:this._filterFollowing,counter:n}]},t.prototype._getTabData=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(e){case"notifications":return[].concat(ri.a.data.NOTIFICATIONS);case"feed":return t?[].concat(ri.a.ticker):(this._fetchFeed(),[]);case"following":return this._sortFollowing([].concat(ri.a.data.FRIENDS.data));default:return[]}},t.prototype._fetchFeed=function(){var e=this;this._fetchFeedApiRef=fi.a.call({method:"user.getFeed",data:{limit:20},success:function(t){ri.a.ticker=[],t.count>0&&t.data.reverse().forEach(ri.a.addTicker),e.setState({data:e._getTabData("feed",!0),feedLoaded:!0})},error:function(){}})},t.prototype._displayMore=function(){var e=this;if(!1===this._displayMoreEnabled||this.state.nbDisplay>=this.state.data.length)return!1;this._displayMoreEnabled=!1;var t=this.state.nbDisplay+this._nbDisplay;return this.setState({nbDisplay:t},function(){e._displayMoreEnabled=!0}),!0},t}(Uo.Component);Rp.defaultProps={selected:null};var Ip=Object(kl.a)(Object(Al.a)(Rp)),Lp=function(e){function t(n){ea(this,t);var a=ta(this,e.call(this,n));return a._panels_initialized={},a._onPanelMounted=a._onPanelMounted.bind(a),a._onClosePanels=a._onClosePanels.bind(a),a._onOpenPanel=a._onOpenPanel.bind(a),a.getTrackingParams=a.getTrackingParams.bind(a),a.state={openPanelName:null,currentTarget:null,opened:!1},a}return na(t,e),t.prototype.getChildContext=function(){return{getTrackingParams:this.getTrackingParams}},t.prototype.componentDidMount=function(){ni.a.subscribe(ni.a.menu.panel_mounted,this._onPanelMounted),ni.a.subscribe(ni.a.menu.closeAllPanels,this._onClosePanels),ni.a.subscribe(ni.a.menu.openPanel,this._onOpenPanel)},t.prototype.componentWillUnmount=function(){clearTimeout(this._closePanelTimeoutRef),clearTimeout(this._openPanelTimeoutRef),ni.a.unsubscribe(ni.a.menu.closeAllPanels,this._onClosePanels),ni.a.unsubscribe(ni.a.menu.openPanel,this._onOpenPanel),ni.a.unsubscribe(ni.a.menu.panel_mounted,this._onPanelMounted)},t.prototype.getTrackingParams=function(){return{panel:this.state.openPanelName}},t.isPanelMounted=function(e){return void 0!==t._panels_mounted[e]},t.prototype.render=function(){var e=this.state,t=e.openPanelName,n=e.opened,a=e.displayed;this._initPanel(t);var r={"panel-wrapper":!0};t&&(r["panel-wrapper-"+t]=!0);var o=ui()(r),i=ui()({"panel-container":!0,opened:n});return Bo.a.createElement("div",{className:i,"aria-hidden":!a,style:a?{display:"block"}:{}},Bo.a.createElement("div",{className:o},this._isPanelInitialized("searchhistory")?Bo.a.createElement(Gl,{ref:"searchhistory",selected:t}):null,this._isPanelInitialized("searchsuggest")?Bo.a.createElement(Ml,{ref:"searchsuggest",selected:t}):null,this._isPanelInitialized("playlists")?Bo.a.createElement(Kl,{ref:"playlists",selected:t}):null,this._isPanelInitialized("business_regular_playlists")?Bo.a.createElement($l,{ref:"business_regular_playlists",selected:t}):null,this._isPanelInitialized("business_curated_playlists")?Bo.a.createElement(Zl,{ref:"business_curated_playlists",selected:t}):null,this._isPanelInitialized("business_mixes")?Bo.a.createElement(tc,{ref:"business_mixes",selected:t}):null,this._isPanelInitialized("albums")?Bo.a.createElement(ac,{ref:"albums",selected:t}):null,this._isPanelInitialized("shows")?Bo.a.createElement(oc,{ref:"shows",selected:t}):null,this._isPanelInitialized("audiobooks")?Bo.a.createElement(sc,{ref:"audiobooks",selected:t}):null,this._isPanelInitialized("apps")?Bo.a.createElement(pc,{ref:"apps",selected:t}):null,this._isPanelInitialized("queuelist")?Bo.a.createElement(Ec,{ref:"queuelist",selected:t}):null,this._isPanelInitialized("settings")?Bo.a.createElement(Vc,{ref:"settings",selected:t}):null,this._isPanelInitialized("lyrics")?Bo.a.createElement(mp,{ref:"lyrics",selected:t,displayed:a}):null,this._isPanelInitialized("notifications")?Bo.a.createElement(Ip,{ref:"notifications",selected:t}):null),Bo.a.createElement("div",{className:"panel-overlay",onClick:this._onOverlayClick}))},t.prototype._onPanelMounted=function(e,n){t._panels_mounted[n]=!0},t.prototype._onOverlayClick=function(){ni.a.trigger(ni.a.menu.closeAllPanels)},t.prototype._onClosePanels=function(e,t){var n=this,a=this.state.currentTarget;this.setState({opened:!1},function(){n._closePanelTimeoutRef=setTimeout(function(){n.setState({displayed:!1,openPanelName:null,currentTarget:null},function(){a&&t&&Object(ys.j)(a)})},150)})},t.prototype._onOpenPanel=function(e,t){var n=this,a=t.panel;this._needUserData(a)&&!1===ri.a.isLoaded||this.setState({openPanelName:a,currentTarget:t.currentTarget,displayed:!0},function(){"lyrics"===a&&Yo.a.control.play(),n._openPanelTimeoutRef=setTimeout(function(){n.setState({opened:!0},function(){for(var e=n.refs[a];e.getWrappedInstance;)e=e.getWrappedInstance();e.openPanel()})},0)})},t.prototype._initPanel=function(e){void 0===this._panels_initialized[e]&&(this._panels_initialized[e]=!0)},t.prototype._isPanelInitialized=function(e){return void 0!==this._panels_initialized[e]},t.prototype._needUserData=function(e){return{playlists:!0,albums:!0,shows:!0,audiobooks:!0,apps:!0,searchhistory:!0,notifications:!0,business_regular_playlists:!0,business_curated_playlists:!0,business_mixes:!0}[e]||!1},t}(Uo.Component);Lp.childContextTypes={getTrackingParams:Jo.a.func},Lp._panels_mounted={};var Mp=Lp,Fp=Bo.a.createElement("div",{className:"page-sidebar",id:"page_sidebar"},Bo.a.createElement(Tl,null)),Up=function(e){function t(){var n,a,r;ra(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=a=oa(this,e.call.apply(e,[this].concat(i))),a._authorized_actions={openCreatePlaylist:!0},r=n,oa(a,r)}return ia(t,e),t.prototype.componentDidMount=function(){this._dispatchActionEvent=new Fi.a,this._subscribeActions(this._onAction)},t.prototype.render=function(){return Fp},t.prototype._onAction=function(e){var t=this;switch(e.action){case"openCreatePlaylist":Mp.isPanelMounted("playlists")||ni.a.subscribe(ni.a.menu.panel_mounted,function(e,n){"playlists"===n&&t._dispatchAction("openCreatePlaylist")}),ni.a.trigger(ni.a.menu.openPanel,{panel:"playlists"})}},t.prototype._dispatchAction=function(e,t){void 0!==this._authorized_actions[e]&&this._dispatchActionEvent.trigger({action:e,params:t})},t.prototype._subscribeActions=function(e){this._dispatchActionEvent.subscribe(e)},t}(Uo.Component),Bp=Bo.a.createElement("div",{className:"page-panels",id:"page_panels"},Bo.a.createElement(Mp,null)),Hp=Bo.a.createElement("div",{id:"page_context_menu"}),Gp=Bo.a.createElement("aside",{id:"notification",className:"page-notifications",role:"alert","aria-hidden":"true"},Bo.a.createElement("div",{className:"notification"},Bo.a.createElement("h2",null))),zp=function(e){function t(){return la(this,t),ca(this,e.apply(this,arguments))}return pa(t,e),t.prototype.render=function(){return Gp},t}(Uo.Component),qp=Bo.a.createElement("div",{className:"modal-backdrop"}),Yp=Bo.a.createElement("div",{className:"modal-wrapper"}),Wp=Bo.a.createElement("div",{className:"overlay"}),Vp=Bo.a.createElement("span",{className:"icon icon-cancel"}),Kp=Bo.a.createElement("a",{id:"interstitial_ads"}),Qp=function(e){function t(){return da(this,t),fa(this,e.apply(this,arguments))}return ha(t,e),t.prototype.render=function(){return Bo.a.createElement("div",{id:"interstitial",style:{display:"none"}},Wp,Bo.a.createElement("div",{className:"interstitial-container"},Bo.a.createElement("span",{className:"interstitial-wrapper"},Bo.a.createElement("a",{className:"close",href:"#",onClick:this._onClose},Object(di.a)("Fermer"),Vp),Kp)))},t.prototype._onClose=function(e){e.preventDefault()},t}(Uo.Component),Xp=Bo.a.createElement("a",{className:"message",href:"#"}),$p=function(e){function t(){return ya(this,t),ba(this,e.apply(this,arguments))}return ga(t,e),t.prototype.render=function(){return Bo.a.createElement("div",{id:"notify"},Bo.a.createElement("a",{className:"close",href:"#",onClick:this._onClose}),Xp)},t.prototype._onClose=function(e){e.preventDefault(),Ki.b.hide()},t}(Uo.Component),Jp=Bo.a.createElement(zp,null),Zp=Bo.a.createElement(function(){return Hp},null),eu=Bo.a.createElement(function(){return Bo.a.createElement("div",{className:"modal",id:"modal",role:"dialog","aria-hidden":"true",style:{display:"none"}},qp,Yp)},null),tu=Bo.a.createElement(Qp,null),nu=Bo.a.createElement($p,null),au=Bo.a.createElement("div",{id:"hotkeys_container"}),ru=Bo.a.createElement("div",{className:"core-player",id:"core_player"}),ou=n("./node_modules/uuid-v4/index.js"),iu=n.n(ou),su=n("./node_modules/popper.js/dist/esm/popper.js"),lu=n("./js/_components/Popper/store/popper.js"),cu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},pu=function(e){var t=function(t){function n(e){va(this,n);var a=Ea(this,t.call(this,e));return a._popper=null,a._popperId=iu()(),a._popperRef=null,a._targetRef=null,a._contentRef=null,a._arrowRef=null,a._showTimeout=null,a._onClick=a._onClick.bind(a),a._onDocumentClick=a._onDocumentClick.bind(a),a._onMouseEnter=a._onMouseEnter.bind(a),a._onMouseLeave=a._onMouseLeave.bind(a),a.state={isVisible:e.isVisible},a}return Oa(n,t),n.prototype.componentWillReceiveProps=function(e){var t=this;if(e.isDisabled)return this._clear(),void this._hide(function(){return t._destroy()});var n=this.props.isVisible!==e.isVisible;this.setState({isVisible:n||this.state.isVisible},function(){t.state.isVisible&&t._update()})},n.prototype.shouldComponentUpdate=function(e){return e.popperId===this.props.popperId},n.prototype.componentWillUnmount=function(){this._clear(),this._destroy()},n.prototype.render=function(){var t=this,n=this.props,a=n.children,r=n.trigger,o=n.isDisabled,i=n.tag,s=n.className,l=n.data,c=this.state.isVisible,p={className:ui()("popper-wrapper",s),onMouseEnter:"hover"!==r||o?null:this._onMouseEnter,onMouseLeave:"hover"!==r||o?null:this._onMouseLeave,ref:function(e){return t._popperRef=t._getDomNode(e)}};return Bo.a.createElement(i,p,Bo.a.cloneElement(a,{className:ui()(a.props.className,{"is-popper-active":c}),onClick:this._onClick,ref:function(e){return t._targetRef=t._getDomNode(e)}}),Bo.a.createElement("div",{className:"popper",ref:function(e){return t._contentRef=e},style:this._getPopperStyle()},c?Bo.a.createElement(e,cu({},l,{onClose:this._hide.bind(this)})):null,this._renderArrow()))},n.prototype._renderArrow=function(){var e=this;if(!this.props.hasArrow)return null;var t={className:"popper-arrow",ref:function(t){return e._arrowRef=t}};return Bo.a.createElement("div",t)},n.prototype._onClick=function(){var e=this.props,t=e.children,n=e.trigger,a=e.isDisabled,r=this.state.isVisible;"click"!==n||a||(r?this._hide():this._show()),"function"==typeof t.props.onClick&&t.props.onClick()},n.prototype._onDocumentClick=function(e){this._popperRef.contains(e.target)||this._hide()},n.prototype._onMouseEnter=function(){var e=this,t=this.props.delay;t>0?(this._clear(),this._showTimeout=window.setTimeout(function(){e._show()},t)):this._show()},n.prototype._onMouseLeave=function(e){e.relatedTarget!==window?(this._clear(),this._hide()):e.stopPropagation()},n.prototype._initPopper=function(){if(this._targetRef&&this._contentRef){var e={placement:this.props.placement,modifiers:{arrow:{enabled:this.props.hasArrow,element:this._arrowRef}}};this._popper=new su.a(this._targetRef,this._contentRef,e)}},n.prototype._getPopperStyle=function(){return{display:this.state.isVisible?null:"none"}},n.prototype._getDomNode=function(e){return"function"==typeof e?dc.a.findDOMNode(e):e},n.prototype._show=function(){var e=this;this.state.isVisible||""!==this.props.popperId&&this.props.popperId!==this._popperId||this.setState({isVisible:!0},function(){e.props.setActive(e._popperId),e._update(),"click"===e.props.trigger&&document.addEventListener("click",e._onDocumentClick)})},n.prototype._hide=function(e){var t=this;this.state.isVisible&&this.props.popperId===this._popperId&&this.setState({isVisible:!1},function(){t.props.setInactive(),"function"==typeof e&&e(),"click"===t.props.trigger&&document.removeEventListener("click",t._onDocumentClick)})},n.prototype._update=function(){this._popper?this._popper.scheduleUpdate():this._initPopper()},n.prototype._destroy=function(){this._popper&&(this._popper.destroy(),this._popper=null)},n.prototype._clear=function(){this._showTimeout&&window.clearTimeout(this._showTimeout)},n}(Uo.Component);t.defaultProps={placement:"top",hasArrow:!0,trigger:"manual",delay:0,isVisible:!1,isDisabled:!1,tag:"div",className:"",data:{}};return Object(Ho.b)(function(e){return{popperId:e.popper.popperId}},{setActive:lu.b,setInactive:lu.c},null,{withRef:!0})(t)},uu=function(e){function t(){return Ta(this,t),wa(this,e.apply(this,arguments))}return Na(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.className,a=e.size,r=ui()("popper-content",n,{"popper-sm":"sm"===a,"popper-lg":"lg"===a});return Bo.a.createElement("div",{className:r},t)},t}(Uo.Component);uu.defaultProps={className:"",size:null};var du=uu,fu=Bo.a.createElement(vi.a,{className:"animate-wobble-target",name:"chevron-right"}),hu=function(e){function t(n){Ca(this,t);var a=Pa(this,e.call(this,n));return a._onClose=a._onClose.bind(a),a}return ka(t,e),t.prototype.render=function(){return Bo.a.createElement(du,{className:"popper-account",size:"lg"},this._renderHeader(),this._renderContent())},t.prototype._renderHeader=function(){var e=this.props,t=e.userId,n=e.userPicture,a={type:Vo.a.User,height:40,width:40,rounded:!0,coverLink:!1,data:{USER_ID:t,USER_PICTURE:n}};return Bo.a.createElement("div",{className:"account-header"},Bo.a.createElement("div",{className:"account-thumbnail"},Bo.a.createElement(lc.a,a)),Bo.a.createElement("div",{className:"account-heading"},Bo.a.createElement("span",{className:"account-name"},Ui.a.getDisplayName(!0))))},t.prototype._renderContent=function(){var e=this;return Bo.a.createElement("ul",{className:"account-menu",role:"navigation"},this._getLinks().map(function(t){return e._renderLink(t)}))},t.prototype._renderLink=function(e){var t=this;if(e.isDisabled)return null;var n=ui()("account-item",{"is-divider":e.isDivider}),a={className:ui()("account-link",{"is-main":e.isMain,"animate-wobble":e.isAnimated}),to:e.to,onClick:function(n){return t._onClose(n,e.onClick)},target:e.isExternal?"_blank":null};return e.to||Object.assign(a,{role:"button",tabIndex:0,onKeyPress:function(n){return t._onClose(n,e.onClick)}}),Bo.a.createElement("li",{className:n,key:e.id},Bo.a.createElement(ns.a,a,Bo.a.createElement("span",{className:"account-label"},e.label),e.isAnimated?fu:null))},t.prototype._onClose=function(e,t){void 0!==e.key&&"Enter"!==e.key||("function"==typeof t&&t(),this.props.onClose())},t.prototype._getLinks=function(){var e=this.props.userLang,t=Ui.a.getMultiAccountOptions();return[{id:"multiAccount",label:t.CHILD_COUNT?Object(di.a)("Changer de profil"):Object(di.a)("Nouveau profil"),isDisabled:!(t.ENABLED||t.CHILD_COUNT),isMain:!0,isAnimated:!0,onClick:function(){return ti.a.open("/lightbox/multi_account/switch")}},{id:"account",label:Object(di.a)("Paramètres du compte"),to:"/account",isMain:!0,isAnimated:!0},{id:"gift",label:Object(di.a)("Activer un code"),to:"/gift",isMain:!0,isAnimated:!0,isExternal:!0,isDisabled:t.PARENT},{id:"logout",label:Object(di.a)("Déconnexion"),isMain:!0,onClick:function(){return Ui.a.logout()}},{id:"labs",label:"Deezer Labs",to:"/account/labs",isAnimated:!0,isDivider:!0},{id:"support",label:Object(di.a)("Assistance"),to:"http://support.deezer.com/hc/"+e,isAnimated:!0,isExternal:!0}]},t}(Uo.Component),mu=pu(Object(Ho.b)(function(e){return{userId:e.user.USER.USER_ID,userPicture:e.user.USER.USER_PICTURE,userLang:e.user.SETTING_LANG}})(hu)),yu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},bu=function(e){function t(n){xa(this,t);var a=Da(this,e.call(this,n));return a._markAsRead=a._markAsRead.bind(a),a.state={data:n.data},a}return Ra(t,e),t.prototype.shouldComponentUpdate=function(e,t){return t.data.NOTIFICATION_ID!==this.state.data.NOTIFICATION_ID||t.data.READ!==this.state.data.READ},t.prototype.render=function(){var e=!this.state.data.READ,t=ui()("notifications-item",{"is-unread":e}),n=e?this._markAsRead:void 0;return Bo.a.createElement("li",{className:t,onMouseOver:n},Bo.a.createElement("div",{className:"notifications-item-container"},Bo.a.createElement("div",{className:"notifications-item-heading"},this._renderPicture(),this._renderMessage()),this._renderContent()))},t.prototype._renderPicture=function(){var e=this.state.data;return Bo.a.createElement("div",{className:"notifications-item-picture"},Bo.a.createElement(lc.a,{type:"user",height:32,width:32,rounded:!0,data:e.DATA}))},t.prototype._renderMessage=function(){var e=this.state.data,t=this._getMessage("SHARE"===e.TYPE?"SHARE_"+e.DATA.TYPE:e.TYPE);return Bo.a.createElement("div",{className:"notifications-item-message"},Bo.a.createElement("div",{className:"heading-4-sub"},Bo.a.createElement(ns.a,{className:"link-username",to:"/profile/"+e.DATA.USER_ID},e.DATA.USER_NAME)," ",Bo.a.createElement("span",null,t)))},t.prototype._renderContent=function(){var e=this.state.data;if("FRIEND_FOLLOW"===e.TYPE)return Bo.a.createElement("div",{className:"notifications-item-content"},this._renderDate());var t=this._getMediaType(e);return Bo.a.createElement("div",{className:"notifications-item-content"},Bo.a.createElement("div",{className:"notifications-item-media"},Bo.a.createElement("div",{className:"notifications-item-media-picture"},Bo.a.createElement(lc.a,{type:t,height:56,width:56,play:"on",context:"menu_panel_notification_"+t,data:e.DATA})),this._renderMediaTitle(t)),this._renderComment(),this._renderDate())},t.prototype._renderMediaTitle=function(e){var t=this.state.data.DATA;switch(e){case"album":return Bo.a.createElement("div",{className:"notifications-item-media-title"},Bo.a.createElement("div",{className:"heading-4"},Bo.a.createElement(ns.a,{to:"/album/"+t.ALB_ID,title:t.ALB_TITLE},t.ALB_TITLE)),Bo.a.createElement("div",{className:"heading-4-sub"},Bo.a.createElement("span",null,Object(di.a)("par"))," ",Bo.a.createElement(ns.a,{to:"/artist/"+t.ART_ID,title:t.ART_NAME},t.ART_NAME)));case"artist":return Bo.a.createElement("div",{className:"notifications-item-media-title"},Bo.a.createElement("div",{className:"heading-4"},Bo.a.createElement(ns.a,{to:"/artist/"+t.ART_ID,title:t.ART_NAME},t.ART_NAME)));case"episode":return Bo.a.createElement("div",{className:"notifications-item-media-title"},Bo.a.createElement("div",{className:"heading-4"},Bo.a.createElement(ns.a,{to:"/episode/"+t.EPISODE_ID,title:t.EPISODE_TITLE},t.EPISODE_TITLE)),Bo.a.createElement("div",{className:"heading-4-sub"},Bo.a.createElement("span",null,Object(di.a)("par"))," ",Bo.a.createElement(ns.a,{to:"/show/"+t.SHOW_ID,title:t.SHOW_NAME},t.SHOW_NAME)));case"playlist":return Bo.a.createElement("div",{className:"notifications-item-media-title"},Bo.a.createElement("div",{className:"heading-4"},Bo.a.createElement(ns.a,{to:"/playlist/"+t.PLAYLIST_ID,title:t.PLAYLIST_TITLE},t.PLAYLIST_TITLE)));case"radio":return Bo.a.createElement("div",{className:"notifications-item-media-title"},Bo.a.createElement("div",{className:"heading-4"},Bo.a.createElement(ns.a,{to:"/mixes/genre/"+t.RADIO_ID,title:t.RADIO_TITLE},t.RADIO_TITLE)));case"show":return Bo.a.createElement("div",{className:"notifications-item-media-title"},Bo.a.createElement("div",{className:"heading-4"},Bo.a.createElement(ns.a,{to:"/show/"+t.SHOW_ID,title:t.SHOW_NAME},t.SHOW_NAME)));case"track":return Bo.a.createElement("div",{className:"notifications-item-media-title"},Bo.a.createElement("div",{className:"heading-4"},Bo.a.createElement(ns.a,{to:"/track/"+t.SNG_ID,title:t.SNG_TITLE},t.SNG_TITLE)),Bo.a.createElement("div",{className:"heading-4-sub"},Bo.a.createElement("span",null,Object(di.a)("par"))," ",Bo.a.createElement(ns.a,{to:"/artist/"+t.ART_ID,title:t.ART_NAME},t.ART_NAME)));default:return null}},t.prototype._renderComment=function(){var e=this.state.data;return e.DATA.hasOwnProperty("COMMENT")&&""!==e.DATA.COMMENT?Bo.a.createElement("div",{className:"notifications-item-comment"},e.DATA.COMMENT):null},t.prototype._renderDate=function(){var e=this.state.data;return e.hasOwnProperty("DATE")?Bo.a.createElement("div",{className:"notifications-item-date"},Object(ys.m)(this.props.currentTimestamp-e.DATE)):null},t.prototype._markAsRead=function(){var e=yu({},this.state.data);e.READ||(e.READ=1,this.setState({data:e},function(){ri.a.markNotificationAsRead(e.NOTIFICATION_ID)}))},t.prototype._getMediaType=function(e){if("SHARE"===e.TYPE)return"SONG"===e.DATA.TYPE?"track":e.DATA.TYPE.toLowerCase();switch(e.TYPE){case"ALBUM_COMMENT":case"ALBUM_FAN":return"album";case"ARTIST_COMMENT":case"ARTIST_FAN":return"artist";case"PLAYLIST_COMMENT":case"PLAYLIST_CREATION":case"PLAYLIST_FAN":return"playlist";case"RADIO_COMMENT":case"RADIO_FAN":return"radio";default:return""}},t.prototype._getMessage=function(e){var t={ALBUM_COMMENT:Object(di.a)("a commenté cet album."),ALBUM_FAN:Object(di.a)("a ajouté cet album à sa musique préférée."),ARTIST_COMMENT:Object(di.a)("a commenté cet artiste."),ARTIST_FAN:Object(di.a)("a ajouté cet artiste à sa musique préférée."),FRIEND_FOLLOW:Object(di.a)("suit désormais votre activité musicale."),PLAYLIST_COMMENT:Object(di.a)("a commenté votre playlist."),PLAYLIST_CREATION:Object(di.a)("vient de créer cette playlist."),PLAYLIST_FAN:Object(di.a)("a ajouté cette playlist à sa musique préférée."),RADIO_COMMENT:Object(di.a)("a commenté ce mix."),RADIO_FAN:Object(di.a)("a ajouté ce mix à sa musique préférée."),SHARE_ALBUM:Object(di.a)("vous recommande cet album."),SHARE_ARTIST:Object(di.a)("vous recommande cet artiste."),SHARE_EPISODE:Object(di.a)("vous recommande cet épisode."),SHARE_PLAYLIST:Object(di.a)("vous recommande cette playlist."),SHARE_RADIO:Object(di.a)("vous recommande ce mix."),SHARE_SHOW:Object(di.a)("vous recommande ce podcast."),SHARE_SONG:Object(di.a)("vous recommande ce titre.")};return t.hasOwnProperty(e)?t[e]:""},t}(Uo.Component),gu=Object(Ho.b)(function(e){var t=e.user;return{currentTimestamp:Object(si.b)(t.SERVER_TIMESTAMP)}})(bu),_u=Bo.a.createElement(vi.a,{name:"mail",size:"18"}),vu=function(e){function t(n){La(this,t);var a=Ma(this,e.call(this,n));return a.getTrackingParams=a.getTrackingParams.bind(a),a._onMessageClick=a._onMessageClick.bind(a),a._onMessageNew=a._onMessageNew.bind(a),a.state={messageCount:a._getMessageCount()},a}return Fa(t,e),t.prototype.componentDidMount=function(){ni.a.subscribe(ni.a.live.messageNew,this._onMessageNew)},t.prototype.shouldComponentUpdate=function(e,t){return e.data.USER_ID!==this.props.data.USER_ID||t.messageCount!==this.state.messageCount},t.prototype.componentWillUnmount=function(){ni.a.unsubscribe(ni.a.live.messageNew,this._onMessageNew)},t.prototype.getTrackingParams=function(){return{type:"user",id:Number(this.props.data.USER_ID),index:this.props.index}},t.prototype.render=function(){var e=this.props.data;return Bo.a.createElement("li",{className:"notifications-item is-friend"},Bo.a.createElement("div",{className:"notifications-item-container"},Bo.a.createElement("div",{className:"notifications-item-heading"},Bo.a.createElement("div",{className:"notifications-item-picture"},Bo.a.createElement(lc.a,{type:"user",height:32,width:32,rounded:!0,data:e})),Bo.a.createElement("div",{className:"notifications-item-message"},Bo.a.createElement("div",{className:"heading-4"},Bo.a.createElement(ns.a,{to:"/profile/"+e.USER_ID},e.DISPLAY_NAME))),this._renderIcon())))},t.prototype._renderIcon=function(){var e=this.state.messageCount;return 0===e?null:Bo.a.createElement("a",{className:"notifications-item-icon active",tabIndex:"0",onClick:this._onMessageClick,onKeyDown:this._onMessageClick},Bo.a.createElement(Op.a,{text:Object(di.c)("Vous avez reçu %s nouveau message.","Vous avez reçu %s nouveaux messages.",{sprintf:[e],count:e})},_u))},t.prototype._onMessageClick=function(e){void 0!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),e.stopPropagation(),ti.a.open("/lightbox/instant_messenger.php?friend_id="+this.props.data.USER_ID),this.state.messageCount>0&&this.setState({messageCount:0}))},t.prototype._onMessageNew=function(e,t){if(Number(t.USER_ID)===Number(this.props.data.USER_ID)){var n=this.state.messageCount;this.setState({messageCount:n+1})}},t.prototype._getMessageCount=function(){var e=this.props.data,t=ri.a.data.MESSAGE_UNREAD;if(!ri.a.data.MESSAGE_UNREAD_HASH.hasOwnProperty(e.USER_ID))return 0;for(var n in t.data)if(Number(t.data[n].AUTHOR)===Number(e.USER_ID))return Number(t.data[n].TOTAL);return 0},t}(Uo.Component);vu.contextTypes={router:Jo.a.object.isRequired};var Eu=Object(Ds.a)(vu),Ou=(n("./node_modules/nanoscroller/bin/javascripts/jquery.nanoscroller.js"),function(e){function t(n){Ba(this,t);var a=Ha(this,e.call(this,n));return a._scroller=null,a.scrollTop=a.scrollTop.bind(a),a.scrollBottom=a.scrollBottom.bind(a),a.scrollToTop=a.scrollToTop.bind(a),a.scrollToBottom=a.scrollToBottom.bind(a),a}return Ga(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.preventPageScrolling,n=e.disableResize,a=e.alwaysVisible,r=e.onScrollTop,o=e.onScrollEnd;this._scroller.nanoScroller({preventPageScrolling:t,disableResize:n,alwaysVisible:a}),"function"==typeof r&&this._scroller.on("scrolltop",r),"function"==typeof o&&this._scroller.on("scrollend",o)},t.prototype.componentWillUnmount=function(){this._scroller.nanoScroller({destroy:!0}),this._scroller.off("scrolltop scrollend")},t.prototype.scrollTop=function(e){this._scroller.nanoScroller({scrollTop:e})},t.prototype.scrollBottom=function(e){this._scroller.nanoScroller({scrollBottom:e})},t.prototype.scrollToTop=function(){this._scroller.nanoScroller({scroll:"top"})},t.prototype.scrollToBottom=function(){this._scroller.nanoScroller({scroll:"bottom"})},t.prototype.render=function(){var e=this,t=this.props,n=t.children,a=t.className,r=t.onScroll,o={className:ui()(a,"nano"),ref:function(t){return e._scroller=Xo()(t)},onScroll:r};return Bo.a.createElement("div",o,Bo.a.createElement("div",{className:"nano-content"},n))},t}(Uo.Component));Ou.defaultProps={className:"",preventPageScrolling:!0,disableResize:!1,alwaysVisible:!1,onScroll:null,onScrollTop:null,onScrollEnd:null};var ju=Ou,Tu=Bo.a.createElement("div",{className:"notifications-placeholder-image"},Bo.a.createElement(np.a,{className:"animate-spin",src:"common/placeholders/loader.png",width:"56",height:"56",retina:!0})),wu=Bo.a.createElement("div",{className:"notifications-placeholder-image"},Bo.a.createElement(np.a,{src:"common/placeholders/friends.png",width:"56",height:"56",retina:!0})),Nu=Bo.a.createElement("span",{className:"label"},"Facebook"),Su=Bo.a.createElement("span",{className:"label"},"Twitter"),Cu=Bo.a.createElement("button",{className:"btn btn-googleplus",id:"btn_notification_googleplus",type:"button"},Bo.a.createElement("span",{className:"label"},"Google")),Pu=function(e){function t(){return qa(this,t),Ya(this,e.apply(this,arguments))}return Wa(t,e),t.prototype.componentDidMount=function(){ni.a.ready(ni.a.googleplus.ready,function(){bp.a.renderGGPlus("btn_notification_googleplus")})},t.prototype.render=function(){var e=this.props,t=e.data;return e.isLoading?this._renderLoading():t.length>0?this._renderList():this._renderPlaceholder()},t.prototype._renderList=function(){var e=this.props,t=e.data,n=e.type;return Bo.a.createElement(ju,{className:"popper-body"},Bo.a.createElement("ul",{className:"notifications-list"},t.map(function(e,t){switch(n){case"notification":return Bo.a.createElement(gu,{key:"notification_"+e.NOTIFICATION_ID,data:e,index:t});case"following":return Bo.a.createElement(Eu,{key:"following_"+e.USER_ID,data:e,index:t});default:return null}})))},t.prototype._renderLoading=function(){return Bo.a.createElement("div",{className:"popper-body notifications-placeholder"},Tu,Bo.a.createElement("div",{className:"notifications-placeholder-title"},Object(di.a)("Chargement en cours")))},t.prototype._renderPlaceholder=function(){return Bo.a.createElement("div",{className:"popper-body notifications-placeholder"},wu,Bo.a.createElement("div",{className:"notifications-placeholder-title"},Object(di.a)("Ne restez pas dans votre coin.")),Bo.a.createElement("div",{className:"notifications-placeholder-social"},Bo.a.createElement("div",{className:"notifications-placeholder-text"},Object(di.a)("Connectez-vous sur les réseaux sociaux pour retrouver vos amis.")),Bo.a.createElement("div",{className:"notifications-placeholder-buttons"},Bo.a.createElement("button",{className:"btn btn-facebook",onClick:this._onSocialClick.bind(this,"facebook"),type:"button"},Nu),Bo.a.createElement("button",{className:"btn btn-twitter",onClick:this._onSocialClick.bind(this,"twitter"),type:"button"},Su),Cu)))},t.prototype._onSocialClick=function(e,t){void 0!==t.keyCode&&13!==t.keyCode||("twitter"===e?gp.a.link():"facebook"===e&&yp.a.login({scopes_mandatory:!0}))},t}(Uo.Component);Pu.defaultProps={isLoading:!1};var ku=Pu,Au=Bo.a.createElement(vi.a,{name:"cancel"}),xu=function(e){function t(n){Ka(this,t);var a=Qa(this,e.call(this,n));a._fetchFeedApiRef=null,a._displayMoreEnabled=!0,a._currentList=[],a._nbDisplay=20,a._defaultTab="feed",a._displayMore=a._displayMore.bind(a),a._updateNotifications=a._updateNotifications.bind(a),a._updateFeed=a._updateFeed.bind(a),a._updateFollowing=a._updateFollowing.bind(a),a._updateMessageCount=a._updateMessageCount.bind(a),a._filterFollowing=a._filterFollowing.bind(a),a._onFilterEmpty=a._onFilterEmpty.bind(a);var r=Array.isArray(ri.a.ticker);return a.state={tab:a._defaultTab,data:a._getTabData(a._defaultTab,r),notificationCount:ri.a.getNotificationCount(),messageCount:ri.a.getMessageCount(),nbDisplay:a._nbDisplay,feedLoaded:r,filter:""},a}return Xa(t,e),t.prototype.componentDidMount=function(){ni.a.subscribe(ni.a.live.notificationNew,this._updateNotifications,"popper_notifications"),ni.a.subscribe(ni.a.live.notificationRead,this._updateNotifications,"popper_notifications"),ni.a.subscribe(ni.a.live.tickerNew,this._updateFeed,"popper_notifications"),ni.a.subscribe(ni.a.live.messageNew,this._updateMessageCount,"popper_notifications"),ni.a.subscribe(ni.a.live.messageRead,this._updateMessageCount,"popper_notifications"),ni.a.subscribe(ni.a.user.addFavorite,this._updateFollowing,"popper_notifications"),ni.a.subscribe(ni.a.user.deleteFavorite,this._updateFollowing,"popper_notifications")},t.prototype.shouldComponentUpdate=function(e,t){return e.selected!==this.props.selected||t.tab!==this.state.tab||t.notificationCount!==this.state.notificationCount||t.messageCount!==this.state.messageCount||t.data.length!==this.state.data.length||t.feedLoaded!==this.state.feedLoaded||t.nbDisplay!==this.state.nbDisplay||t.filter!==this.state.filter},t.prototype.componentWillUnmount=function(){fi.a.cancel(this._fetchFeedApiRef),ni.a.unsubscribeAll("popper_notifications")},t.prototype.render=function(){return Bo.a.createElement(du,{className:"popper-notifications",size:"lg"},Bo.a.createElement("div",{className:"popper-header","aria-label":Object(di.a)("Activité"),tabIndex:"0"},this._renderNavbar(),this._renderTitle()),this._renderContent())},t.prototype._renderNavbar=function(){var e=this,t=this.state.tab,n=this._getTabList();return Bo.a.createElement("ul",{className:"popper-navbar",role:"tablist"},n.map(function(n){var a=ui()({"popper-navbar-link":!0,active:t===n.id});return Bo.a.createElement("li",{className:"popper-navbar-item",key:n.id},Bo.a.createElement(Op.a,{position:"bottom",text:n.label},Bo.a.createElement("a",{className:a,onClick:function(t){return e._onTabClick(t,n.id)},onKeyDown:function(t){return e._onTabClick(t,n.id)},role:"tab",tabIndex:"0","aria-label":n.label,"aria-selected":t===n.id,"aria-controls":"activity-"+n.id},Bo.a.createElement(vi.a,{name:n.icon,size:"18"}),Bo.a.createElement("span",{className:"sr-only"},n.label),e._renderCounter(n.counter))))}))},t.prototype._renderTitle=function(){var e=this.state,t=e.tab,n=e.filter,a=this._getTabList().find(function(e){return e.id===t}),r=null,o=null;return""!==n&&(o=Bo.a.createElement("button",{className:"filter-empty",onClick:this._onFilterEmpty,type:"button"},Au)),a.filter&&(r=Bo.a.createElement("span",{className:"filter"},Bo.a.createElement("input",{className:"filter-control form-control input-small",onChange:this._onFilterChange.bind(this,a.filter),placeholder:Object(di.a)("Rechercher"),ref:"filter",type:"text",value:n}),o)),Bo.a.createElement("div",{className:"popper-headings"},r,Bo.a.createElement("h2",{className:"heading-2"},a.label))},t.prototype._renderCounter=function(e){return 0===e?null:Bo.a.createElement("span",{className:"popper-navbar-counter"},e)},t.prototype._renderContent=function(){var e=this.state,t=e.tab,n=e.nbDisplay,a=e.feedLoaded,r=this.state.data.slice(0,n);switch(t){case"notifications":return Bo.a.createElement(ku,{data:r,type:"notification",key:"notifications-list"});case"feed":return Bo.a.createElement(ku,{data:r,isLoading:!a,type:"notification",key:"feed-list"});case"following":return Bo.a.createElement(ku,{data:r,type:"following",key:"following-list"});default:return null}},t.prototype._onTabClick=function(e,t){if((void 0===e.keyCode||13===e.keyCode)&&(e.preventDefault(),t!==this.state.tab)){var n=this.state.feedLoaded,a=this._nbDisplay,r=this._getTabData(t,n);this.setState({tab:t,data:r,nbDisplay:a,filter:""})}},t.prototype._onFilterChange=function(){var e=this.state.tab,t=this._getTabList().find(function(t){return t.id===e});if("function"==typeof t.filter){var n=this.refs.filter.value.toLowerCase().trim();this.setState({data:t.filter(n),filter:n})}},t.prototype._onFilterEmpty=function(){var e=this.refs.filter;e.value="",e.focus(),this._onFilterChange()},t.prototype._filterFollowing=function(e){var t=ri.a.data.FRIENDS.data.filter(function(t){var n=t.DISPLAY_NAME.toLowerCase(),a=ri.a.data.MESSAGE_UNREAD_HASH.hasOwnProperty(t.USER_ID);return-1!==n.indexOf(e)||a});return t.length>0&&(t=this._sortFollowing(t)),t},t.prototype._sortFollowing=function(e){if(0===e.length)return e;var t=function(e,t){var n=e.DISPLAY_NAME.toLowerCase().trim(),a=t.DISPLAY_NAME.toLowerCase().trim();return n>a?1:n<a?-1:0},n=[],a=[];return e.forEach(function(e){ri.a.data.MESSAGE_UNREAD_HASH.hasOwnProperty(e.USER_ID)?n.push(e):a.push(e)}),n.sort(t),a.sort(t),n.concat(a)},t.prototype._updateNotifications=function(){var e=this.state.tab,t={notificationCount:ri.a.getNotificationCount()};"notifications"===e&&(t.data=this._getTabData(e)),this.setState(t)},t.prototype._updateFeed=function(){var e=this.state,t=e.tab,n=e.feedLoaded;"feed"===t&&n&&this.setState({data:this._getTabData(t,n)})},t.prototype._updateFollowing=function(e,t){var n=this.state.tab;"user"===t.type&&"following"===n&&this.setState({data:this._getTabData(n)})},t.prototype._updateMessageCount=function(){var e=this.state.tab,t={messageCount:ri.a.getMessageCount()};"following"===e&&(t.data=this._getTabData(e)),this.setState(t)},t.prototype._getTabList=function(){var e=this.state,t=e.notificationCount,n=e.messageCount;return[{id:"feed",label:Object(di.a)("Activité"),icon:"time",filter:!1,counter:0},{id:"notifications",label:Object(di.a)("Notifications"),icon:"notification",filter:!1,counter:t},{id:"following",label:Object(di.a)("Following"),icon:"friends",filter:this._filterFollowing,counter:n}]},t.prototype._getTabData=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(e){case"notifications":return[].concat(ri.a.data.NOTIFICATIONS);case"feed":return t?[].concat(ri.a.ticker):(this._fetchFeed(),[]);case"following":return this._sortFollowing([].concat(ri.a.data.FRIENDS.data));default:return[]}},t.prototype._fetchFeed=function(){var e=this;this._fetchFeedApiRef=fi.a.call({method:"user.getFeed",data:{limit:20},success:function(t){ri.a.ticker=[],t.count>0&&t.data.reverse().forEach(ri.a.addTicker),e.setState({data:e._getTabData("feed",!0),feedLoaded:!0})},error:function(){}})},t.prototype._displayMore=function(){var e=this;if(!1===this._displayMoreEnabled||this.state.nbDisplay>=this.state.data.length)return!1;this._displayMoreEnabled=!1;var t=this.state.nbDisplay+this._nbDisplay;return this.setState({nbDisplay:t},function(){e._displayMoreEnabled=!0}),!0},t}(Uo.Component);xu.defaultProps={selected:null};var Du=pu(xu),Ru=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Iu=Bo.a.createElement(vi.a,{name:"cancel",size:"16"}),Lu=Bo.a.createElement("button",{className:"topbar-search-submit",type:"submit"},Bo.a.createElement(vi.a,{name:"search",size:"16"})),Mu=Bo.a.createElement("div",{className:"topbar-beta"},"BETA"),Fu=Bo.a.createElement(vi.a,{name:"bell",size:"18"}),Uu=function(e){function t(n){Ja(this,t);var a=Za(this,e.call(this,n));return a._inputRef=null,a._onSearchChange=a._onSearchChange.bind(a),a._onSearchSubmit=a._onSearchSubmit.bind(a),a._onSearchReset=a._onSearchReset.bind(a),a._onStoreChange=a._onStoreChange.bind(a),a._updateUnseenNotifications=a._updateUnseenNotifications.bind(a),a.state={searchQuery:"",unseenNotificationCount:0},a}return er(t,e),t.prototype.componentDidMount=function(){qi.a.onChange(this._onStoreChange),ni.a.subscribe(ni.a.live.notificationNew,this._updateUnseenNotifications),ni.a.subscribe(ni.a.live.notificationRead,this._updateUnseenNotifications),ni.a.subscribe(ni.a.live.messageNew,this._updateUnseenNotifications),ni.a.subscribe(ni.a.live.messageRead,this._updateUnseenNotifications),ni.a.ready(ni.a.user.userReady,this._updateUnseenNotifications)},t.prototype.componentWillUnmount=function(){qi.a.offChange(this._onStoreChange),qi.a.cancel(),ni.a.subscribe(ni.a.live.notificationNew,this._updateUnseenNotifications),ni.a.subscribe(ni.a.live.notificationRead,this._updateUnseenNotifications),ni.a.subscribe(ni.a.live.messageNew,this._updateUnseenNotifications),ni.a.subscribe(ni.a.live.messageRead,this._updateUnseenNotifications)},t.prototype.render=function(){return Bo.a.createElement("div",{className:"page-electron-topbar",id:"page_topbar"},this._renderSearch(),this._renderBetaLabel(),this._renderNotification(),this._renderProfile())},t.prototype._renderSearch=function(){var e=this,t=this.state.searchQuery,n="Search artists, albums, playlists...",a=ui()("topbar-search-form",{"topbar-search-active":""!==t}),r={placeholder:n,value:t,onChange:this._onSearchChange,ref:function(t){return e._inputRef=t}};return Bo.a.createElement("div",{className:"topbar-search"},Bo.a.createElement("form",{className:a,autoComplete:"off",onSubmit:this._onSearchSubmit},Bo.a.createElement("label",{className:"sr-only",htmlFor:"topbar-search"},n),Bo.a.createElement("input",Ru({className:"topbar-search-input",id:"topbar-search",type:"search"},r)),Bo.a.createElement("button",{className:"topbar-search-clear",type:"button",onClick:this._onSearchReset},Iu),Lu))},t.prototype._renderBetaLabel=function(){return Mu},t.prototype._renderNotification=function(){var e={trigger:"click",delay:500,isDisabled:!1};return Bo.a.createElement(Du,Ru({className:"topbar-action"},e),Bo.a.createElement("button",{className:"topbar-notification",type:"button"},Fu,Bo.a.createElement(Vi.a,{className:"topbar-notification-counter",counter:this.state.unseenNotificationCount})))},t.prototype._renderProfile=function(){var e=this.props.userPicture,t={trigger:"click",delay:500,isDisabled:!1};return Bo.a.createElement(mu,Ru({className:"topbar-action"},t),Bo.a.createElement("button",{className:"topbar-profile",type:"button"},Bo.a.createElement("img",{className:"topbar-profile-picture",src:rl.a.getImageSrc("user",e,32,32),alt:""})))},t.prototype._onSearchChange=function(e){qi.a.setQuery(e.target.value)},t.prototype._onSearchReset=function(){qi.a.setQuery(""),this._inputRef.focus()},t.prototype._onSearchSubmit=function(e){e.preventDefault(),this._inputRef.focus();var t=qi.a.getQuery();t&&(Wo.a.set("__SEARCH_TAB","all"),Go.f.push(this._getSearchUrl(t)))},t.prototype._onStoreChange=function(){this.setState({searchQuery:qi.a.getQuery()})},t.prototype._getSearchUrl=function(e){return 0===e.lastIndexOf("#",0)?"/tags/"+encodeURIComponent(e.replace(/#/g,"")):"/search/"+encodeURIComponent(e)},t.prototype._updateUnseenNotifications=function(){this.setState({unseenNotificationCount:ri.a.getNotificationCount()+ri.a.getMessageCount()})},t}(Uo.Component),Bu=Object(Ho.b)(function(e){return{userPicture:e.user.USER.USER_PICTURE}})(Uu),Hu=n("./node_modules/react-custom-scrollbars/lib/index.js"),Gu=(Bo.a.createElement("div",{className:"sidebar-header"},Bo.a.createElement("div",{className:"sidebar-navbar"},Bo.a.createElement("button",{className:"sidebar-navbar-arrow",type:"button"},Bo.a.createElement(vi.a,{name:"chevron-prev"})),Bo.a.createElement("button",{className:"sidebar-navbar-arrow",disabled:!0,type:"button"},Bo.a.createElement(vi.a,{name:"chevron-next"})))),Bo.a.createElement("div",{className:"sidebar-header"})),zu=function(e){function t(n){nr(this,t);var a=ar(this,e.call(this,n));return a._updateUnseenPlaylists=a._updateUnseenPlaylists.bind(a),a._onBugReportClick=a._onBugReportClick.bind(a),a._onUserReady=a._onUserReady.bind(a),a.state={unseenPlaylistCount:0},a}return rr(t,e),t.prototype.componentDidMount=function(){ni.a.subscribe(ni.a.playlist.seen,this._updateUnseenPlaylists),ni.a.ready(ni.a.user.userReady,this._onUserReady)},t.prototype.componentWillUnmount=function(){ni.a.unsubscribe(ni.a.playlist.seen,this._updateUnseenPlaylists)},t.prototype.render=function(){return Bo.a.createElement("div",{className:"page-electron-sidebar",id:"page_sidebar"},this._renderHeader(),this._renderNav())},t.prototype._renderHeader=function(){return Gu},t.prototype._renderNav=function(){var e=this;return Bo.a.createElement("div",{className:"sidebar-nav"},Bo.a.createElement(Hu.Scrollbars,null,Bo.a.createElement("ul",{className:"sidebar-nav-list",role:"navigation","aria-label":Object(di.a)("Menu principal")},this._getNavLinks().map(function(t){return e._renderNavLink(t)}))))},t.prototype._renderNavLink=function(e){if(e.isDisabled)return null;var t=ui()("sidebar-nav-item",{"is-divider":e.isDivider}),n={className:ui()("sidebar-nav-link",{"is-main":e.isMain}),activeClassName:"is-active",onlyActiveOnIndex:!0,to:e.to,onClick:e.onClick};return e.to||Object.assign(n,{role:"button",tabIndex:0,onKeyPress:e.onClick}),Bo.a.createElement("li",{className:t,key:e.id},Bo.a.createElement(ns.a,n,e.icon?Bo.a.createElement(vi.a,{name:e.icon,size:"16"}):null,Bo.a.createElement("span",{className:"sidebar-nav-label"},e.label),e.badge?Bo.a.createElement(Vi.a,{type:"info",counter:e.badge}):null))},t.prototype._onBugReportClick=function(e){if(void 0===e.key||"Enter"===e.key){var t=Wo.a.get("ATL_JQ_SHOW_DIALOG");"function"==typeof t&&t()}},t.prototype._onUserReady=function(){this._updateUnseenPlaylists()},t.prototype._updateUnseenPlaylists=function(){this.setState({unseenPlaylistCount:ri.a.getUnseenPlaylistCount()})},t.prototype._getNavLinks=function(){var e=this.state.unseenPlaylistCount;return[{id:"home",label:Object(di.a)("Accueil"),to:"/"+this.props.userLang+"/",isMain:!0},{id:"feed",label:Object(di.a)("À écouter"),to:"/feed",isMain:!0},{id:"bugreport",label:"Report a bug",to:null,onClick:this._onBugReportClick,isMain:!0,isDisabled:!Ko.a.isAllowed("employee_feature")},{id:"profile",label:Object(di.a)("Ma musique"),to:"/profile/"+this.props.userID,isMain:!0,isDivider:!0},{id:"loved",label:Object(di.a)("Coups de cœur"),to:"/profile/"+this.props.userID+"/loved",icon:"love"},{id:"downloads",label:"Downloads",to:"/profile/"+this.props.userID+"/downloads",icon:"download",isDisabled:!0},{id:"playlists",label:Object(di.a)("Playlists"),to:"/profile/"+this.props.userID+"/playlists",icon:"playlist",badge:e},{id:"albums",label:Object(di.a)("Albums"),to:"/profile/"+this.props.userID+"/albums",icon:"album"},{id:"podcasts",label:Object(di.a)("Podcasts"),to:"/profile/"+this.props.userID+"/shows",icon:"podcast",isDisabled:!Ko.a.isAllowed("talk")},{id:"audiobooks",label:Object(di.a)("Livres audio"),to:"/profile/"+this.props.userID+"/audiobooks",icon:"audiobook",isDisabled:!Ko.a.isAllowed("audiobook")}]},t}(Uo.Component),qu=Object(Ho.b)(function(e){var t=e.user;return{userID:t.id,userLang:t.SETTING_LANG}})(zu),Yu=n("./node_modules/react-transition-group/index.js"),Wu=n("./js/_components/Player/presets/index.js"),Vu=function(e){var t=e.playerUI.title,n=e.track;return t.url&&t.id?t.url+n[t.id]:null},Ku=function(e){var t=e.playerUI.subTitle,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0).ART_ID;return t.url&&n?t.url+n:null},Qu=n("./js/_components/DataGrid/index.js"),Xu=n("./js/_components/DataGrid/utils.js"),$u=Bo.a.createElement(vi.a,{className:"checkbox-tick",name:"check"}),Ju=function(e){function t(n){ir(this,t);var a=sr(this,e.call(this,n));return a._onUpNextToggle=a._onUpNextToggle.bind(a),a._nbDisplayTracks=0,a.state={list:a._getList(n)},a}return lr(t,e),t.prototype.componentWillReceiveProps=function(e){e.index!==this.props.index&&e.isRadio&&this.setState({list:this._getList(e)})},t.prototype.render=function(){return Bo.a.createElement("div",null,this._renderUpNextToggle(),this._renderRecommendations())},t.prototype._renderUpNextToggle=function(){var e=this.props,t=e.isAuth,n=e.isUpnext,a=e.playerUI,r=e.hasUpNext;if(!(t&&(a.upnext||n)))return null;var o=ui()({checkbox:!0,checked:r});return Bo.a.createElement("div",{className:"player-upnext"},Bo.a.createElement("span",{className:"player-queuelist-title"},Object(di.a)("Recommandations automatiques")),Bo.a.createElement("button",{className:"player-upnext-check",type:"button",onClick:this._onUpNextToggle},Bo.a.createElement("span",{className:o},$u)))},t.prototype._renderRecommendations=function(){var e=this.props,t=e.userID;return e.isUpnext?Bo.a.createElement(Qu.a,{id:t,type:"queuelist",items:this._getList(),options:{isRadio:!0,changeOrder:!1}}):null},t.prototype._onUpNextToggle=function(e){e.preventDefault(),e.stopPropagation();var t=this.props,n=t.hasUpNext,a=t.context,r=t.list,o=t.recommendations,i=t.index;if(n=!n,this.props.toggleUpNext({hasUpNext:n}),!n&&"up_next_artist"===a.TYPE){var s=r.length+o.length,l=i+1;s-l>0&&Yo.a.removeTracks(l,s-l)}},t.prototype._getList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.index,n=e.list;return e.recommendations.slice(0,t-n.length+1)},t}(Uo.Component),Zu=Object(Ho.b)(function(e){return{userID:e.user.id,list:e.player.music.list,index:e.player.music.index,context:e.player.music.context,recommendations:e.player.music.recommendations,isRadio:e.player.config.isRadio,isUpnext:e.player.config.isUpnext,isAuth:e.user.isAuth,hasUpNext:e.user.hasUpNext,playerUI:Object(Ji.getInterfaceConfiguration)(e),uiType:Object(Ji.getInterfaceType)(e)}},{toggleUpNext:si.f})(Ju),ed=Bo.a.createElement(Zu,null),td=function(e){function t(n){pr(this,t);var a=ur(this,e.call(this,n));return a._onScroll=ql()(a._onScroll.bind(a),100),a._onScrollStop=a._onScrollStop.bind(a),a._nbDisplayTracks=0,a.state={list:a._getList(n)},a}return dr(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.isRadio,n=e.index,a=this.refs.scrollbar;t?a.scrollToBottom():a.scrollTop(n*Xu.u)},t.prototype.componentWillReceiveProps=function(e){(e.index!==this.props.index&&e.isRadio||e.list.length!==this.props.list)&&this.setState({list:this._getList(e)})},t.prototype.render=function(){var e=this.props,t=e.userID,n=e.uiType,a=e.isRadio,r=e.isUpnext,o=this.state.list,i=a&&!r;return Bo.a.createElement("div",{className:"player-queuelist-container",onScroll:this._onScroll},Bo.a.createElement(Hu.Scrollbars,{onScrollStop:this._onScrollStop,ref:"scrollbar"},Bo.a.createElement(Qu.a,{id:t,type:n===Wu.a.PODCAST?"queuelistPodcast":"queuelist",items:o,options:{isRadio:i,changeOrder:!i}}),this._renderUpnext()))},t.prototype._renderUpnext=function(){return this._isFullyRendered()?ed:null},t.prototype._onScroll=function(){ni.a.trigger(ni.a.menu.contextMenuClose)},t.prototype._onScrollStop=function(){if(!this.props.isRadio){var e=this.refs.scrollbar,t=e.getScrollHeight(),n=e.getScrollTop();e.getClientHeight()+n<t-Xu.u||this._isFullyRendered()||(this._nbDisplayTracks+=40,this.setState({list:this._getList()}))}},t.prototype._getList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.index,n=e.list;return e.isRadio?n.slice(0,t+1):n.slice(0,this._nbDisplayTracks+40)},t.prototype._isFullyRendered=function(){var e=this.props,t=e.list;return!!e.isRadio||this._nbDisplayTracks+40>=t.length},t}(Uo.Component),nd=Object(Ho.b)(function(e){return{userID:e.user.id,list:e.player.music.list,index:e.player.music.index,context:e.player.music.context,isRadio:e.player.config.isRadio,isUpnext:e.player.config.isUpnext,playerUI:Object(Ji.getInterfaceConfiguration)(e),uiType:Object(Ji.getInterfaceType)(e)}})(td),ad=Bo.a.createElement(vi.a,{name:"chevron-down",size:"auto"}),rd=Bo.a.createElement(nd,null),od=function(e){function t(n){hr(this,t);var a=mr(this,e.call(this,n));return a._onClose=a._onClose.bind(a),a._onCreatePlaylist=a._onCreatePlaylist.bind(a),a._onDislikeClick=a._onDislikeClick.bind(a),a}return yr(t,e),t.prototype.componentDidMount=function(){this._unlisten=Go.f.listenBefore(this._onClose)},t.prototype.componentWillUnmount=function(){this._unlisten()},t.prototype.render=function(){var e=this,t=this.props,n=t.status,a=t.uiType,r=t.track,o=t.trackTitle,i=t.trackArtists,s=ui()("player-full",{"is-active":"entering"===n||"entered"===n});return Bo.a.createElement("div",{className:s},Bo.a.createElement("div",{className:"player-header"},Bo.a.createElement("div",{className:"player-close-btn"},Bo.a.createElement("button",{className:"svg-icon-group-btn",type:"button",onClick:this._onClose},ad))),Bo.a.createElement("div",{className:"player-container"},Bo.a.createElement("div",{className:"player-cover"},Bo.a.createElement("div",{className:"player-cover-thumbnail"},Bo.a.createElement(lc.a,{type:a===Wu.a.PODCAST?Vo.a.Episode:Vo.a.Album,height:380,width:380,data:r,coverLink:!1})),Bo.a.createElement("div",{className:"player-cover-title"},Bo.a.createElement(ns.a,{className:"player-cover-link",to:Vu(this.props)},o)," · ",i.map(function(t,n){return[n>0?", ":"",Bo.a.createElement(ns.a,{className:"player-cover-link",key:t.ART_ID,to:Ku(e.props,t)},t.ART_NAME)]})),Bo.a.createElement("div",{className:"player-cover-actions"},Bo.a.createElement("ul",{className:"svg-icon-group"},Bo.a.createElement("li",{className:"svg-icon-group-item"},this._renderLike()),Bo.a.createElement("li",{className:"svg-icon-group-item"},this._renderDislike()),Bo.a.createElement("li",{className:"svg-icon-group-item"},this._renderContextMenu("addToPlaylist")),Bo.a.createElement("li",{className:"svg-icon-group-item"},this._renderContextMenu())))),Bo.a.createElement("div",{className:"player-queuelist"},Bo.a.createElement("div",{className:"player-queuelist-header"},Bo.a.createElement("div",{className:"player-queuelist-heading"},this._renderTitle(),this._renderSubTitle()),this._renderSaveAsPlaylist()),rd)))},t.prototype._renderTitle=function(){var e=this.props,t=e.isRadio,n=e.isFlow,a=e.isUpnext,r=Object(di.a)("File d'attente");return t&&!a&&(r=n?Object(di.a)("Derniers titres écoutés sur Flow"):Object(di.a)("Derniers titres écoutés dans le mix")),Bo.a.createElement("span",{className:"player-queuelist-title"},r)},t.prototype._renderSubTitle=function(){var e=this.props,t=e.list,n=e.isRadio,a=e.tracklistDuration;if(n)return null;var r=Object(di.c)("%s titre","%s titres",{sprintf:[Object(ys.f)(t.length)],count:t.length});return Bo.a.createElement("span",{className:"player-queuelist-info"}," · ",r," · ",Object(ys.t)(a))},t.prototype._renderSaveAsPlaylist=function(){return this.props.playerUI.saveAsPlaylist?Bo.a.createElement("div",{className:"player-queuelist-save-btn"},Bo.a.createElement("button",{className:"btn btn-default",type:"button",onClick:this._onCreatePlaylist},Bo.a.createElement("span",{className:"label"},Object(di.a)("Ajouter à une playlist")))):null},t.prototype._renderLike=function(){var e=this.props,t=e.playerUI,n=e.id;return t.like?Bo.a.createElement(cs.a,{className:"svg-icon-group-btn",type:"song",tooltip:!0,context:"player",id:String(n)}):null},t.prototype._renderDislike=function(){var e=this.props,t=e.playerUI,n=e.id;return t.dislike?Bo.a.createElement(ls.a,{className:"svg-icon-group-btn",tooltip:!0,id:n,onClickCallback:this._onDislikeClick}):null},t.prototype._renderContextMenu=function(e){var t=this.props,n=t.track,a=t.id,r=t.context,o=t.playerUI,i=t.isFavorite,s=t.isRadio;if(!o.contextMenu)return null;var l="addToPlaylist"===e,c={position:"right",type:"track",forceShowPlaylists:l,anchor:Bo.a.createElement("button",{className:"svg-icon-group-btn",type:"button"},Bo.a.createElement(vi.a,{name:l?"add":"options",size:"auto"})),data:{SONG:n,PLAYLIST_ID:r.ID},id:Number(a),context:"player",isFavorite:i,isRadio:s};return Bo.a.createElement(ps.a,c)},t.prototype._onClose=function(){this.props.setPlayerFull({isPlayerFull:!1})},t.prototype._onCreatePlaylist=function(){var e=this.props,t=e.isUpnext,n=e.isRadio,a=e.list,r=e.recommendations,o=e.index,i=a;t?i=i.concat(r.slice(0,o-a.length+1)):n&&(i=i.slice(0,o+1)),ti.a.open("/lightbox/playlist_assistant?type=create",!1,{sng_id:i.map(function(e){return e.SNG_ID})})},t.prototype._onDislikeClick=function(){this.context.onNext()},t}(Uo.Component),id=Object(Ho.b)(function(e){return{id:e.player.music.id,track:e.player.music.track,list:e.player.music.list,index:e.player.music.index,context:e.player.music.context,isFavorite:e.player.music.isFavorite,recommendations:e.player.music.recommendations,tracklistDuration:e.player.music.tracklistDuration,isRadio:e.player.config.isRadio,isFlow:e.player.config.isFlow,isUpnext:e.player.config.isUpnext,trackTitle:Object(es.l)(e),trackArtists:Object(es.j)(e),playerUI:Object(Ji.getInterfaceConfiguration)(e),uiType:Object(Ji.getInterfaceType)(e)}},{setPlayerFull:Ji.setPlayerFull})(od),sd=function(e){function t(){return gr(this,t),_r(this,e.apply(this,arguments))}return vr(t,e),t.prototype.render=function(){return Bo.a.createElement(du,{className:"popper-player-preview",size:"lg"},this._renderThumbnail(),this._renderInfos(),this._renderAction())},t.prototype._renderThumbnail=function(){var e=this.props,t=e.type,n=e.trackPrev,a=e.trackNext,r=e.mediaType,o=void 0;return o="prev"===t?n:a,Bo.a.createElement("div",{className:"preview-thumbnail"},Bo.a.createElement(lc.a,{type:r===Yo.a.MEDIA_TYPE_TALK?Vo.a.Episode:Vo.a.Album,height:40,width:40,data:o,coverLink:!1}))},t.prototype._renderInfos=function(){var e=this,t=this.props,n=t.type,a=t.trackPrev,r=t.trackNext,o=t.prevTrackTitle,i=t.prevTrackArtists,s=t.nextTrackTitle,l=t.nextTrackArtists,c=void 0,p=void 0,u=void 0;return"prev"===n?(c=a,p=o,u=i):(c=r,p=s,u=l),Bo.a.createElement("div",{className:"preview-heading"},Bo.a.createElement(ns.a,{className:"preview-link",to:this._getTitleLink(c)},p)," • ",u.map(function(t,n){return[n>0?", ":"",Bo.a.createElement(ns.a,{className:"preview-link",key:t.ART_ID,to:e._getSubTitleLink(t)},t.ART_NAME)]}))},t.prototype._renderAction=function(){return Bo.a.createElement("div",{className:"preview-action"},Bo.a.createElement("ul",{className:"svg-icon-group"},this._renderLike()))},t.prototype._renderLike=function(){var e=this.props,t=e.ui,n=e.type,a=e.trackPrev,r=e.trackNext;if(!t.like)return null;var o="prev"===n?a[Yo.a.getMediaId(a)]:r[Yo.a.getMediaId(r)];return Bo.a.createElement("li",{className:"svg-icon-group-item"},Bo.a.createElement(cs.a,{className:"svg-icon-group-btn",type:"song",context:"player",tooltip:!0,id:String(o)}))},t.prototype._getTitleLink=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.props.ui;return t.title.url||t.title.id?t.title.url+e[t.title.id]:null},t.prototype._getSubTitleLink=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.props.ui;return t.subTitle.url&&0!==Number(e.ART_ID)?t.subTitle.url+e.ART_ID:null},t}(Uo.Component);sd.contextTypes={onNext:Jo.a.func};var ld=pu(Object(Ho.b)(function(e){return{trackPrev:e.player.music.trackPrev,trackNext:e.player.music.trackNext,mediaType:e.player.music.mediaType,prevTrackTitle:Object(es.i)(e),prevTrackArtists:Object(es.h)(e),nextTrackTitle:Object(es.g)(e),nextTrackArtists:Object(es.f)(e),ui:Object(Ji.getInterfaceConfiguration)(e)}})(sd)),cd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},pd=Bo.a.createElement(vi.a,{name:"prev",size:"auto"}),ud=Bo.a.createElement(vi.a,{name:"prev-30",size:"auto"}),dd=Bo.a.createElement(vi.a,{name:"next",size:"auto"}),fd=Bo.a.createElement(vi.a,{name:"next-30",size:"auto"}),hd=function(e){function t(n){Or(this,t);var a=jr(this,e.call(this,n));return a._onTogglePlay=a._onTogglePlay.bind(a),a._onPrev=a._onPrev.bind(a),a._onNext=a._onNext.bind(a),a._onSkipBackwards=a._onSkipBackwards.bind(a),a._onSkipForwards=a._onSkipForwards.bind(a),a}return Tr(t,e),t.prototype.render=function(){return Bo.a.createElement("div",{className:"player-controls"},Bo.a.createElement("ul",{className:"svg-icon-group"},Bo.a.createElement("li",{className:"svg-icon-group-item"},this._renderPrev()),Bo.a.createElement("li",{className:"svg-icon-group-item"},this._renderSkipBackwards()),Bo.a.createElement("li",{className:"svg-icon-group-item"},this._renderPlay()),Bo.a.createElement("li",{className:"svg-icon-group-item"},this._renderSkipForwards()),Bo.a.createElement("li",{className:"svg-icon-group-item"},this._renderNext())))},t.prototype._renderPrev=function(){if(!this.props.playerUI.prev)return null;var e=Object(di.a)("Précédent"),t=Yo.a.getPrevSong()&&this.props.repeat!==Yo.a.repeatLevel.REPEAT_SINGLE&&!Yo.a.isRadio(),n={trigger:"hover",delay:500,isDisabled:!this.props.hasPrev||!t,data:{type:"prev"}},a={disabled:!this.props.hasPrev,onClick:this._onPrev,"aria-label":e};return Bo.a.createElement(ld,n,Bo.a.createElement("button",cd({className:"svg-icon-group-btn",type:"button"},a),pd))},t.prototype._renderSkipBackwards=function(){if(!this.props.playerUI.skipBackwards)return null;var e=Object(di.a)("Retour rapide de 30 secondes");return Bo.a.createElement("button",{className:"svg-icon-group-btn",type:"button","aria-label":e,onClick:this._onSkipBackwards},ud)},t.prototype._renderNext=function(){if(!this.props.playerUI.next)return null;var e=Object(di.a)("Suivant"),t=Yo.a.getNextSong()&&this.props.repeat!==Yo.a.repeatLevel.REPEAT_SINGLE&&!Yo.a.isRadio(),n={trigger:"hover",delay:500,isDisabled:!this.props.hasNext||!t,data:{type:"next"}},a={disabled:!this.props.hasNext,onClick:this._onNext,"aria-label":e};return Bo.a.createElement(ld,n,Bo.a.createElement("button",cd({className:"svg-icon-group-btn",type:"button"},a),dd))},t.prototype._renderSkipForwards=function(){if(!this.props.playerUI.skipForwards)return null;var e=Object(di.a)("Avance rapide de 30 secondes");return Bo.a.createElement("button",{className:"svg-icon-group-btn",type:"button","aria-label":e,onClick:this._onSkipForwards},fd)},t.prototype._renderPlay=function(){var e=this.props,t=e.playing,n=e.paused,a=e.loading,r=e.canPaused,o=e.playerUI,i=n&&!t||!n&&!t,s=o.stop?Object(di.a)("Stop"):Object(di.a)("Pause"),l=i?Object(di.a)("Play"):s,c=o.stop?"stop":"pause",p=i?"play":c;return Bo.a.createElement("button",{className:"svg-icon-group-btn is-highlight",type:"button",disabled:!r||a,"aria-label":l,onClick:this._onTogglePlay},Bo.a.createElement(vi.a,{name:p,size:"auto"}))},t.prototype._onPrev=function(){Xi.a.intent("prev"),Yo.a.control.prevSong()},t.prototype._onNext=function(){this.context.onNext()},t.prototype._onSkipBackwards=function(){var e=this.props.trackDuration,t=(Yo.a.getPosition()-30)/e;Yo.a.control.seek(t)},t.prototype._onSkipForwards=function(){var e=this.props.trackDuration,t=(Yo.a.getPosition()+30)/e;t>=1?this._onNext():Yo.a.control.seek(t)},t.prototype._onTogglePlay=function(){if(Wo.a.get("OFFLINE"))Gs.a.display();else{var e=this.props,t=e.playing,n=e.paused,a=e.playerUI,r=n&&!t||!n&&!t;r?Yo.a.control.play():a.pause?Yo.a.control.pause():Yo.a.control.stop(),Xi.a.intent(r?"play":"pause")}},t}(Uo.Component);hd.contextTypes={onNext:Jo.a.func};var md=Object(Ho.b)(function(e){return{trackDuration:e.player.music.trackDuration,playing:e.player.control.playing,paused:e.player.control.paused,loading:e.player.control.loading,repeat:e.player.control.repeat,hasNext:Object(Zi.f)(e),hasPrev:Object(Zi.g)(e),canPaused:Object(Zi.b)(e),playerUI:Object(Ji.getInterfaceConfiguration)(e)}})(hd),yd=Bo.a.createElement("div",{className:"slider-track-default"}),bd=function(e){function t(n){Nr(this,t);var a=Sr(this,e.call(this,n));return a._onKeyUp=a._onKeyUp.bind(a),a._onMouseUp=a._onMouseUp.bind(a),a._onChange=a._onChange.bind(a),a._showTooltip=a._showTooltip.bind(a),a._hideTooltip=a._hideTooltip.bind(a),a.state={position:!1,isActive:!1,tooltipOffset:null,tooltipValue:0},a}return Cr(t,e),t.prototype.shouldComponentUpdate=function(e,t){return e.value!==this.props.value||!1!==t.position||t.isActive!==this.state.isActive||t.tooltipOffset!==this.state.tooltipOffset||t.tooltipValue!==this.state.tooltipValue},t.prototype.render=function(){var e=this,t=this.props,n=t.max,a=t.min,r=t.value,o=t.step,i=t.disabled,s=t.tooltip,l=t.autoHide,c=this.state,p=c.position,u=c.isActive,d=p||r,f=100*(d-a)/(n-a)||0,h={className:ui()("slider",{"slider-autohide":l,"is-active":u}),onMouseEnter:l?function(){return e._setActive(!0)}:null,onMouseLeave:l?function(){return e._setActive(!1)}:null,onFocus:l?function(){return e._setActive(!0)}:null,onBlur:l?function(){return e._setActive(!1)}:null},m=this._getSliderTrackStyle(f);return Bo.a.createElement("div",h,this._renderCurrentValue(d),Bo.a.createElement("div",{className:"slider-track",ref:"sliderTrack"},yd,Bo.a.createElement("div",{className:"slider-track-active",style:m}),Bo.a.createElement("input",{className:"slider-track-input",type:"range",step:o,min:a,max:n,value:d,disabled:i,"aria-valuemin":a,"aria-valuemax":n,"aria-valuenow":d,onMouseUp:this._onMouseUp,onKeyUp:this._onKeyUp,onChange:this._onChange,onMouseMove:s?this._showTooltip:null,onMouseOut:s?this._hideTooltip:null})),this._renderMaxValue(),this._renderTooltip())},t.prototype._renderCurrentValue=function(e){if(!1===this.props.counter)return null;var t=this._formatValue(e);return Bo.a.createElement("div",{className:"slider-counter slider-counter-current"},t)},t.prototype._renderMaxValue=function(){var e=this.props,t=e.counter,n=e.max;if(!1===t)return null;var a=this._formatValue(n);return Bo.a.createElement("div",{className:"slider-counter slider-counter-max"},a)},t.prototype._renderTooltip=function(){var e=this.state,t=e.tooltipOffset,n=e.tooltipValue;if(null===t)return null;var a=this._formatValue(n),r=this._getTooltipStyle(t);return Bo.a.createElement("div",{className:"slider-tooltip",style:r},a)},t.prototype._onMouseUp=function(e){this.props.onChange(e.target.value);var t={position:!1};if(this.props.tooltip){var n=e.target.getBoundingClientRect(),a=Math.floor(n.left),r=Math.floor(n.width);(e.clientX<a||e.clientX>a+r)&&(t.tooltipOffset=null)}this.setState(t)},t.prototype._onKeyUp=function(e){-1!==[33,34,35,36,37,38,39,40].indexOf(e.keyCode)&&(this.props.onChange(e.target.value),this.setState({position:!1}))},t.prototype._onChange=function(e){var t=e.target.value;this.props.onProgress(t),this.setState({position:t})},t.prototype._showTooltip=function(e){var t=this.refs.sliderTrack.getBoundingClientRect(),n=Math.floor(t.left),a=Math.floor(t.width),r=e.clientX-n;r<0&&(r=0),r>a&&(r=a);var o=this._getValueByCursorPosition(e.clientX);null!==this.state.tooltipOffset&&o===this.state.tooltipValue||this.setState({tooltipOffset:r,tooltipValue:o})},t.prototype._hideTooltip=function(){this.setState({tooltipOffset:null})},t.prototype._formatValue=function(e){var t=this.props.counter;return"function"==typeof t?t(e):e},t.prototype._setActive=function(e){this.setState({isActive:e})},t.prototype._getSliderTrackStyle=function(e){return{width:e+"%",willChange:"width"}},t.prototype._getTooltipStyle=function(e){return{transform:"translate3d("+e+"px, 0px, 0px)",WebkitTransform:"translate3d("+e+"px, 0px, 0px)",willChange:"transform"}},t.prototype._getValueByCursorPosition=function(e){var t=this.props,n=t.min,a=t.max,r=t.step,o=this.refs.sliderTrack.getBoundingClientRect(),i=Math.floor(o.left),s=Math.floor(o.width),l=e-i;l<0&&(l=0),l>s&&(l=s);var c=l/s*100/100,p=Math.round(c*(a*r/r)+n-c*n);return r>1&&p%r!=0?p-p%r:p},t}(Uo.Component);bd.defaultProps={min:0,max:100,value:0,step:1,disabled:!1,counter:!0,tooltip:!1,autoHide:!1,onChange:function(){},onProgress:function(){}};var gd=bd,_d=function(e){function t(n){kr(this,t);var a=Ar(this,e.call(this,n));return a._onChangeVolume=a._onChangeVolume.bind(a),a}return xr(t,e),t.prototype.render=function(){var e=this.props,t=e.volume,n=e.mute;return Bo.a.createElement(du,{className:"popper-player-volume"},Bo.a.createElement(gd,{min:0,max:100,step:1,value:n?0:t,counter:!1,onProgress:this._onChangeVolume}))},t.prototype._onChangeVolume=function(e){Yo.a.control.setVolume(Number(e/100),!0)},t}(Uo.Component),vd=pu(Object(Ho.b)(function(e){var t=e.player;return{volume:Math.round(100*t.control.volume),mute:t.control.mute}})(_d)),Ed=function(e){function t(){return Rr(this,t),Ir(this,e.apply(this,arguments))}return Lr(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.type,a=e.id,r=e.value,o=e.checked,i=ui()("input-"+n,t,{"is-checked":o}),s=null===a?"label":"span";return Bo.a.createElement(s,{className:i},Bo.a.createElement("input",{className:"input-control",id:a,type:"radio"===n?"radio":"checkbox",value:r,checked:o,onChange:this._onChange.bind(this)}))},t.prototype._onChange=function(e){var t=e.target,n=t.value,a=t.checked;this.props.onChange(""!==n?n:a)},t}(Uo.Component);Ed.defaultProps={className:"",type:"checkbox",id:null,value:"",checked:!1,onChange:function(){}},Ed.TYPE_CHECKBOX="checkbox",Ed.TYPE_RADIO="radio",Ed.TYPE_SWITCH="switch";var Od=Ed,jd=Bo.a.createElement("div",{className:"setting-info"},"128kb/s"),Td=Bo.a.createElement("div",{className:"setting-info"},"320kb/s"),wd=Bo.a.createElement("div",{className:"setting-info"},"1 411kb/s"),Nd=Bo.a.createElement("div",{className:"setting-label"},"Electron UI"),Sd=function(e){function t(n){Fr(this,t);var a=Ur(this,e.call(this,n));return a._onAudioQualityChange=a._onAudioQualityChange.bind(a),a._onAudioQualityUpdate=a._onAudioQualityUpdate.bind(a),a._onHtml5PlayerUpdate=a._onHtml5PlayerUpdate.bind(a),a._onNormalizeUpdate=a._onNormalizeUpdate.bind(a),a._onElectronUIUpdate=a._onElectronUIUpdate.bind(a),a._onFadeChange=a._onFadeChange.bind(a),a._onFadeUpdate=a._onFadeUpdate.bind(a),a._onDiscoverClick=a._onDiscoverClick.bind(a),a.state={hq:Yo.a.isHq(),normalize:Yo.a.normalize,fade:Math.round(10*Yo.a.fade)},a}return Br(t,e),t.prototype.componentDidMount=function(){ni.a.subscribe(ni.a.player.hq,this._onAudioQualityChange,"player_bottom"),ni.a.subscribe(ni.a.player.fade,this._onFadeChange,"player_bottom"),ni.a.subscribe(ni.a.user.settingChanged,this._onUserSettingChange,"player_bottom")},t.prototype.componentWillUnmount=function(){ni.a.unsubscribeAll("player_bottom")},t.prototype.render=function(){return Bo.a.createElement(du,{className:"popper-player-settings"},this._renderAudioQuality(),Bo.a.createElement("ul",{className:"setting-menu"},this._renderHtml5Player(),this._renderNormalize(),this._renderElectronUI()),this._renderSoundFade())},t.prototype._renderAudioQuality=function(){return Bo.a.createElement("ul",{className:"setting-menu"},Bo.a.createElement("li",{className:"setting-item"},Bo.a.createElement("div",{className:"setting-label"},Object(di.a)("Qualité Audio"))),this._renderAudioQualityStandard(),this._renderAudioQualityHigh(),this._renderAudioQualityLossless())},t.prototype._renderAudioQualityStandard=function(){var e=this.state.hq;return Bo.a.createElement("li",{className:"setting-item"},Bo.a.createElement("div",{className:"setting-label"},Object(di.a)("Standard")),jd,Bo.a.createElement("div",{className:"setting-input"},Bo.a.createElement(Od,{type:Od.TYPE_RADIO,value:"128",checked:!e,onChange:this._onAudioQualityUpdate})))},t.prototype._renderAudioQualityHigh=function(){var e=this.state.hq;return Bo.a.createElement("li",{className:"setting-item"},Bo.a.createElement("div",{className:"setting-label"},Object(di.a)("Supérieure")),Td,Bo.a.createElement("div",{className:"setting-input"},this.props.hasHqAudio?Bo.a.createElement(Od,{type:Od.TYPE_RADIO,value:"320",checked:e,onChange:this._onAudioQualityUpdate}):Bo.a.createElement(ns.a,{className:"setting-discover-link link-animated",to:"/offers",target:"_blank"},Object(di.a)("Essayer"))))},t.prototype._renderAudioQualityLossless=function(){return Bo.a.createElement("li",{className:"setting-item"},Bo.a.createElement("div",{className:"setting-label"},Object(di.a)("HiFi")),wd,Bo.a.createElement("div",{className:"setting-input"},this.props.hasLosslessAudio?Bo.a.createElement(Od,{type:Od.TYPE_RADIO,value:"1411",checked:!1,onChange:this._onAudioQualityUpdate}):Bo.a.createElement(ns.a,{className:"setting-discover-link link-animated",to:"/offers/hifi",target:"_blank"},Object(di.a)("Essayer"))),Bo.a.createElement("div",{className:"setting-notice"},Object(di.a)("Écouter en qualité FLAC")))},t.prototype._renderHtml5Player=function(){if(!Yo.a.html5.supported||"Firefox"===Oc.a.browser)return null;var e=this.props.hasHTML5Player;return Bo.a.createElement("li",{className:"setting-item"},Bo.a.createElement("div",{className:"setting-label"},Object(di.a)("Player HTML5")),Bo.a.createElement("div",{className:"setting-input"},Bo.a.createElement(Od,{type:Od.TYPE_SWITCH,checked:e,onChange:this._onHtml5PlayerUpdate})))},t.prototype._renderNormalize=function(){if(!Yo.a.html5.active||!Ko.a.isAllowed("employee_feature")&&!Ko.a.isAllowed("business"))return null;var e=this.state.normalize;return Bo.a.createElement("li",{className:"setting-item"},Bo.a.createElement("div",{className:"setting-label"},Object(di.a)("Normaliser le volume")),Bo.a.createElement("div",{className:"setting-input"},Bo.a.createElement(Od,{type:Od.TYPE_SWITCH,checked:e,onChange:this._onNormalizeUpdate})))},t.prototype._renderElectronUI=function(){if(!Ko.a.isAllowed("electron_ui"))return null;var e=this.props.UI.current===this.props.UI.electron;return Bo.a.createElement("li",{className:"setting-item"},Nd,Bo.a.createElement("div",{className:"setting-input"},Bo.a.createElement(Od,{type:Od.TYPE_SWITCH,checked:e,onChange:this._onElectronUIUpdate})))},t.prototype._renderSoundFade=function(){if(Yo.a.html5.active)return null;var e=this.state.fade;return Bo.a.createElement("ul",{className:"setting-menu"},Bo.a.createElement("li",{className:"setting-item"},Bo.a.createElement("div",{className:"setting-label"},Object(di.a)("Fondu sonore")),Bo.a.createElement("div",{className:"setting-input"},Bo.a.createElement(gd,{min:0,max:10,step:1,value:e,onChange:this._onFadeUpdate}))))},t.prototype._onAudioQualityChange=function(e,t){var n=this;this.setState({hq:t},function(){n.props.onHqAudioToggle({hasHqAudio:t})})},t.prototype._onAudioQualityUpdate=function(e){Yo.a.control.setHq("320"===e)},t.prototype._onHtml5PlayerUpdate=function(e){this.props.updateSettings({site:{player_html5:e}})},t.prototype._onNormalizeUpdate=function(e){this.setState({normalize:e},function(){Yo.a.control.setNormalize(e),Bi.a.set({site:{player_normalize:e}})})},t.prototype._onElectronUIUpdate=function(e){this.props.updateSettings({site:{version:e?this.props.UI.electron:this.props.UI.web}})},t.prototype._onFadeChange=function(e,t){this.setState({fade:Math.round(10*t)})},t.prototype._onFadeUpdate=function(e){Yo.a.control.changeFadeValue(e/10)},t.prototype._onUserSettingChange=function(e,t){t.data&&t.data.site&&(void 0===t.data.site.player_html5&&void 0===t.data.site.version||$i.a.reload())},t.prototype._onDiscoverClick=function(e){e.preventDefault(),Object($i.b)(e.target.href)},t}(Uo.Component);Sd.defaultProps={hasHTML5Player:Yo.a.html5.supported};var Cd={onHqAudioToggle:si.e,updateSettings:si.j},Pd=pu(Object(Ho.b)(function(e){var t=e.user;return{hasHqAudio:t.USER.OPTIONS.web_hq,hasLosslessAudio:t.USER.OPTIONS.web_lossless,hasHTML5Player:t.USER.SETTING.site.player_html5,UI:Object(si.c)(t)}},Cd)(Sd)),kd=Bo.a.createElement(Pd,{trigger:"click"},Bo.a.createElement("button",{className:"svg-icon-group-btn",type:"button"},Bo.a.createElement(vi.a,{name:"equalizer",size:"auto"}))),Ad=function(e){function t(n){Gr(this,t);var a=zr(this,e.call(this,n));return a._onCycleRepeat=a._onCycleRepeat.bind(a),a._onToggleShuffle=a._onToggleShuffle.bind(a),a._onToggleQueuelist=a._onToggleQueuelist.bind(a),a._onToggleMute=a._onToggleMute.bind(a),a}return qr(t,e),t.prototype.render=function(){return Bo.a.createElement("div",{className:"player-options"},Bo.a.createElement("ul",{className:"option-list"},Bo.a.createElement("li",{className:"option-item"},Bo.a.createElement("ul",{className:"svg-icon-group"},Bo.a.createElement("li",{className:"svg-icon-group-item"},this._renderRepeat()),Bo.a.createElement("li",{className:"svg-icon-group-item"},this._renderShuffle()),Bo.a.createElement("li",{className:"svg-icon-group-item"},this._renderVolume()),Bo.a.createElement("li",{className:"svg-icon-group-item"},this._renderSettings()))),this._renderQueuelist()))},t.prototype._renderRepeat=function(){var e=this.props,t=e.repeat,n=e.playerUI,a=ui()({"is-active":t>0&&n.repeat}),r="";if(n.repeat)switch(r=Object(di.a)("Répéter"),t){case Yo.a.repeatLevel.REPEAT_OFF:r=Object(di.a)("Réécouter tous les titres");break;case Yo.a.repeatLevel.REPEAT_ALL:r=Object(di.a)("Réécouter ce titre");break;case Yo.a.repeatLevel.REPEAT_SINGLE:r=Object(di.a)("Désactiver la fonction Répéter")}return Bo.a.createElement("button",{className:"svg-icon-group-btn",type:"button",disabled:!n.repeat,"aria-label":r,onClick:this._onCycleRepeat},Bo.a.createElement(vi.a,{className:a,name:t===Yo.a.repeatLevel.REPEAT_SINGLE?"repeat-one":"repeat",size:"auto"}))},t.prototype._renderShuffle=function(){var e=this.props,t=e.shuffle,n=e.playerUI,a=ui()({"is-active":t&&n.shuffle}),r="";return n.shuffle&&(r=t?Object(di.a)("Désactiver le mode aléatoire"):Object(di.a)("Activer le mode aléatoire")),Bo.a.createElement("button",{className:"svg-icon-group-btn",type:"button",disabled:n.chromecastActive||!n.shuffle,"aria-label":r,onClick:this._onToggleShuffle},Bo.a.createElement(vi.a,{className:a,name:"shuffle",size:"auto"}))},t.prototype._renderVolume=function(){var e=this.props,t=e.mute,n=e.playerUI,a=t?"volume-off":"volume";return Bo.a.createElement(vd,{trigger:"hover",isDisabled:!n.volume},Bo.a.createElement("button",{className:"svg-icon-group-btn",type:"button",disabled:!n.volume,onClick:this._onToggleMute},Bo.a.createElement(vi.a,{name:a,size:"auto"})))},t.prototype._renderSettings=function(){return kd},t.prototype._renderQueuelist=function(){var e=this.props,t=e.playerUI,n=e.uiType,a=e.track,r=e.isPlayerFull;if(!t.queuelist)return null;var o=ui()("queuelist",{"is-active":r});return Bo.a.createElement("li",{className:"option-item"},Bo.a.createElement("button",{className:o,type:"button",onClick:this._onToggleQueuelist},Bo.a.createElement(lc.a,{type:n===Wu.a.PODCAST?Vo.a.Episode:Vo.a.Album,height:28,width:28,data:a,coverLink:!1}),Bo.a.createElement("div",{className:"queuelist-label"},Object(di.a)("File d'attente"))))},t.prototype._onCycleRepeat=function(){Yo.a.control.setRepeat(this.props.repeat===Yo.a.repeatLevel.REPEAT_SINGLE?Yo.a.repeatLevel.REPEAT_OFF:this.props.repeat+1)},t.prototype._onToggleShuffle=function(){Yo.a.control.setShuffle(!this.props.shuffle)},t.prototype._onToggleQueuelist=function(){this.props.setPlayerFull({isPlayerFull:!this.props.isPlayerFull})},t.prototype._onToggleMute=function(){Yo.a.control.mute(!this.props.mute)},t}(Uo.Component),xd=Object(Ho.b)(function(e){return{volume:e.player.control.volume,shuffle:e.player.control.shuffle,repeat:e.player.control.repeat,mute:e.player.control.mute,track:e.player.music.track,isPlayerFull:e.player.config.isPlayerFull,playerUI:Object(Ji.getInterfaceConfiguration)(e),uiType:Object(Ji.getInterfaceType)(e)}},{setPlayerFull:Ji.setPlayerFull})(Ad),Dd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Rd=function(e){function t(n){Wr(this,t);var a=Vr(this,e.call(this,n));return a._containerRef=null,a._containerWidth=0,a._wrapperRef=null,a._childrenRef=null,a._gradientRef=null,a._scrollOffset=0,a._scrollWidth=0,a._frameId=null,a._isLastLoop=!1,a._onResize=ql()(a._measureText.bind(a),100),a.state={isTruncated:!1},a}return Kr(t,e),t.prototype.componentDidMount=function(){this._measureText(),window.addEventListener("resize",this._onResize,!1)},t.prototype.componentWillReceiveProps=function(){var e=this;this.setState({isTruncated:!1},function(){e._measureText()})},t.prototype.componentWillUnmount=function(){this._clear(),window.removeEventListener("resize",this._onResize)},t.prototype.render=function(){var e=this,t=this.props.direction,n={};return this.state.isTruncated&&(n.onMouseEnter=function(){return e._start()},n.onMouseLeave=function(){return e._stop()},n.style=this._getWrapperStyle(0)),Bo.a.createElement("div",{className:"marquee",dir:t,ref:function(t){return e._containerRef=t}},Bo.a.createElement("div",Dd({className:"marquee-wrapper",ref:function(t){return e._wrapperRef=t}},n),this._renderContent(),this._renderContent(!1)),this._renderGradient("left"),this._renderGradient("right"))},t.prototype._renderContent=function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this.props,a=n.children,r=n.direction,o=this.state.isTruncated;if(!t&&!o)return null;if(t)return Bo.a.createElement("div",{className:"marquee-content",ref:function(t){return e._childrenRef=t}},a);var i={paddingLeft:"ltr"===r?"24px":null,paddingRight:"rtl"===r?"24px":null};return Bo.a.createElement("div",{className:"marquee-content",style:i},a)},t.prototype._renderGradient=function(e){if(!this.state.isTruncated)return null;var t=ui()("marquee-gradient",{"marquee-gradient-left":"left"===e,"marquee-gradient-right":"right"===e});return Bo.a.createElement("span",{className:t,ref:this._getGradientRef(e)})},t.prototype._measureText=function(){var e=this;this._childrenRef&&this._containerRef&&this.setState({isTruncated:this._childrenRef.offsetWidth>this._containerRef.offsetWidth},function(){e._clear()})},t.prototype._start=function(){var e=this.props.onScrollStart;this._isLastLoop&&(this._isLastLoop=!1),this._isScrolling()||(this._scrollWidth=this._childrenRef.offsetWidth,this._containerWidth=this._containerRef.offsetWidth,"function"==typeof e&&e(),this._frameId=window.requestAnimationFrame(this._move.bind(this)))},t.prototype._stop=function(){this._isScrolling()&&(this._isLastLoop=!0)},t.prototype._move=function(){if(this._frameId=window.requestAnimationFrame(this._move.bind(this)),this._scrollOffset=Math.ceil(this._scrollOffset+.8),this._scrollOffset>this._scrollWidth+24&&(this._scrollOffset=0),this._moveTo(this._scrollOffset),0===this._scrollOffset&&this._isLastLoop){var e=this.props.onScrollEnd;"function"==typeof e&&e(),this._clear()}},t.prototype._moveTo=function(e){this._wrapperRef&&this._gradientRef&&(this._setStyle(this._wrapperRef,this._getWrapperStyle(this._getTranslateOffset(e))),this._setStyle(this._gradientRef,{opacity:this._isScrolling()&&(!this._isLastLoop||e>0&&e<this._scrollWidth)?null:0}))},t.prototype._clear=function(){this._isScrolling()&&window.cancelAnimationFrame(this._frameId),this._moveTo(0),this._frameId=null,this._isLastLoop=!1,this._scrollOffset=0},t.prototype._setStyle=function(e,t){e.style&&Object.assign(e.style,t)},t.prototype._getWrapperStyle=function(e){return{transform:"translate3d("+e+"px, 0px, 0px)",willChange:"transform"}},t.prototype._getGradientRef=function(e){var t=this,n=this.props.direction;return"ltr"===n&&"left"===e||"rtl"===n&&"right"===e?function(e){return t._gradientRef=e}:null},t.prototype._getTranslateOffset=function(e){var t=this.props.direction;return 0!==e&&"ltr"===t?e-2*e:e},t.prototype._isScrolling=function(){return null!==this._frameId},t}(Uo.Component);Rd.defaultProps={direction:"ltr",onScrollStart:function(){},onScrollEnd:function(){}};var Id=Rd,Ld=function(e){function t(n){Xr(this,t);var a=$r(this,e.call(this,n));return a._onSeek=a._onSeek.bind(a),a}return Jr(t,e),t.prototype.shouldComponentUpdate=function(e){return e.position!==this.props.position},t.prototype.render=function(){var e=this.props,t=e.playerUI,n=e.duration,a=e.position,r=e.seekAllowed;return t.seek?Bo.a.createElement(gd,{max:n,value:a,counter:ys.E,onChange:this._onSeek,disabled:!r,tooltip:!0,autoHide:!0}):null},t.prototype._onSeek=function(e){var t=this.props.duration;e>=t?Yo.a.control.nextSong():Yo.a.isPlaying()||Yo.a.isPaused()?Yo.a.control.seek(e/t):(Yo.a.getTrackList()[0].OFFSET=e/t*t,Yo.a.control.play())},t}(Uo.Component),Md=Object(Ho.b)(function(e){return{buffer:e.player.control.buffer,position:Math.floor(e.player.control.position),duration:e.player.music.trackDuration,playerUI:Object(Ji.getInterfaceConfiguration)(e),seekAllowed:Object(Zi.c)(e)}})(Ld),Fd=Bo.a.createElement("div",{className:"track-seekbar"},Bo.a.createElement(Md,null)),Ud=Bo.a.createElement("button",{className:"svg-icon-group-btn",type:"button"},Bo.a.createElement(vi.a,{name:"add",size:"auto"})),Bd=function(e){function t(n){eo(this,t);var a=to(this,e.call(this,n));return a._onDislikeClick=a._onDislikeClick.bind(a),a}return no(t,e),t.prototype.render=function(){var e=this.props.playerUI;return Bo.a.createElement("div",{className:"player-track"},Bo.a.createElement("div",{className:"track-container"},Bo.a.createElement("div",{className:"track-heading"},this._renderLabel(),Bo.a.createElement("div",{className:"track-title"},Bo.a.createElement(Id,{direction:Wo.a.get("DIRECTION")},this._renderTitle(),e.subTitle?" • ":null,this._renderSubTitle())),Bo.a.createElement("div",{className:"track-actions"},Bo.a.createElement("ul",{className:"svg-icon-group"},Bo.a.createElement("li",{className:"svg-icon-group-item"},this._renderDislike()),Bo.a.createElement("li",{className:"svg-icon-group-item"},this._renderLike()),Bo.a.createElement("li",{className:"svg-icon-group-item"},this._renderContextMenu())))),Fd))},t.prototype._renderLabel=function(){var e=this.props,t=e.playerUI,n=e.uiType,a=e.isFlow,r=e.isUpnext;if(!t.label)return null;var o=Object(di.a)("MIX");return n===Wu.a.AD?o=Object(di.a)("PUBLICITÉ"):n===Wu.a.LIVESTREAM?o=Object(di.a)("EN DIRECT"):r?o=Object(di.a)("RECOMMANDÉ"):a&&(o=Object(di.a)("FLOW")),Bo.a.createElement("span",{className:"track-label"},o)},t.prototype._renderTitle=function(){var e=this.props,t=e.trackTitle;return e.playerUI.title?null===Vu(this.props)?t:Bo.a.createElement(ns.a,{className:"track-link",to:Vu(this.props)},t):null},t.prototype._renderSubTitle=function(){var e=this,t=this.props,n=t.trackArtists;return t.playerUI.subTitle?n.map(function(t,n){return[n>0?", ":"",Bo.a.createElement(ns.a,{className:"track-link",key:t.ART_ID,to:Ku(e.props,t)},t.ART_NAME)]}):null},t.prototype._renderLike=function(){var e=this.props,t=e.playerUI,n=e.id;return t.like?Bo.a.createElement(cs.a,{className:"svg-icon-group-btn",type:"song",context:"player",tooltip:!0,id:String(n)}):null},t.prototype._renderDislike=function(){var e=this.props,t=e.playerUI,n=e.id;return t.dislike?Bo.a.createElement(ls.a,{className:"svg-icon-group-btn",tooltip:!0,id:n,onClickCallback:this._onDislikeClick}):null},t.prototype._renderContextMenu=function(){var e=this.props,t=e.track,n=e.id,a=e.context,r=e.playerUI,o=e.isFavorite,i=e.isRadio;if(!r.contextMenu)return null;var s={position:"right",type:"track",forceShowPlaylists:!0,anchor:Ud,data:{SONG:t,PLAYLIST_ID:a.ID},id:Number(n),context:"player",isFavorite:o,isRadio:i};return Bo.a.createElement(ps.a,s)},t.prototype._onDislikeClick=function(){this.context.onNext()},t}(Uo.Component);Bd.contextTypes={onNext:Jo.a.func};var Hd=Object(Ho.b)(function(e){return{id:e.player.music.id,track:e.player.music.track,context:e.player.music.context,isFlow:e.player.config.isFlow,isUpnext:e.player.config.isUpnext,isFavorite:e.player.music.isFavorite,isRadio:e.player.config.isRadio,trackTitle:Object(es.l)(e),trackArtists:Object(es.j)(e),playerUI:Object(Ji.getInterfaceConfiguration)(e),uiType:Object(Ji.getInterfaceType)(e)}})(Bd),Gd=Bo.a.createElement("div",{className:"player-bottom"},Bo.a.createElement(md,null),Bo.a.createElement(Hd,null),Bo.a.createElement(xd,null)),zd=function(e){function t(n){ro(this,t);var a=oo(this,e.call(this,n));return a.state={fading:!1},a._onFading=a._onFading.bind(a),a._onFinish=a._onFinish.bind(a),a._onTrackChange=a._onTrackChange.bind(a),a._onTrackRecognized=a._onTrackRecognized.bind(a),a._onChangePlayerType=a._onChangePlayerType.bind(a),a._onTracklistChange=a._onTracklistChange.bind(a),a._onToggleFavorite=a._onToggleFavorite.bind(a),a._onPlayingChange=a._onPlayingChange.bind(a),a._onPauseChange=a._onPauseChange.bind(a),a._onTracklistFinish=a._onTracklistFinish.bind(a),a._onPositionChange=a._onPositionChange.bind(a),a._onLoaded=a._onLoaded.bind(a),a._onTrackDurationChange=a._onTrackDurationChange.bind(a),a._onVolumeChange=a._onVolumeChange.bind(a),a._onToggleMute=a._onToggleMute.bind(a),a._onRepeatChange=a._onRepeatChange.bind(a),a._onSimultaneousAccess=a._onSimultaneousAccess.bind(a),a._onShuffleChange=a._onShuffleChange.bind(a),a._setAvailableStatus=a._setAvailableStatus.bind(a),a._setConnectingStatus=a._setConnectingStatus.bind(a),a._setCastingStatus=a._setCastingStatus.bind(a),a._setChromecastActiveState=a._setChromecastActiveState.bind(a),a}return io(t,e),t.prototype.getChildContext=function(){return{onNext:this._next.bind(this)}},t.prototype.componentDidMount=function(){var e=this;this.props.initPlayer(),ni.a.ready(ni.a.user.userReady,this._onToggleFavorite),ni.a.subscribe(ni.a.player.displayCurrentSong,this._onTrackChange,"player"),ni.a.subscribe(ni.a.player.displayRecognizedTrack,this._onTrackRecognized,"player"),ni.a.subscribe(ni.a.player.changePlayerType,this._onChangePlayerType,"player"),ni.a.subscribe(ni.a.player.tracklist_changed,this._onTracklistChange,"player"),ni.a.subscribe(ni.a.user.addFavorite,this._onToggleFavorite,"player"),ni.a.subscribe(ni.a.user.deleteFavorite,this._onToggleFavorite,"player"),ni.a.subscribe(ni.a.player.playing,this._onPlayingChange,"player"),ni.a.subscribe(ni.a.player.paused,this._onPauseChange,"player"),ni.a.subscribe(ni.a.player.finishTrackList,this._onTracklistFinish,"player"),ni.a.subscribe(ni.a.player.position,this._onPositionChange,"player"),ni.a.subscribe(ni.a.player.pourcentLoaded,this._onLoaded,"player"),ni.a.subscribe(ni.a.player.duration,this._onTrackDurationChange,"player"),ni.a.subscribe(ni.a.player.volume_changed,this._onVolumeChange,"player"),ni.a.subscribe(ni.a.player.mute_changed,this._onToggleMute,"player"),ni.a.subscribe(ni.a.player.repeat_changed,this._onRepeatChange,"player"),ni.a.subscribe(ni.a.player.shuffle_changed,this._onShuffleChange,"player"),ni.a.subscribeOnce(ni.a.player.playerLoaded,function(){Yo.a.initRestriction(),Yo.a.restoreSetting(e.props.userSetting)}),ni.a.subscribe(ni.a.player.fading,this._onFading,"player"),ni.a.subscribe(ni.a.player.finish,this._onFinish,"player"),ni.a.subscribe(ni.a.live.simultaneousAccess,this._onSimultaneousAccess,"player"),ni.a.subscribe(ni.a.chromecast.available,this._setAvailableStatus,"player"),ni.a.subscribe(ni.a.chromecast.connecting,this._setConnectingStatus,"player"),ni.a.subscribe(ni.a.chromecast.casting,this._setCastingStatus,"player"),ni.a.subscribe(ni.a.chromecast.loading,this._setChromecastActiveState,"player"),ni.a.subscribe(ni.a.user.settingChanged,function(e,t){t.data&&t.data.site&&t.data.site.labs&&void 0!==t.data.site.labs.FirefoxHTML5&&$i.a.reload()})},t.prototype.componentWillUpdate=function(e){this.props.id!==e.id&&ni.a.trigger(ni.a.menu.contextMenuClose)},t.prototype.componentWillUnmount=function(){ni.a.unsubscribeAll("player")},t.prototype.render=function(){var e=this.props,t=e.track,n=e.playerType;return 0===ei()(t)&&"ads"!==n?null:Bo.a.createElement("div",{className:"page-player",id:"page_player"},this._renderPlayerBottom(),this._renderPlayerFull())},t.prototype._renderPlayerBottom=function(){return Gd},t.prototype._renderPlayerFull=function(){var e={mountOnEnter:!0,unmountOnExit:!0,timeout:500,in:this.props.isPlayerFull,onEntered:function(){document.body.classList.add("has-scrollbar-disabled")},onExiting:function(){document.body.classList.remove("has-scrollbar-disabled")}};return Bo.a.createElement(Yu.Transition,e,function(e){return Bo.a.createElement(id,{status:e})})},t.prototype._onFading=function(){this.props.hasAudioAds&&null!==Yo.a.getAudioAds()||(this.setState({fading:!0}),Yo.a.control.nextSong(!0))},t.prototype._onFinish=function(){this.state.fading||Yo.a.control.nextSong(!0),this.setState({fading:!1})},t.prototype._onTrackChange=function(){this.props.updateTrack()},t.prototype._onTrackRecognized=function(e,t){t?this.props.updateRecognizedTrack({track:t}):this._onTrackChange()},t.prototype._onChangePlayerType=function(){this.props.updatePlayerType()},t.prototype._onTracklistChange=function(){this.props.updateTracklist(),ni.a.trigger(ni.a.list.deselectAll)},t.prototype._onToggleFavorite=function(e,t){(!t||"song"===t.type&&String(t.id)===this.props.id)&&this.props.updateFavorite()},t.prototype._onPlayingChange=function(e,t){this.props.setPlaying({playing:t})},t.prototype._onPauseChange=function(e,t){this.props.setPaused({paused:t})},t.prototype._onTracklistFinish=function(){this.props.setTracklistFinished()},t.prototype._onPositionChange=function(e,t){this.props.setPosition({position:t})},t.prototype._onLoaded=function(e,t){this.props.setBuffer({buffer:t})},t.prototype._onTrackDurationChange=function(e,t){this.props.setTrackDuration({trackDuration:t})},t.prototype._onVolumeChange=function(e,t){this.props.setVolume({volume:t/100})},t.prototype._onToggleMute=function(e,t){this.props.setMute({mute:t})},t.prototype._onRepeatChange=function(e,t){this.props.setRepeat({repeat:t})},t.prototype._onSimultaneousAccess=function(){var e=this.props,t=e.playing,n=e.playerType;t&&"ads"!==n&&(Yo.a.control.pause(),ti.a.open("/lightbox/limitation.php"))},t.prototype._onShuffleChange=function(e,t){this.props.setShuffle({shuffle:t}),ni.a.trigger(ni.a.list.deselectAll)},t.prototype._setChromecastActiveState=function(e,t){this.props.setLoading({loading:t}),this.props.setChromecastActiveState({loading:t,active:Qi.a.isActive(),chunksInfo:Qi.a.getChunksInfo()})},t.prototype._setAvailableStatus=function(e,t){this.props.setChromecastAvailableStatus({status:t,active:Qi.a.isActive(),chunksInfo:Qi.a.getChunksInfo()})},t.prototype._setConnectingStatus=function(e,t){this.props.setChromecastConnectingStatus({status:t,chunksInfo:Qi.a.getChunksInfo()})},t.prototype._setCastingStatus=function(e,t){this.props.setChromecastCastingStatus({status:t,active:Qi.a.isActive(),chunksInfo:Qi.a.getChunksInfo()})},t.prototype._seek=function(e,t){e&&(e.preventDefault(),e.stopPropagation()),this.props.canSeek&&(void 0===t&&(t=e.pageX/e.currentTarget.parentNode.offsetWidth),Yo.a.control.seek(t))},t.prototype._next=function(){Xi.a.intent("next"),this.props.skipRadioAllowed?Yo.a.control.nextSong():Ki.b.display("flow_skip_push",{})},t}(Uo.Component);zd.childContextTypes={onNext:Jo.a.func},zd.defaultProps={playerType:"",isPlayerFull:!1,showUpNextNotification:!1};var qd=Object(Ho.b)(function(e){return{id:e.player.music.id,track:e.player.music.track,playing:e.player.control.playing,playerType:e.player.config.playerType,userSetting:e.user.USER.SETTING,hasAudioAds:e.user.USER.OPTIONS.ads_audio,isPlayerFull:e.player.config.isPlayerFull,skipRadioAllowed:e.player.control.skipRadioAllowed,canSeek:Object(Zi.c)(e)}},{initPlayer:es.n,setPlaying:Zi.l,setPaused:Zi.k,setLoading:Zi.i,setTracklistFinished:Zi.p,setPosition:Zi.m,setBuffer:Zi.h,setTrackDuration:es.o,setVolume:Zi.q,setRepeat:Zi.n,setShuffle:Zi.o,setMute:Zi.j,updateFavorite:es.p,updateTrack:es.r,updateRecognizedTrack:es.q,updatePlayerType:Ji.updatePlayerType,updateTracklist:es.s,setChromecastActiveState:ts.b,setChromecastAvailableStatus:ts.c,setChromecastConnectingStatus:ts.e,setChromecastCastingStatus:ts.d})(zd),Yd=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),Wd=Bo.a.createElement(Mi.a,null),Vd=Bo.a.createElement(function(){return Bo.a.createElement("div",{className:"page-shadow"},Jp,Zp,eu,tu,nu,Bo.a.createElement("input",{id:"checkForm",name:"checkForm",type:"hidden",value:Wo.a.get("checkForm")}),au,ru)},null),Kd=Bo.a.createElement(Ai,null),Qd=Bo.a.createElement(Li,null),Xd=Bo.a.createElement(Bu,null),$d=Bo.a.createElement(qu,null),Jd=Bo.a.createElement(Up,null),Zd=Bo.a.createElement(function(){return Bp},null),ef=Bo.a.createElement(qd,null),tf=function(e){function t(n){lo(this,t);var a=co(this,e.call(this,n));return a._onLiveFeed=a._onLiveFeed.bind(a),a.state={error:!1},a}return po(t,e),t.prototype.getChildContext=function(){var e=t.useAppState?this.props.route.appState:void 0;return t.useAppState=!1,{appState:e,location:this.props.location,reduxStore:this.props.route.store}},t.prototype.componentWillMount=function(){t.currentPage=this.props.children.type,window.reactRouter=this.context.router},t.prototype.componentDidMount=function(){ai.a.addInternalChannel("-1_"+this.props.userID+"_USERFEED_"+this.props.userID),ai.a.init(),ni.a.subscribe(ni.a.live.feed,this._onLiveFeed),ni.a.trigger(ni.a.navigation.page_displayed,{path:this.props.location.pathname}),ni.a.resolve(ni.a.navigation.page_initialized),this._openModal(),this.props.hasOnBoardingModal&&ti.a.open("/lightbox/onboarding",!1,{},!0),oi.a.install()},t.prototype.shouldComponentUpdate=function(e,t){return this.props.location.pathname!==e.location.pathname||this.state.error!==t.error},t.prototype.componentWillUpdate=function(e){document.body.scrollTop=0,ni.a.trigger(ni.a.navigation.page_changed,{path:e.location.pathname})},t.prototype.componentDidUpdate=function(){t.currentPage=this.props.children.type,ni.a.trigger(ni.a.navigation.page_displayed,{path:this.props.location.pathname})},t.prototype.componentWillUnmount=function(){ni.a.unsubscribe(ni.a.live.feed,this._onLiveFeed)},t.prototype.componentDidCatch=function(e,t){this.setState({error:!0}),oi.a.error(e,t)},t.prototype.render=function(){return Bo.a.createElement("div",null,Wd,this._renderTopbar(),this._renderSidebar(),this._renderPanels(),this._renderMain(),this._renderPlayer(),Vd,Bo.a.createElement(Ri,{id:ii.a.HotKeys}),Kd,Qd)},t.prototype._renderTopbar=function(){return this.props.UI.current===this.props.UI.electron?Xd:null},t.prototype._renderSidebar=function(){return this.props.UI.current===this.props.UI.electron?$d:Jd},t.prototype._renderPanels=function(){return this.props.UI.current===this.props.UI.electron?null:Zd},t.prototype._renderMain=function(){return Bo.a.createElement("main",{className:"page-main",id:"page_content",role:"main"},this.props.children)},t.prototype._renderPlayer=function(){return this.props.UI.current===this.props.UI.electron?ef:null},t.prototype._onLiveFeed=function(e,t){if(t.length){var n=t[0];switch(n.ACTION){case"NEW_MESSAGE":ri.a.addMessage(n);break;case"FRIEND_FOLLOW":case"PLAYLIST_COMMENT":case"SHARE":ri.a.addNotification(n);break;default:ri.a.addTicker(n,!0)}}},t.prototype._openModal=function(){2===ei()(this.props.route.modalPath)&&("modal"===this.props.route.modalPath.type?ti.a.open(decodeURIComponent(this.props.route.modalPath.page)):Xo.a.facebox({ajax:decodeURIComponent(this.props.route.modalPath.page)}))},Yd(t,null,[{key:"currentPage",set:function(e){var t=(e=e.WrappedComponent||e).displayName;t||(oi.a.error("Current page main component is missing display name, this can prevent some components (like ads) to know on which page the user is and can affect their behavior."),t=""),"profile"===t&&document.location.pathname.indexOf("/loved")&&(t="loved"),"page"!==t||"/"!==document.location.pathname&&!/^\/[a-z]{2}\/$/.test(document.location.pathname)?"page"===t&&-1!==document.location.pathname.indexOf("/channels")&&(t=-1!==document.location.pathname.indexOf("/explore")?"channels_explore":"channels"):t="home",this._currentPage=t},get:function(){return this._currentPage}}]),t}(Uo.Component);tf.contextTypes={router:Jo.a.object},tf.childContextTypes={appState:Jo.a.object,location:Jo.a.object,reduxStore:Jo.a.object},tf.useAppState=!0,window.getCurrentPage=function(){return tf.currentPage};var nf=Object(Ho.b)(function(e){var t=e.user;return{userID:t.USER.USER_ID,hasOnBoardingModal:t.USER.ONBOARDING_MODAL,UI:Object(si.c)(t)}})(tf),af=void 0,rf=Bo.a.createElement("div",{className:"abp-banner-visual"}),of=Bo.a.createElement("a",{className:"abp-banner-close-icon"},Bo.a.createElement("span",{className:"icon icon-cancel"})),sf=function(e){function t(n){fo(this,t);var a=ho(this,e.call(this,n));return a._sendTracking=a._sendTracking.bind(a),a._isEligible=a._isEligible.bind(a),a._updateTimer=a._updateTimer.bind(a),a._adblockDetected=a._adblockDetected.bind(a),a._removeBanner=a._removeBanner.bind(a),a.state={timer:n.timer,display:!1},a}return mo(t,e),t.prototype.componentDidMount=function(){this._checkAdBlock()},t.prototype.componentWillUnmount=function(){clearInterval(af)},t.prototype.getTrackingParams=function(){return{group:this._getGroup()}},t.prototype.render=function(){return this.state.display?Bo.a.createElement("div",{className:"abp-banner-container"},Bo.a.createElement("div",{className:"abp-banner"},Bo.a.createElement("div",{className:"abp-banner-close"},this._renderCloseButton()),rf,Bo.a.createElement("h2",{className:"heading-2"},this._getTitle()),Bo.a.createElement("h3",{className:"heading-3"},Object(di.a)("La publicité nous permet de vous proposer Deezer gratuitement. C’est grâce à elle que nous pouvons soutenir tous les artistes que vous écoutez.")),Bo.a.createElement("div",{className:"abp-banner-cta"},Bo.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:this._sendTracking,"data-link":"howto","data-group":this._getGroup()},Bo.a.createElement("a",{className:"label",href:this._getHowToUrl(),target:"_blank"},Object(di.a)("Comment désactiver Adblock"))),Bo.a.createElement("a",{className:"abp-banner-link",href:this._getPollUrl(),target:"_blank",onClick:this._sendTracking,"data-link":"poll","data-group":this._getGroup()},Object(di.a)("Pas envie. Pourquoi ?"))))):null},t.prototype._renderCloseButton=function(){return this.state.timer>0?Bo.a.createElement("span",null,Object(di.c)("Vous pourrez fermer dans %s seconde","Vous pourrez fermer dans %s secondes",{sprintf:[this.state.timer],count:this.state.timer})):Bo.a.createElement("span",{"data-link":"close",onClick:this._removeBanner},of)},t.prototype._checkAdBlock=function(){void 0===window.blockAdBlock?this._adblockDetected():window.blockAdBlock.onDetected(this._adblockDetected)},t.prototype._adblockDetected=function(){0!==this.props.userID&&!0===this.props.adsDisplay&&(ai.a.log.send("adblock",{event:"onDisplay",properties:{adsClass:"page"===window.getCurrentPage()?"home":window.getCurrentPage()}}),this._isEligible()&&(af=setInterval(this._updateTimer,1e3),this.tracking("adblock_banner"),this.setState({display:!0})))},t.prototype._updateTimer=function(){var e=this.state.timer-1;e<=0&&clearInterval(af),this.setState({timer:e})},t.prototype._getTitle=function(){switch(this._getGroup()){case"V2":return Object(di.a)("Notre petit doigt nous dit que vous utilisez AdBlock pour Deezer !");case"V3":return Object(di.a)("Bonjour %s, on dirait que vous utilisez AdBlock pour Deezer !",{sprintf:[this.props.userBlogName]});case"V4":return Object(di.a)("Si vous voyez ce robot super mignon, c'est que vous utilisez Adblock.");default:return Object(di.a)("On n'utiliserait pas AdBlock pour Deezer par hasard ?")}},t.prototype._getHowToUrl=function(){var e=Oc.a.browser,t=void 0,n=Wo.a.get("SETTING_LANG");switch("fr"!==n&&"de"!==n&&"es"!==n&&"pt-br"!==n&&"en-gb"!==n&&(n="en-gb"),e){case"Safari":t=207780015;break;case"Firefox":t=207075879;break;default:t=207075869}return"http://support.deezer.com/hc/"+n+"/articles/"+t},t.prototype._getPollUrl=function(){var e=void 0;switch(Wo.a.get("SETTING_LANG")){case"fr":e="nxfmss";break;case"es":e="WhnVvS";break;case"de":e="ZTpnj0";break;case"pt-br":e="F7XnI1";break;default:e="bSi3Wt"}var t=Oc.a.browser;switch(t){case"Safari":t="SF";break;case"Firefox":t="FX";break;default:t="CH"}return"https://deezer.typeform.com/to/"+e+"?un="+this.props.userBlogName+"&uid="+this.props.userID+"&br="+t},t.prototype._sendTracking=function(e){"button"===e.target.type&&Object($i.b)(this._getHowToUrl(),"_blank"),this.tracking("adblock_banner",e.currentTarget)},t.prototype._getGroup=function(){return this.props.adsAdblockBanner.options},t.prototype._removeBanner=function(e){this.tracking("adblock_banner",e.currentTarget),this.setState({display:!1},function(){ni.a.trigger(ni.a.ads.hideAdBlockBanner)})},t.prototype._isEligible=function(){if("undefined"==typeof localStorage)return!1;var e=(new Date).getDate();return Number(localStorage.getItem("adbBanner"))!==e&&(void 0!==Wo.a.get("SPONSORED_TRACK_CONFIG")&&(localStorage.setItem("adbBanner",e),!0))},t}(Uo.Component);sf.defaultProps={userBlogName:"",adsAdblockBanner:{option:"default"}};var lf=Object(Ho.b)(function(e){var t=e.user;return{userID:t.id,userBlogName:t.USER.BLOG_NAME,adsDisplay:t.USER.OPTIONS.ads_display,adsAdblockBanner:t.USER.ABTEST.ad_adblock_banner}})(Object(Ds.a)(sf)),cf=function(e){function t(){var n,a,r;bo(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=a=go(this,e.call.apply(e,[this].concat(i))),a._onPageChange=function(){a.props.fetchAds(window.getCurrentPage(),"navigation")},r=n,go(a,r)}return _o(t,e),t.prototype.componentDidMount=function(){this.props.fetchAds(window.getCurrentPage(),"initial"),ni.a.subscribe(ni.a.navigation.page_displayed,this._onPageChange)},t.prototype.componentWillUnmount=function(){ni.a.unsubscribe(ni.a.navigation.page_displayed,this._onPageChange)},t.prototype.render=function(){return null},t}(Uo.Component),pf=36e4,uf=function(e){function t(){var n,a,r;Eo(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=a=Oo(this,e.call.apply(e,[this].concat(i))),a._onPlayerPlaying=function(e,t){a._startTimer()},a._onPlayerPaused=function(e,t){a._startTimer()},a._onTimeout=function(){a._clearTimer(),a.props.fetchAds(window.getCurrentPage(),"inactivity"),a._startTimer()},a._startTimer=function(){a._isActive||(a._isActive=!0,a._timer=setTimeout(a._onTimeout,pf))},a._clearTimer=function(){a._isActive=!1,clearTimeout(a._timer)},a._resetTimer=function(){a._clearTimer(),a._startTimer()},a._isActive=!1,r=n,Oo(a,r)}return jo(t,e),t.prototype.componentDidMount=function(){Yo.a.playing||this._resetTimer(),ni.a.subscribe(ni.a.ads.refreshDisplay,this._resetTimer),ni.a.subscribe(ni.a.navigation.page_displayed,this._resetTimer),ni.a.subscribe(ni.a.player.playing,this._onPlayerPlaying),ni.a.subscribe(ni.a.player.paused,this._onPlayerPaused),ni.a.subscribe(ni.a.player.finishTrackList,this._resetTimer)},t.prototype.componentWillUnmount=function(){this._clearTimer(),ni.a.unsubscribe(ni.a.ads.refreshDisplay,this._resetTimer),ni.a.unsubscribe(ni.a.navigation.page_displayed,this._resetTimer),ni.a.unsubscribe(ni.a.player.playing,this._onPlayerPlaying),ni.a.unsubscribe(ni.a.player.paused,this._onPlayerPaused),ni.a.unsubscribe(ni.a.player.finishTrackList,this._resetTimer)},t.prototype.render=function(){return null},t}(Uo.Component),df="has-sponsored-track",ff=6e4,hf=54e4,mf=function(e){function t(){var n,a,r;wo(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=a=No(this,e.call.apply(e,[this].concat(i))),a._onPlay=function(){var e=Yo.a.helper.isSponsoredTrack(),t=Yo.a.helper.isSponsoredTrack(Yo.a.getNextSong());document.body.className=e?document.body.className+" "+df:document.body.className.replace(df,"").trim(),t||e||a._isActive||a._startTimer(),e&&a._clearTimer()},a._onAudioRequest=function(){a.props.fetchAds(window.getCurrentPage(),"audio"),window.addEventListener(ni.a.ads.adEnd,a._onEnd),window.addEventListener(ni.a.ads.adError,a._onEnd)},a._onEnd=function(){window.removeEventListener(ni.a.ads.adEnd,a._onEnd),window.removeEventListener(ni.a.ads.adError,a._onEnd),a.props.fetchAds(window.getCurrentPage(),"afterAudio"),a._delay=hf,a._startTimer()},a._onReady=function(){Yo.a.onAudioAdsReady()},a._startTimer=function(){a._isActive=!0,a._timer=setTimeout(a._onReady,a._delay)},a._clearTimer=function(){a._isActive=!1,clearTimeout(a._timer)},a._isActive=!1,a._delay=ff,r=n,No(a,r)}return So(t,e),t.prototype.componentDidMount=function(){this.props.hasAudioAds&&(ni.a.subscribe(ni.a.ads.callAudio,this._onAudioRequest),ni.a.subscribe(ni.a.player.play,this._onPlay),ni.a.subscribe(ni.a.ads.sponsoredTrackLoaded,this._clearTimer))},t.prototype.componentWillUnmount=function(){this._clearTimer(),ni.a.unsubscribe(ni.a.ads.callAudio,this._onAudioRequest),ni.a.unsubscribe(ni.a.player.play,this._onPlay),ni.a.unsubscribe(ni.a.ads.sponsoredTrackLoaded,this._clearTimer),window.removeEventListener(ni.a.ads.adEnd,this._onEnd),window.removeEventListener(ni.a.ads.adError,this._onEnd),!0===Yo.a.hasAudioAds&&ni.a.trigger(ni.a.ads.adEnd)},t.prototype.render=function(){return null},t}(Uo.Component),yf=Object(Ho.b)(function(e){return{hasAudioAds:e.user.USER.OPTIONS.ads_audio}})(mf),bf=function(e){function t(){var n=this;ko(this,t);var a=Ao(this,e.call(this));return a._onBlur=function(){a.hasFocus=!1},a._onFocus=function(){a.hasFocus=!0},a._onError=function(){window.sas.clean(),a.setState({isReady:!1})},a._onBlockFormat=function(e,t){a._blockedFormats[Number(t)]=!0},a._updateView=function(e,t,n,r,o,i){if(a._sasCallRef===e){var s=Number(i.formatId);if(a._pendingFormatIds=a._pendingFormatIds.filter(function(e){return e!==s}),a._displayedFormatIds=a._displayedFormatIds.filter(function(e){return e!==s||t}),a._blockedFormats.hasOwnProperty(s)&&(a._displayedFormatIds=a._displayedFormatIds.filter(function(e){return e!==s}),delete a._blockedFormats[s]),0===a._pendingFormatIds.length){if(o){var l=document.body.className.replace(/has-ads[^ ]*/g,"").trim();a._displayedFormatIds.forEach(function(e){l=ui()(l,{"has-ads-top":e===Wo.a.get("smartAds.formatId.northBanner"),"has-ads-bottom":e===Wo.a.get("smartAds.formatId.southBanner")||e===Wo.a.get("smartAds.formatId.audio"),"has-ads-full":e===Wo.a.get("smartAds.formatId.hpto")})}),1===a._displayedFormatIds.length&&a._displayedFormatIds[0]===Wo.a.get("smartAds.formatId.audio")&&(l=ui()(l,{"has-ads-audio":!0})),document.body.className=l}var c=Wo.a.get("smartAds.formatId"),p=c.audio,u=c.interstitial;-1!==a._requestedFormatIds.indexOf(p)&&-1===a._displayedFormatIds.indexOf(p)&&(Yo.a.noAudioAds(),a.fetchAds(window.getCurrentPage(),"navigation")),-1!==a._displayedFormatIds.indexOf(u)&&Yo.a.onInterstitialAdsReady(),ni.a.trigger(ni.a.ads.refreshDisplay,a._displayedFormatIds);var d=a._displayedFormatIds.filter(function(e){return e===Wo.a.get("smartAds.formatId.hpto")}).length>0;ni.a.trigger(ni.a.layout.adsBackground,{display:d})}}},a.fetchAds=a.fetchAds.bind(a),a.nbStyleSheetsInitial=document.styleSheets.length,a.state={isReady:!1},Po(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a._checkFirefoxPrivacyMode();case 2:if(e.sent){e.next=4;break}a._initAds();case 4:case"end":return e.stop()}},e,n)}))(),a}return xo(t,e),t.prototype.componentWillUnmount=function(){this._script&&(this._script.parentNode.removeChild(this._script),delete this._script,ni.a.unsubscribe(ni.a.ads.blockFormat,this._onBlockFormat),window.removeEventListener(ni.a.ads.blur,this._onBlur),window.removeEventListener(ni.a.ads.focus,this._onFocus))},t.Native=function(){return Bo.a.createElement("div",{id:"sas_"+Wo.a.get("smartAds.formatId.native")})},t.Audio=function(){return Bo.a.createElement("div",{id:"sas_"+Wo.a.get("smartAds.formatId.audio")})},t.Interstitial=function(){return Bo.a.createElement("div",{id:"sas_"+Wo.a.get("smartAds.formatId.interstitial")})},t.Top=function(){return Bo.a.createElement("div",{className:"ads ads-top"},Bo.a.createElement("div",{id:"sas_"+Wo.a.get("smartAds.formatId.northBanner")}))},t.Bottom=function(){return Bo.a.createElement("div",{className:"ads ads-bottom"},Bo.a.createElement("div",{id:"sas_"+Wo.a.get("smartAds.formatId.southBanner")}))},t.Wallpaper=function(){return Bo.a.createElement("div",{className:"page-ads",id:"sas_"+Wo.a.get("smartAds.formatId.hpto")})},t.prototype.fetchAds=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==window.sas&&void 0!==window.sas.call){var a=Wo.a.get("smartAds.formatId").interstitial,r=Wo.a.get("smartAds.pageId"),o=this._getFormats(e,t),i=-1!==o.indexOf(a);n&&(window.sas.clean(),this.cleanUnecessaryStyleSheets()),o.length&&(window.sas_manager=null,this._sasCallRef=Math.ceil(1e9*Math.random()),this._requestedFormatIds=[].concat(o),this._pendingFormatIds=[].concat(o),this._displayedFormatIds=[].concat(o),window.sas.call("onecall",{siteId:Wo.a.get("smartAds.siteId"),pageId:r[e],formatId:o.join(","),target:this._getTargetKeywords(i)},{resetTimestamp:!0,onNoad:this._updateView.bind(this,this._sasCallRef,!1,e,t,n),onLoad:this._updateView.bind(this,this._sasCallRef,!0,e,t,n),onError:this._onError}),o.forEach(window.sas.render))}},t.prototype.cleanUnecessaryStyleSheets=function(){var e=/sas_[0-9]{0,}/,t=document.styleSheets.length;if(t!==this.nbStyleSheetsInitial&&t>0){var n=t-1,a=document.styleSheets[n];if(null!==e.test(a.innerHTML)){var r=a.ownerNode;r.parentNode.removeChild(r)}}},t.prototype.render=function(){return this.state.isReady?Bo.a.createElement("div",null,Bo.a.createElement(cf,{fetchAds:this.fetchAds}),Bo.a.createElement(uf,{fetchAds:this.fetchAds}),Bo.a.createElement(yf,{fetchAds:this.fetchAds})):null},t.prototype._initAds=function(){var e=this;this.hasFocus=!0,this._blockedFormats={},this._script=document.createElement("script"),this._script.async=!0;var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(this._script,t),this._script.src="//ak-ns.sascdn.com/diff/js/smart.js",window.sas=window.sas||{},window.sas.cmd=window.sas.cmd?window.sas.cmd:[],window.sas.cmd.push(function(){window.sas.setup({domain:"//ww400.smartadserver.com",async:!0,renderMode:1})}),window.sas.cmd.push(function(){e._script&&e.setState({isReady:!0})}),void 0!==window.blockAdBlock&&window.blockAdBlock.onDetected(function(){e._script&&e.setState({isReady:!0})}),ni.a.subscribe(ni.a.ads.blockFormat,this._onBlockFormat),window.addEventListener(ni.a.ads.blur,this._onBlur),window.addEventListener(ni.a.ads.focus,this._onFocus)},t.prototype._checkFirefoxPrivacyMode=function(){return new Promise(function(e){if("Firefox"===Oc.a.browser){var t=window.indexedDB.open("testIndexedDB");t.addEventListener("success",function(){window.indexedDB.deleteDatabase("testIndexedDB"),e(!1)}),t.addEventListener("error",function(t){t.preventDefault(),e(!0)})}else e(!1)})},t.prototype._getFormats=function(e,t){var n=Wo.a.get("smartAds.pageId"),a=Wo.a.get("smartAds.formatId"),r=a.northBanner,o=a.southBanner,i=a.hpto,s=a.interstitial,l=a.native,c=a.audio,p=[];if(void 0===n[e])return oi.a.error("Ads",new Error('Unknown advertising for page name "'+e+'"')),p;switch(t){case"audio":return p.push(o,c),p;case"comeback":return p.push(s),p}switch(e){case"home":p.push(r,o,i,l),"initial"===t&&p.push(s);break;case"page":case"legacy":case"app":case"appstudio":case"offline":case"account":case"episodes":case"episode":break;default:p.push(r,o,i)}return p},t.prototype._getTargetKeywords=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Yo.a.getMediaType(),n=this.props.adsArgs,a=Wo.a.get("smartAds.target");if(a+=";element_type="+(n.hasOwnProperty("element_type")?n.element_type:""),a+=";element_id="+(n.hasOwnProperty("element_id")?n.element_id:""),a+=";element_data="+(n.hasOwnProperty("element_data")?n.element_data:""),"channels"===window.getCurrentPage()){var r=document.location.pathname.replace("/channels/","");a+=";channel_id="+this._normalizeParam(r)}a+=";username="+encodeURIComponent(Object(ys.v)(this.props.userBlogName)),a+=";firstname="+encodeURIComponent(Object(ys.v)(this.props.userFirstName)),a+=";lastname="+encodeURIComponent(Object(ys.v)(this.props.userLastName)),a+=";partners="+encodeURIComponent(this.props.userPartners),a+=";favorite_tag="+this.props.userFavoriteTag,a+=";lang="+this.props.userLang;var o="UNKNOWN";switch(Wo.a.get("env")){case"preproduction":o="PREPROD";break;case"development":o="DEV";break;case"production":default:o="PROD"}return a+=";env="+o,a+=";focus="+this.hasFocus,a+=";billboard="+e,a+=";site="+Wo.a.get("smartAds.smartSite"),a+=";mt="+this.props.userAdsOffer,a+=";user_age="+(0===this.props.userAge?"unknown":this.props.userAge),a+=";user_sexe="+this.props.userGender,t===Yo.a.MEDIA_TYPE_SONG?(a+=";player_art_name="+this._normalizeParam(Yo.a.getCurrentSong("ART_NAME")),a+=";player_alb_title="+this._normalizeParam(Yo.a.getCurrentSong("ALB_TITLE")),a+=";player_sng_title="+this._normalizeParam(Yo.a.getCurrentSong("SNG_TITLE"))):t===Yo.a.MEDIA_TYPE_TALK&&(a+=";talk_show_name="+this._normalizeParam(Yo.a.getCurrentSong("SHOW_NAME"))),a+="pr="+("boolean"==typeof Wo.a.get("DZPS")&&!0===Wo.a.get("DZPS")?"1":"0"),a+=";user_id="+this.props.userID,a+=";offer_id="+this.props.userOfferID,a+=";user_fc="+(this.props.userFacebookUID?"1":"0"),a+=";player_play="+(Yo.a.playing?"1":"0"),a+=";newsletter="+(this._checkNewsletterStatus()?"1":"0"),a+=";notif_mail="+(this._checkNotificationStatus(this.props.userNotificationMail)?"1":"0"),a+=";notif_mobile="+(this._checkNotificationStatus(this.props.userNotificationMobile)?"1":"0"),t===Yo.a.MEDIA_TYPE_SONG?(a+=";player_provider_id="+Yo.a.getCurrentSong("PROVIDER_ID"),a+=";player_art_id="+Yo.a.getCurrentSong("ART_ID"),a+=";player_alb_id="+Yo.a.getCurrentSong("ALB_ID"),a+=";player_sng_id="+Yo.a.getCurrentSong("SNG_ID"),a+=";player_rank_sng="+Yo.a.getCurrentSong("RANK_SNG"),a+=";player_duration="+Yo.a.getCurrentSong("DURATION"),a+=";player_plist_id="+Yo.a.getContext("ID")):t===Yo.a.MEDIA_TYPE_TALK&&(a+=";talk_duration="+Yo.a.getCurrentSong("DURATION")),a},t.prototype._checkNewsletterStatus=function(){for(var e=!1,t=["editor","event","game","panel","special_offer","talk"],n=this.props.userNewsletter,a=t,r=Array.isArray(a),o=0,a=r?a:a[Symbol.iterator]();;){var i;if(r){if(o>=a.length)break;i=a[o++]}else{if((o=a.next()).done)break;i=o.value}var s=i;if(n.hasOwnProperty(s)&&n[s]){e=!0;break}}return e},t.prototype._checkNotificationStatus=function(e){for(var t=!1,n=["artist_new_release","artist_status","friend_follow","new_message","playlist_comment","playlist_follow","share"],a=Array.isArray(n),r=0,n=a?n:n[Symbol.iterator]();;){var o;if(a){if(r>=n.length)break;o=n[r++]}else{if((r=n.next()).done)break;o=r.value}var i=o;if(e.hasOwnProperty(i)&&e[i]){t=!0;break}}return t},t.prototype._normalizeParam=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase().replace(/[^\w]/g,"")},t}(Uo.Component);bf.defaultProps={adsArgs:{},userBlogName:"",userFirstName:"",userLastName:"",userAdsOffer:"0",userFacebookUID:"",userAge:void 0,userGender:void 0};var gf=Object(Ho.b)(function(e){var t=e.user;return{userBlogName:t.USER.BLOG_NAME,userFirstName:t.USER.FIRSTNAME,userLastName:t.USER.LASTNAME,userPartners:t.USER.PARTNERS,userFavoriteTag:t.USER.FAVORITE_TAG,userNewsletter:t.USER.SETTING.newsletter,userAdsOffer:t.USER.ADS_OFFER,userAge:t.USER.USER_AGE,userGender:t.USER.USER_GENDER,userID:t.USER.USER_ID,userFacebookUID:t.USER.FACEBOOK.UID,userOfferID:t.OFFER_ID,userNotificationMail:t.USER.SETTING.notification_mail,userNotificationMobile:t.USER.SETTING.notification_mobile,userLang:t.SETTING_LANG}})(bf),_f=Bo.a.createElement(gf.Interstitial,null),vf=Bo.a.createElement(gf.Audio,null),Ef=Bo.a.createElement(gf.Native,null),Of=Bo.a.createElement(gf.Bottom,null),jf=Bo.a.createElement(gf.Top,null),Tf=Bo.a.createElement(lf,{timer:15}),wf=Bo.a.createElement(gf.Wallpaper,null),Nf=function(e){function t(){return Ro(this,t),Io(this,e.apply(this,arguments))}return Lo(t,e),t.prototype._renderMain=function(){var e=(this.props.children.type.WrappedComponent||this.props.children.type).displayName,t={element_type:e,element_id:this.props.params.id?this.props.params.id:"",element_data:""};return"search"===e&&(t={element_type:"result",element_id:"ALL",element_data:this.props.params.query||this.props.params.tags||""}),Bo.a.createElement("main",{className:"page-main",id:"page_content",role:"main"},Bo.a.createElement(gf,{adsArgs:t}),_f,vf,Ef,Of,Bo.a.createElement("div",{className:"page-wrapper"},Bo.a.createElement("div",{className:"page-content"},jf,Tf,this.props.children),wf))},t}(tf),Sf=Object(Ho.b)(function(e){var t=e.user;return{userID:t.USER.USER_ID,hasOnBoardingModal:t.USER.ONBOARDING_MODAL,UI:Object(si.c)(t)}})(Nf),Cf=function(e){return function(t){return e(null,t.default)}},Pf=function(e){throw e},kf=Bo.a.createElement(Go.c,{from:"*",to:"/"}),Af=Bo.a.createElement(Go.c,{from:"tops",to:"channels/charts"}),xf=Bo.a.createElement(Go.c,{from:"charts",to:"channels/charts"}),Df=Bo.a.createElement(Go.c,{from:"tour",to:"channels/charts"}),Rf=Bo.a.createElement(Go.c,{from:"moods",to:"channels/moods"}),If=Bo.a.createElement(Go.c,{from:"explore",to:"channels/explore"}),Lf=Bo.a.createElement(Go.c,{from:"mixes",to:"channels/mixes"});t.a=function(e){var t=e.store,n=e.appState,a=e.modalPath,r={history:zo.a,routes:Fo(n,a,t)};return Bo.a.createElement(Ho.a,{store:t},Bo.a.createElement(Go.e,r))}},"./js/_components/Sort.js":function(e,t,n){"use strict";var a=n("./js/_modules/userData.js"),r=n("./js/_modules/redux/store.js"),o={data:function(e,t){e=e.slice(0);var n={ART_NAME:"_sortByArtName",ALB_TITLE:"_sortByAlbTitle",DATE_UPDATE:"_sortByUpdateDate",DATE_CREATE:"_sortByCreateDate",PLAYLIST_TITLE:"_sortByPlaylistTitle",PLAYLIST_TYPE:"_sortByPlaylistType",APP_NAME:"_sortByAppName",TOP_ALBUM:"_sortByTopAlbum",TOP_PLAYLIST:"_sortByTopPlaylist",SHOW_NAME:"_sortByShowName",AUDIOBOOK_TITLE:"_sortByAudiobookTitle",DATE_FAVORITE:"_sortByCreateDate",RELEASE_DATE:"_sortByReleaseDate",ALB_RANK:"_sortByAlbRank",ALB_TYPE:"_sortByAlbType"};return"function"==typeof this[n[t]]?e.sort(this[n[t]]):e},_sortByUpdateDate:function(e,t){var n=e.DATE_ADD||"0000-00-00 00:00:00",a=t.DATE_ADD||"0000-00-00 00:00:00";return n===a?0:n<a?1:-1},_sortByCreateDate:function(e,t){var n=e.DATE_FAVORITE||e.DATE_CREATE||"0000-00-00 00:00:00",a=t.DATE_FAVORITE||t.DATE_CREATE||"0000-00-00 00:00:00";return n===a?0:n<a?1:-1},_sortByReleaseDate:function(e,t){var n=e.PHYSICAL_RELEASE_DATE||"0000-00-00 00:00:00",a=t.PHYSICAL_RELEASE_DATE||"0000-00-00 00:00:00";return n===a?0:n<a?1:-1},_sortByAlbId:function(e,t){return Number(e.ALB_ID)<Number(t.ALB_ID)?1:-1},_sortByCopyrightDate:function(e,t,n){var a=0,r=0,i=/([12][0-9][0-9][0-9])[^0-9]/;return e.COPYRIGHT&&e.COPYRIGHT.match(i)?a=e.COPYRIGHT.match(i)[1]:e.PHYSICAL_RELEASE_DATE&&(a=e.PHYSICAL_RELEASE_DATE.substring(0,4)),t.COPYRIGHT&&t.COPYRIGHT.match(i)?r=t.COPYRIGHT.match(i)[1]:t.PHYSICAL_RELEASE_DATE&&(r=t.PHYSICAL_RELEASE_DATE.substring(0,4)),a===r?n?0:o._sortByAlbId(e,t):a<r?1:-1},_sortByArtName:function(e,t,n){n="boolean"==typeof n&&n;var a=(e.ART_NAME||"").toLowerCase().trim(),r=(t.ART_NAME||"").toLowerCase().trim();return a===r?n?0:o._sortByAlbTitle(e,t,!0):a>r?1:-1},_sortByAlbTitle:function(e,t,n){n="boolean"==typeof n&&n;var a=(e.ALB_TITLE||"").toLowerCase().trim(),r=(t.ALB_TITLE||"").toLowerCase().trim();return a===r?n?0:o._sortByArtName(e,t,!0):a>r?1:-1},_sortByAppName:function(e,t){var n=(e.NAME||"").toLowerCase().trim(),a=(t.NAME||"").toLowerCase().trim();return n===a?0:n>a?1:-1},_sortByPlaylistTitle:function(e,t){var n=(e.TITLE||"").toLowerCase().trim(),a=(t.TITLE||"").toLowerCase().trim();return n===a?0:n>a?1:-1},_sortByPlaylistType:function(e,t){var n=String(r.default.getState().user.id),a=String(e.PARENT_USER_ID)===n?0:parseInt(e.STATUS,10)+1,o=String(t.PARENT_USER_ID)===n?0:parseInt(t.STATUS,10)+1,i=(e.TITLE||"").toLowerCase(),s=(t.TITLE||"").toLowerCase();return a===o?i===s?0:i>s?1:-1:a>o?1:-1},_sortByAlbRank:function(e,t){var n=Number(e.RANK),a=Number(t.RANK);return n===a?o._sortByAlbTitle(e,t):a>n?1:-1},_sortByAlbType:function(e,t){var n=Number(e.ROLE_ID),a=Number(t.ROLE_ID);if(n===a){var r=o._getOrderAlbumType(e.TYPE),i=o._getOrderAlbumType(t.TYPE);if(r===i){var s=Number(e.HIGHLIGHT),l=Number(t.HIGHLIGHT);return s===l?o._sortByCopyrightDate(e,t):l>s?1:-1}return i<r?1:-1}return a<n?1:-1},_sortByTopAlbum:function(e,t){var n=a.a.data.TOP_ALBUMS_HASH||{},r=void 0!==n[e.ALB_ID]?1/(n[e.ALB_ID]+1):0,i=void 0!==n[t.ALB_ID]?1/(n[t.ALB_ID]+1):0;return r===i?o._sortByAlbTitle(e,t):i>r?1:-1},_sortByTopPlaylist:function(e,t){var n=a.a.data.TOP_PLAYLISTS_HASH||{},r=void 0!==n[e.PLAYLIST_ID]?1/(n[e.PLAYLIST_ID]+1):0,i=void 0!==n[t.PLAYLIST_ID]?1/(n[t.PLAYLIST_ID]+1):0;return r===i?o._sortByPlaylistTitle(e,t):i>r?1:-1},_sortByShowName:function(e,t){var n=(e.SHOW_NAME||"").toLowerCase().trim(),a=(t.SHOW_NAME||"").toLowerCase().trim();return n===a?0:n>a?1:-1},_sortByAudiobookTitle:function(e,t){var n=(e.title||"").toLowerCase().trim(),a=(t.title||"").toLowerCase().trim();return n===a?0:n>a?1:-1},_getOrderAlbumType:function(e){return{1:0,0:2,3:1,2:3}[Number(e)]}};t.a=o},"./js/_components/StatesButton/index.js":function(e,t,n){"use strict";function a(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):a(e,t))}var s=n("./node_modules/prop-types/index.js"),l=n.n(s),c=n("./node_modules/react/index.js"),p=n.n(c),u=n("./node_modules/classnames/index.js"),d=n.n(u),f=n("./js/_modules/Events.js"),h=n("./js/_modules/dzPlayer.js"),m=n("./js/_modules/favorite.js"),y=n("./js/_components/DataGrid/utils.js"),b=n("./js/_modules/userData.js"),g=n("./js/_components/StatesButton/utils.js"),_=n("./js/_modules/config/index.js"),v=n("./js/_modules/player/PlayerMetrics.js"),E=n("./js/_modules/Type.js"),O=n("./js/_modules/gatekeeper.js"),j=n("./js/_components/Icon/index.js"),T=p.a.createElement(j.a,{name:"shuffle",size:"16"}),w=p.a.createElement(j.a,{name:"shuffle",size:"16"}),N=function(e){function t(n,a){r(this,t);var i=o(this,e.call(this,n,a));return i._handleClick=i._handleClick.bind(i),i._onFavoriteStatusChange=i._onFavoriteStatusChange.bind(i),i._onPlayStatusChange=i._onPlayStatusChange.bind(i),i._onPlayClick=i._onPlayClick.bind(i),i._onFavoriteClick=i._onFavoriteClick.bind(i),i.state=i._getStateFromStore(n),i}return i(t,e),t.prototype.componentDidMount=function(){var e=this;this._handleEvents("subscribe"),f.a.ready(f.a.user.userReady,function(){e.setState(e._getStateFromStore(e.props))})},t.prototype.componentWillReceiveProps=function(e){this.setState(this._getStateFromStore(e))},t.prototype.shouldComponentUpdate=function(e,t){return this.props.id!==e.id||this.props.disabled!==e.disabled||this.state.status!==t.status||this.state.active!==t.active},t.prototype.componentWillUnmount=function(){this._handleEvents("unsubscribe")},t.prototype.render=function(){var e,t=this.props,n=t.color,a=t.size,r=t.action,o=t.disabled,i=this.state,s=i.active,l=i.status,c=d()("btn btn-action","btn-"+r,(e={"btn-default":"default"===n,"btn-primary":"primary"===n,active:s,paused:!s&&("play"===r||"shuffle"===r)&&"resume"===l},e["btn-"+a]=a,e));return O.a.isAllowed("talk")||this.props.type!==E.a.Show||"favorite"!==r?p.a.createElement("button",{className:c,type:"button",onClick:this._handleClick,disabled:o},this._renderContent()):null},t.prototype._renderContent=function(){var e=this.props.action,t=this.state,n=t.status,a=t.active,r=n;"resume"!==r&&(r=a?"hover":"default");var o=[p.a.createElement("div",{key:"default",className:"action action-default"},"shuffle"===e?T:p.a.createElement(j.a,{name:this._getIcon(n)}),p.a.createElement("span",{key:"label",className:"label"},this._getWording("default"))),p.a.createElement("div",{key:"active",className:"action action-active"},null!==this._getAnimatedIcon()?p.a.createElement("span",{key:"icon",className:this._getAnimatedIcon()}):p.a.createElement(j.a,{name:this._getIcon(n)}),p.a.createElement("span",{key:"label",className:"label","aria-hidden":"true"},this._getWording("active"))),p.a.createElement("div",{key:"hover",className:"action action-hover"},p.a.createElement(j.a,{name:this._getIcon(r)}),p.a.createElement("span",{key:"label",className:"label","aria-hidden":"true"},this._getWording("hover")))];return"play"!==this.props.action&&"shuffle"!==this.props.action||o.push(p.a.createElement("div",{key:"resume",className:"action action-resume"},"shuffle"===e?w:p.a.createElement(j.a,{name:this._getIcon(n)}),p.a.createElement("span",{key:"label",className:"label","aria-hidden":"true"},this._getWording("resume")))),o},t.prototype._onFavoriteStatusChange=function(e,t){var n=this.props,a=n.type,r=n.id;if(void 0!==t&&a===t.type&&Number(r)===Number(t.id)){var o=b.a.isFavorite(a,r);this.setState({status:o?"active":"default",active:o})}},t.prototype._onPlayStatusChange=function(e,t){var n=this.state.active;(n||t)&&(this._hasSameContext()?this.setState({status:n&&!t?"resume":"active",active:t}):this.setState({status:"default",active:!1}))},t.prototype._onPlayClick=function(){if(this._hasSameContext())return v.a.intent("toggle"),void h.a.control.togglePause();var e=this.props,t=e.type,n=e.id,a=e.items,r=e.play_context;v.a.intent("play"),h.a.play({type:t,id:n,data:a,radio:"artist_smartradio"===r||"profile_user_radio"===r,context:{TYPE:r,ID:n}})},t.prototype._onShuffleClick=function(){if(this._hasSameContext())return v.a.intent("toggle"),void h.a.control.togglePause();var e=this.props,t=e.id,n=e.items,a=e.play_context;v.a.intent("play"),h.a.play({type:a,id:t,data:n,radio:!1,context:{TYPE:a,ID:t}})},t.prototype._onFavoriteClick=function(){m.a.action({id:this.props.id,type:this.props.type,context:this.context.name})},t.prototype._handleEvents=function(e){for(var t=this._getData("events_subscription"),n=t.length,a=0;a<n;a++)f.a[e](t[a].event_name,this[t[a].event_callback])},t.prototype._handleClick=function(){this.props.disabled||this[this._getData("onclick")]()},t.prototype._getData=function(e){var t=this.props.action,n={play:{events_subscription:[{event_name:f.a.player.playing,event_callback:"_onPlayStatusChange"}],icon_mapping:{default:"play-circle",active:"play-circle",hover:"pause-circle",resume:"play-circle"},onclick:"_onPlayClick"},shuffle:{events_subscription:[{event_name:f.a.player.playing,event_callback:"_onPlayStatusChange"}],icon_mapping:{default:"shuffle",active:"shuffle",hover:"pause",resume:"shuffle"},onclick:"_onShuffleClick"},favorite:{events_subscription:[{event_name:f.a.user.addFavorite,event_callback:"_onFavoriteStatusChange"},{event_name:f.a.user.deleteFavorite,event_callback:"_onFavoriteStatusChange"}],icon_mapping:{default:"love-outline",active:"love",hover:"cancel",default_user:"follow",active_user:"check",hover_user:"cancel"},onclick:"_onFavoriteClick"}};return n[t]?n[t][e]:null},t.prototype._hasSameContext=function(){var e=h.a.getContext();if(null===e)return!1;var t=_.a.get("LOG_CONTEXT");return t[Object(y.b)(e.TYPE)]===t[this.context.name]&&e.ID===this.context.id},t.prototype._getIcon=function(e){var t=this.props,n=t.action,a="";return"user"===t.type&&"favorite"===n&&(a="_user"),this._getData("icon_mapping")[""+e+a]},t.prototype._getAnimatedIcon=function(){return"play"!==this.props.action&&"shuffle"!==this.props.action||"active"!==this.state.status?null:d()({"equalizer equalizer-12":!0,"equalizer-dark":"default"===this.props.color,"equalizer-inverse":"default"!==this.props.color})},t.prototype._getWording=function(e){return"none"===this.props.wording_type?"":Object(g.a)({action:this.props.action,type:this.props.type,wording:this.props.wording_type},e)},t.prototype._getStateFromStore=function(e){var t=e.action,n=e.type,a=e.id,r="default";return"favorite"===t&&b.a.isFavorite(n,a)&&(r="active"),"play"!==t&&"shuffle"!==this.props.action||!this._hasSameContext()||(r=h.a.isPaused()?"resume":h.a.isPlaying()?"active":"default"),{status:r,active:"active"===r}},t}(c.Component);N.contextTypes={id:l.a.oneOfType([l.a.number,l.a.string]),name:l.a.string},N.defaultProps={id:0,type:"",action:"favorite",color:"default",items:[],wording_type:"standard",play_context:"",size:"",disabled:!1},t.a=N},"./js/_modules/SearchStore.js":function(e,t,n){"use strict";function a(e){var t=l,n={ARTIST:!0,ALBUM:!0,TRACK:!0,PLAYLIST:!0,RADIO:!0,SHOW:!0,TAG:!0,USER:!0,CHANNEL:!0,LIVESTREAM:!0},a=3;i.a.isAllowed("business")&&!i.a.isAllowed("business_mod")&&(n={PLAYLIST:!0,ALBUM:!0},a=30),p=r.a.call({method:"deezer.suggest",data:{QUERY:t.trim(),TYPES:n,NB:a},success:function(n){c[t]=n,t===l&&e(n)}})}var r=n("./js/_modules/api.js"),o=n("./js/_modules/Store.js"),i=n("./js/_modules/gatekeeper.js"),s=null,l="",c={},p=void 0,u=new o.a({getQuery:function(){return l},setQuery:function(e){return l!==e&&(l=e,this.emitChange("input")),this},getResults:function(){return s},search:function(e){var t=this;return this.setQuery(e),""===l||"#"===l?(s=null,void this.emitChange("suggest")):void 0!==c[l]?(s=c[l],void this.emitChange("suggest")):void a(function(e){s=e,t.emitChange("suggest")})},cancel:function(){r.a.cancel(p)}});t.a=u},"./js/_modules/Store.js":function(e,t,n){"use strict";var a=n("./node_modules/uuid-v4/index.js"),r=n.n(a),o=n("./js/_modules/EventDispatcher.js");t.a=function(e){var t=this;this.uniq_id=r()(),this.parent={},this.callbacks={},this.eventDispatcher=new o.a,this.emitChange=function(e){t.eventDispatcher.trigger(e)},this.onChange=function(e){t.eventDispatcher.subscribe(e)},this.offChange=function(e){t.eventDispatcher.unSubscribe(e)};for(var n in e)e.hasOwnProperty(n)&&(this.hasOwnProperty(n)&&(this.parent[n]=this[n]),this[n]=e[n])}},"./js/_modules/displayNotification.js":function(e,t,n){"use strict";var a=n("./js/_modules/i18n.js"),r=n("./js/_modules/userSetting.js"),o=n("./js/_modules/notification.js"),i=n("./js/_modules/redux/store.js"),s={like:!0,dislike:!0},l=void 0;t.a=function(e){if(!s[e])return!1;l||(l={dislike_first:Object(a.a)("Flow ne vous proposera plus ce titre, promis."),dislike:Object(a.a)("Non merci Flow."),like_first:Object(a.a)("Ajouté aux Coups de cœur. Allez-y, continuez à ajouter, Flow apprend à vous connaître."),like:Object(a.a)("Ajouté aux Coups de cœur")});var t=i.default.getState().user.USER.SETTING,n="number"==typeof t.site["nb_flowplayer_"+e+"_notification"]?t.site["nb_flowplayer_"+e+"_notification"]:0;if(n<3){var c=l[e+(0===n?"_first":"")];o.a.display(null,{message:c});var p={};p["nb_flowplayer_"+e+"_notification"]=n+1,r.a.set({site:p})}}},"./js/_modules/flash_detect.js":function(e,t,n){"use strict";var a=n("./js/_modules/Events.js"),r=n("./js/_modules/dzPlayer.js"),o=n("./js/core/util.js"),i=n("./js/_modules/modal.js"),s=n("./js/_modules/BrowserDetect.js"),l=this,c=function e(){if(!(r.a.getNbSongs()<r.a.getNbSongsTotal())){a.a.unsubscribe(a.a.player.play,e),a.a.unsubscribe(a.a.player.seek,e);var t=document.getElementById("audioPlayerSWF"),n=function t(n,r,o){n===o?(a.a.subscribe(a.a.player.play,e),a.a.subscribe(a.a.player.seek,e)):a.a.subscribeOnce(a.a.modal.close,t.bind(l,n))};Object(o.a)(t,function(e){if(!r.a.html5.active&&e){var t=i.a.open("/lightbox/flash_detect?type="+encodeURIComponent(e)+"&browser="+encodeURIComponent(s.a.browser)+"&os="+encodeURIComponent(s.a.OS),!0);a.a.subscribeOnce(a.a.modal.close,n.bind(l,t)),a.a.subscribeOnce(a.a.player.playerLoaded,i.a.close)}})}};a.a.subscribe(a.a.player.play,c),a.a.subscribe(a.a.player.seek,c)},"./js/_modules/lyrics.js":function(e,t,n){"use strict";t.a=function(){var e=r.default.getState().user.USER.ABTEST.lyrics&&r.default.getState().user.USER.ABTEST.lyrics.behaviour;return"noLyrics"===e?Object(a.a)("Passez à Premium+ pour afficher les paroles et les faire défiler"):"snippet"===e?Object(a.a)("Passez à Premium+ pour afficher la suite des paroles"):"static"===e?Object(a.a)("Passez à Premium+ pour faire défiler les paroles"):""};var a=n("./js/_modules/i18n.js"),r=n("./js/_modules/redux/store.js")},"./js/_modules/monitoring/jiraIssueCollector.js":function(e,t,n){"use strict";var a=n("./js/_modules/gatekeeper.js");t.a=function(){a.a.isAllowed("employee_feature")&&(window.ATL_JQ_PAGE_PROPS={triggerFunction:function(e){window.ATL_JQ_SHOW_DIALOG=e}})}},"./js/_modules/monitoring/reportSlowResources.js":function(e,t,n){"use strict";var a=n("./js/_modules/Events.js"),r=n("./js/_modules/live/live.js"),o=n("./js/_modules/gatekeeper.js"),i=/^https?:\/\/[^/]+\.deezer(dev)?\.com\/(?!ajax)/;t.a=function e(){var t=o.a.isAllowed("performance_monitoring"),n="performance"in window&&"getEntriesByType"in window.performance&&"clearResourceTimings"in window.performance&&window.performance.getEntriesByType("resource")instanceof Array;if(t&&n){var s=window.performance.getEntriesByType("resource");s=s.filter(function(e){var t=i.test(e.name),n=e.duration>2e3;return t&&n}),window.performance.clearResourceTimings(),s.length&&(s=s.map(function(e){return{name:e.name,duration:e.duration}}),r.a.log.send("app_perf_resources",{resources:s}))}else a.a.unsubscribe(a.a.navigation.page_displayed,e)}},"./js/_modules/publicPath.js":function(e,t,n){"use strict";var a=n("./js/_modules/config/index.js");n.p="https://"+a.a.get("host_static_ssl")+"/cache/"},"./js/_modules/tips.js":function(e,t,n){"use strict";function a(e,t){for(var n=Object.getOwnPropertyNames(t),a=0;a<n.length;a++){var r=n[a],o=Object.getOwnPropertyDescriptor(t,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):a(e,t))}var s=n("./node_modules/react/index.js"),l=n.n(s),c=n("./node_modules/react-dom/index.js"),p=n.n(c),u=n("./js/_modules/i18n.js"),d=n("./js/_modules/config/index.js"),f=n("./js/_modules/Events.js"),h=n("./js/_modules/error.js"),m=n("./js/_modules/userData.js"),y=n("./js/_modules/dzPlayer.js"),b=n("./js/_modules/tracking.js"),g=n("./js/_modules/api.js"),_=n("./js/_modules/userSetting.js"),v=n("./js/_modules/redux/store.js"),E=(n("./node_modules/prop-types/index.js"),l.a.createElement("span",{className:"icon icon-cancel"})),O=function(e){function t(n){r(this,t);var a=o(this,e.call(this,n));return a._close=a._close.bind(a),a}return i(t,e),t.prototype.componentDidMount=function(){this.props.play&&f.a.subscribeOnce(f.a.player.play,this._close)},t.prototype.componentWillUnmount=function(){this.props.play&&f.a.unsubscribe(f.a.player.play)},t.prototype.render=function(){var e=this.props,t=e.body,n=e.closeBtn,a=e.direction,r=e.title,o=e.play;return t=Array.isArray(t)?t:[t],l.a.createElement("div",{className:"popover popover-"+a,role:"alertdialog","aria-labelledby":"tipTitle","aria-describedby":"tipBody"},n?l.a.createElement("button",{className:"popover-close",type:"button","aria-label":Object(u.a)("Fermer"),onClick:this._close},E):null,l.a.createElement("div",{className:"popover-body"},""!==r?l.a.createElement("div",{className:"popover-header",id:"tipTitle"},r):null,l.a.createElement("div",{className:"highlight",id:"tipBody"},t.map(function(e){return l.a.createElement("p",{key:"tip_text"+e},e)})),l.a.createElement("button",{type:"button",className:"btn btn-primary btn-block",onClick:o?this._play:this._close},l.a.createElement("span",{className:"label"},o?Object(u.a)("Écouter maintenant"):Object(u.a)("J'ai compris")))))},t.prototype._close=function(){f.a.trigger(f.a.tips.close,this.props.name)},t.prototype._play=function(){y.a.control.play()},t}(s.Component);O.defaultProps={name:void 0,title:"",play:!1,closeBtn:!1,direction:"right-top"};var j=O,T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w=null,N={tipsOnLoad:{playerfocus:!0},init:function(){try{var e=null;for(var t in N.tipsOnLoad)if(N.tipsOnLoad.hasOwnProperty(t)&&!0===N.tipsOnLoad[t]){if(e=N.load(t),N.check(e))break;e=null}f.a.subscribe(f.a.tips.close,function(e,t){N.close(t)}),f.a.subscribe(f.a.tips.draw,function(e,t){"string"==typeof t?N.draw(t):"object"===(void 0===t?"undefined":T(t))&&N.draw(t.name,t.check)}),f.a.ready(f.a.player.playerReady,function(){f.a.subscribeOnce(f.a.player.displayCurrentSong,function(){setTimeout(function(){null!==e&&e.hasOwnProperty("active")&&!0===e.active&&S.draw(e)},500)},"tips")},"tips"),C.init()}catch(e){h.a.log(e)}},load:function(e){return(e=S.element[e]||function(){return{}})()},check:function(e){return e.hasOwnProperty("active")&&!0===e.active&&"function"==typeof e.trigger&&!0===e.trigger()},draw:function(e,t){t=t||!1,e=N.load(e),!0===t&&!N.check(e)||null!==w||S.draw(e)},close:function(e){try{w=null;var t=document.getElementById(S.overlayName);null!==t&&document.body.removeChild(t);var n=N.load(e);if(n.hasOwnProperty("name")){var a=document.getElementById("tips_"+n.name);null!==a&&document.body.removeChild(a)}f.a.unsubscribeAll("tips"),n.hasOwnProperty("overlay")&&n.overlay.hasOwnProperty("className")&&(document.body.classList.remove("has-focus"),document.body.classList.remove(n.overlay.className))}catch(e){h.a.log(e)}}},S={overlayName:"tips-overlay",draw:function(e){try{var t,n=e.name;if(w=n,void 0===S.element[n])return!1;"function"==typeof e.callback&&e.callback(),"object"===T(e.overlay)&&((t=document.createElement("div")).id=S.overlayName,t.className=S.overlayName,t.style.display="none",document.body.appendChild(t).addEventListener("click",function(){N.close(n)}),document.body.classList.add("has-focus"),document.body.classList.add(e.overlay.className));var a=document.createElement("div");a.id="tips_"+n,a.className="tips",a.style.visibility="hidden",document.body.appendChild(a),p.a.render(l.a.createElement(j,e),document.getElementById("tips_"+n),function(){if(e.hasOwnProperty("user_settings")){var n={};Object.keys(e.user_settings).map(function(t){n[t]=e.user_settings[t]}),_.a.set({tips:n})}e.hasOwnProperty("tracking")&&b.a.track(e.tracking.key,{context:e.tracking.context}),this.setPosition(e,a),void 0!==t&&(t.style.display="block"),a.style.visibility="visible"}.bind(this))}catch(e){h.a.log(e)}},setPosition:function(e,t){if("function"==typeof e.style){var n=e.style();for(var a in n)n.hasOwnProperty(a)&&(t.style[a]=n[a]);v.default.getState().user.USER.OPTIONS.ads_display&&f.a.subscribeOnce(f.a.layout.adsBanner,function(){this.setPosition(e,t)}.bind(this),"tips")}},element:{business_planning_panel:function(){return{active:!0,name:"business_planning_panel",body:Object(u.a)("Retrouvez ici vos plannings. Créez et gérez vos programmations à tout moment en allant dans “Mes plannings”."),closeBtn:!0,direction:"left-bottom",user_settings:{business_planning_panel:!1},overlay:{className:"has-focus-business-panel"},trigger:function(){return Boolean(v.default.getState().user.USER.SETTING.tips.business_planning_panel)},style:function(){var e=document.getElementById("business-menu"),t={top:e.getBoundingClientRect().top+5+"px",right:e.getBoundingClientRect().width+10+"px"};return t}}},business_playlists_panel:function(){return{active:!0,name:"business_playlists_panel",title:Object(u.a)("Des contenus créés pour vous"),body:Object(u.a)("Retrouvez nos playlists Business et la sélection de nos éditos Deezer. À tout moment, faites glisser une playlist pour la déposer directement dans un de vos plannings."),closeBtn:!0,direction:"right-bottom",user_settings:{business_playlists_panel:!1},overlay:{className:"has-focus-business-playlists"},trigger:function(){return Boolean(v.default.getState().user.USER.SETTING.tips.business_playlists_panel)},style:function(){var e=document.getElementById("business-curated-panel-toggle"),t={top:e.getBoundingClientRect().top-10+"px",left:e.getBoundingClientRect().width-10+"px"};return t}}},playlist_assistant:function(){return{active:!0,name:"playlist_assistant",title:Object(u.a)("Rajoutez des titres à votre playlist !"),body:Object(u.a)("Besoin d'inspiration ? On vous recommande des titres à ajouter à votre playlist."),closeBtn:!0,direction:"right-bottom",user_settings:{playlist_assistant:!1},overlay:{className:"has-focus-playlist-assistant"},trigger:function(){return Boolean(v.default.getState().user.USER.SETTING.tips.playlist_assistant)},style:function(){var e=document.getElementById("naboo_datagrid_add_track"),t={top:e.getBoundingClientRect().top-e.getBoundingClientRect().height/2+"px",left:e.getBoundingClientRect().left+e.getBoundingClientRect().width+6+"px"};return t}}},playlist_assistant_suggest:function(){return{active:!0,name:"playlist_assistant_suggest",title:Object(u.a)("Vous avez compris le principe ?"),body:Object(u.a)('Vous pouvez stopper à tout moment. Il suffit de cliquer sur "Terminé !".'),closeBtn:!0,user_settings:{playlist_assistant_suggest:!1},trigger:function(){return Boolean(v.default.getState().user.USER.SETTING.tips.playlist_assistant_suggest)},style:function(){var e=document.getElementById("modal_playlist_assistant_submit"),t=document.getElementById("tips_playlist_assistant_suggest"),n={"z-index":8e3,top:e.getBoundingClientRect().top+1.5*e.getBoundingClientRect().height-t.getBoundingClientRect().height+"px",left:e.getBoundingClientRect().left+e.getBoundingClientRect().width+10+"px"};return n}}},playerfocus:function(){return{active:!0,name:"playerfocus",play:!0,body:Object(u.a)("Écoutez vite la musique que vous avez choisie !"),closeBtn:!0,direction:"right",tracking:{key:"onboarding_feed_display",context:"onboarding"},overlay:{className:"has-focus-player"},user_settings:{player:!1},callback:function(){f.a.ready(f.a.user.userReady,function(){var e=m.a.data;void 0!==e.FAVORITES_ARTISTS.data[0]?y.a.play({type:"artist",id:e.FAVORITES_ARTISTS.data[0].ART_ID,autoplay:!1,context:{TYPE:y.a.getContext("TYPE"),ID:e.FAVORITES_ARTISTS.data[0].ART_ID}}):m.a.loadData("genre")}),f.a.subscribeOnce(f.a.user.userLoadData,function(e,t){if("genre"===t.type){var n=m.a.data.FAVORITES_GENRES.data;void 0!==n[0]&&g.a.call({method:"deezer.pageTops",data:{nb:1,type:"track",genre_id:n[0].GENRE_ID},success:function(e){void 0!==e.ITEMS.data[0]&&y.a.play({type:"track",id:[e.ITEMS.data[0].SNG_ID],autoplay:!1,context:{TYPE:y.a.getContext("TYPE"),ID:e.ITEMS.data[0].SNG_ID}})}})}})},trigger:function(){return Boolean(v.default.getState().user.USER.SETTING.tips.player)},style:function(){var e=document.getElementById("player-cover"),t=document.getElementById("tips_"+this.name);if(null===e||null===t)return N.close(this.name),{};var n=e.getBoundingClientRect(),a=t.getBoundingClientRect(),r={top:n.top+a.height/2-8+"px"};return"rtl"===d.a.get("DIRECTION")?r.left=n.left-a.width-15+"px":r.left=n.left+n.width+15+"px",r}}},flow:function(){return{active:!0,name:"flow",title:Object(u.a)("Toute la musique que vous avez envie d'écouter"),body:Object(u.a)("Votre Flow : un mix basé sur vos goûts, qui s'adapte continuellement à vous. "),direction:"bottom-right",overlay:{className:"has-focus-flow"},user_settings:{flow:!1},trigger:function(){var e=document.getElementsByClassName("flow-content").length;return Boolean(v.default.getState().user.USER.SETTING.tips.flow&&e)},style:function(){var e=document.getElementById("flow-love");if(null===e)return N.close(this.name),{};var t=e.childNodes[0].getBoundingClientRect(),n={top:t.top+t.height+20+"px",left:t.left-3+"px"};return n}}},lyrics:function(){return{active:!0,name:"lyrics",title:Object(u.a)("Vous avez repéré le micro ?"),body:Object(u.a)("Les paroles sont disponibles, cliquez et commencez à chanter."),direction:"right-top",overlay:{className:"has-focus-lyrics"},user_settings:{lyrics:0},trigger:function(){return!(v.default.getState().user.USER.SETTING.tips.lyrics<=0)&&(0!==y.a.getCurrentSong("LYRICS_ID")&&(!(v.default.getState().user.USER.SETTING.tips.lyrics>1)||(_.a.set({tips:{lyrics:Math.round(v.default.getState().user.USER.SETTING.tips.lyrics-1)}}),!1)))},style:function(){var e=document.getElementById("player-lyrics"),t=document.getElementById("tips_lyrics");if(null===e||null===t)return N.close(this.name),{};var n=e.getBoundingClientRect(),a=t.getBoundingClientRect(),r={top:n.top-a.height+42+"px"};return"rtl"===d.a.get("DIRECTION")?r.left=n.left-a.width-15+"px":r.left=n.left+n.width+15+"px",r}}},add_to_library:function(){return{active:!0,name:"add_to_library",title:"",body:"",direction:"bottom",overlay:{className:"has-focus-add-library"},user_settings:{add_to_library:!1},callback:function(){var e=window.getCurrentPage(),t=window[e].data;"playlist"===e?(this.title=Object(u.a)("Vous avez envie de retrouver cette playlist ?"),this.body=Object(u.a)("Ajoutez-la à votre musique préférée, vous pouvez la réécouter à tout moment.")):"album"===e?(this.title=Object(u.a)("%1$s vous a plu ?",{sprintf:[t.ALB_TITLE]}),this.body=Object(u.a)("Vous aimez, vous nous le dites, il est directement ajouté à vos favoris.")):"artist"===e&&(this.title=Object(u.a)("Envie d'écouter %1$s plus tard ?",{sprintf:[t.DATA.ART_NAME]}),this.body=Object(u.a)("Retrouvez vos artistes préférés rapidement en les ajoutant à vos favoris."))},trigger:function(){var e=window.getCurrentPage();if("object"!==T(window[e]))return!1;var t=window[e].id;return!(0===t||!e.match(/^(playlist|album|artist)$/i))&&(!m.a.isFavorite(e,t)&&!(!document.getElementById("add_to_library")||!1===v.default.getState().user.USER.SETTING.tips.add_to_library))},style:function(){var e=document.getElementById("add_to_library"),t=document.getElementById("tips_"+this.name);if(null===e||null===t)return N.close(this.name),{};var n=e.getBoundingClientRect(),a=t.getBoundingClientRect(),r={top:n.top+n.height+15+"px",left:n.left-a.width/2+42+"px"};return r}}}}},C={init:function(){!0===v.default.getState().user.USER.SETTING.tips.flow&&f.a.ready(f.a.flow.playerDisplay,function(){setTimeout(function(){N.draw("flow",!0)},1e3)}),v.default.getState().user.USER.SETTING.tips.lyrics>0&&f.a.subscribe(f.a.player.play,function(){setTimeout(function(){N.draw("lyrics",!0)},1e3)},"tips"),!0===v.default.getState().user.USER.SETTING.tips.add_to_library&&f.a.subscribe(f.a.navigation.page_displayed,function(){setTimeout(function(){N.draw("add_to_library",!0)},1e3)})}};t.a=N},"./node_modules/lodash.throttle/index.js":function(e,t,n){(function(t){function n(e,t,n){function r(t){var n=f,a=h;return f=h=void 0,_=t,y=e.apply(a,n)}function o(e){return _=e,b=setTimeout(p,t),j?r(e):y}function s(e){var n=e-_,a=t-(e-g);return T?E(a,m-n):a}function c(e){var n=e-g,a=e-_;return void 0===g||n>=t||n<0||T&&a>=m}function p(){var e=O();if(c(e))return u(e);b=setTimeout(p,s(e))}function u(e){return b=void 0,w&&f?r(e):(f=h=void 0,y)}function d(){var e=O(),n=c(e);if(f=arguments,h=this,g=e,n){if(void 0===b)return o(g);if(T)return b=setTimeout(p,t),r(g)}return void 0===b&&(b=setTimeout(p,t)),y}var f,h,m,y,b,g,_=0,j=!1,T=!1,w=!0;if("function"!=typeof e)throw new TypeError(l);return t=i(t)||0,a(n)&&(j=!!n.leading,m=(T="maxWait"in n)?v(i(n.maxWait)||0,t):m,w="trailing"in n?!!n.trailing:w),d.cancel=function(){void 0!==b&&clearTimeout(b),_=0,f=g=h=b=void 0},d.flush=function(){return void 0===b?y:u(O())},d}function a(e){var t=void 0===e?"undefined":s(e);return!!e&&("object"==t||"function"==t)}function r(e){return!!e&&"object"==(void 0===e?"undefined":s(e))}function o(e){return"symbol"==(void 0===e?"undefined":s(e))||r(e)&&_.call(e)==p}function i(e){if("number"==typeof e)return e;if(o(e))return c;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(u,"");var n=f.test(e);return n||h.test(e)?m(e.slice(2),n?2:8):d.test(e)?c:+e}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l="Expected a function",c=NaN,p="[object Symbol]",u=/^\s+|\s+$/g,d=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,h=/^0o[0-7]+$/i,m=parseInt,y="object"==(void 0===t?"undefined":s(t))&&t&&t.Object===Object&&t,b="object"==("undefined"==typeof self?"undefined":s(self))&&self&&self.Object===Object&&self,g=y||b||Function("return this")(),_=Object.prototype.toString,v=Math.max,E=Math.min,O=function(){return g.Date.now()};e.exports=function(e,t,r){var o=!0,i=!0;if("function"!=typeof e)throw new TypeError(l);return a(r)&&(o="leading"in r?!!r.leading:o,i="trailing"in r?!!r.trailing:i),n(e,t,{leading:o,maxWait:t,trailing:i})}}).call(t,n("./node_modules/webpack/buildin/global.js"))},"./sass/bootstrap.scss":function(e,t){},"./sass/naboo.scss":function(e,t){}},["./js/_bundles/app-web.js"]);
//# sourceMappingURL=https://files.deezer.com/cache/js/app-web.b3b6b6d28d897a2796cc.js.map.json