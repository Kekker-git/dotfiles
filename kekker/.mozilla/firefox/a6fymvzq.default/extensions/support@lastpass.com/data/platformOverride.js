!function(e){var n={},o=0,t=null,a=function(e){var o=n[e.requestID];delete n[e.requestID],o&&(e.success?o.success(e.data):o.error())};e.doAjax=function(e){var t={success:e.success,error:e.error};delete e.success,delete e.error;var a=++o;n[a]=t,e.data=e.data||{},e.data.wxsessid=bg.lp_phpsessid,window.postMessage({cmd:"ajax",requestID:a,params:e},window.location.origin)},window.addEventListener("message",function(e){e.origin===window.location.origin&&"object"==typeof e.data&&"ajaxResponse"===e.data.cmd&&a(e.data)}),e.initialize=function(){var e=function(e){var n=document.createElement("iframe");n.setAttribute("class","backgroundFrame"),n.src="backgroundFrame.html";var o=window.location.href.indexOf("?");o>-1&&(n.src+=window.location.href.substring(o)),n.addEventListener("load",function(){t=n.contentWindow,e.messageShim&&t.LPPlatform.setMessageShim(e.messageShim),t.LPPlatform.getBackgroundInterface({context:e.context,getData:e.getData,pollBackground:e.pollBackground,interfaceDefinition:e.interfaceDefinition,callback:function(n){window.bg=n,Topics.get(Topics.INITIALIZED).publish(),e.callback&&e.callback()}})}),document.body.appendChild(n)};return function(n){"interactive"===window.document.readyState?e(n):window.addEventListener("DOMContentLoaded",function(){e(n)})}}(),e.setLoginPopoverSize=function(e,n){bg.LPPlatform.resizePanel(n+2,e+2)},e.setDropdownPopoverSize=function(e,n){bg.LPPlatform.resizePanel(n+2,e+2)},e.doClosePopup=function(){bg.LPPlatform.closePanel()},e.closeTab=function(){bg.LPPlatform.closeTab()},e.checkBrowserPasswordManager=function(e){bg.get("remembersignons")&&e()},e.getImportHandler=function(){return!0===bg.get("g_one_minute_signup_enabled")?"addEmailSites":"importerHandler"},e.resizeTo=function(e,n){bg.LPPlatform.resizeDialogWindow(e,n)},e.handlePreferenceChanges=function(e){return function(n){e(n),bg.setup_hotkeys()}}(e.handlePreferenceChanges),e.optInToFamiliesDone=function(){Topics.get(Topics.REFRESH_DATA).publish(),e.closeTab()}}(LPPlatform);